import{_ as Bm}from"./index-adeb8ac4.js";import{g as jc,a as ns,c as hr}from"./_commonjsHelpers-de833af9.js";import{ai as ne,aj as km,ak as uf,al as hf,am as qc,an as xo,ao as Vm,ap as Ei,aq as Km,ar as Gm,as as Z,at as Wm,au as vc,av as Jm,aw as Qm,ax as Ym,ay as Yh,az as Xm,aA as Zm,aB as e_,aC as Xh,aD as t_,aE as r_,aF as Xn,aG as Zh,aH as i_,aI as n_,aJ as lf,aK as Dr,aL as s_,aM as o_,aN as ln,aO as Lt,aP as tr,aQ as bi,aR as ur,aS as a_,aT as fn,aU as ff,aV as c_,aW as u_,aX as h_,aY as pf,aZ as l_,a_ as df,a$ as gf,b0 as dn,b1 as mc,b2 as yo,b3 as vn,b4 as f_,b5 as vo,b6 as p_,b7 as d_,b8 as g_,b9 as lo,ba as y_,bb as v_,bc as tc,bd as el,be as m_,bf as __,bg as w_,bh as tl,bi as b_,bj as E_,bk as x_,bl as I_,bm as S_,bn as P_,bo as O_,bp as Wn,bq as yf,br as rc,bs as R_,bt as A_}from"./Home-ee1aa0fb.js";import"./Logo-686844d8.js";import"./tag-cca851a4.js";import"./resizeObserver-c48824a6.js";var Mc={exports:{}},gn=typeof Reflect=="object"?Reflect:null,rl=gn&&typeof gn.apply=="function"?gn.apply:function(r,t,n){return Function.prototype.apply.call(r,t,n)},mo;gn&&typeof gn.ownKeys=="function"?mo=gn.ownKeys:Object.getOwnPropertySymbols?mo=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:mo=function(r){return Object.getOwnPropertyNames(r)};function T_(o){console&&console.warn&&console.warn(o)}var vf=Number.isNaN||function(r){return r!==r};function Be(){Be.init.call(this)}Mc.exports=Be;Mc.exports.once=L_;Be.EventEmitter=Be;Be.prototype._events=void 0;Be.prototype._eventsCount=0;Be.prototype._maxListeners=void 0;var il=10;function Io(o){if(typeof o!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}Object.defineProperty(Be,"defaultMaxListeners",{enumerable:!0,get:function(){return il},set:function(o){if(typeof o!="number"||o<0||vf(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");il=o}});Be.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Be.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||vf(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function mf(o){return o._maxListeners===void 0?Be.defaultMaxListeners:o._maxListeners}Be.prototype.getMaxListeners=function(){return mf(this)};Be.prototype.emit=function(r){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var s=r==="error",c=this._events;if(c!==void 0)s=s&&c.error===void 0;else if(!s)return!1;if(s){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var p=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw p.context=l,p}var _=c[r];if(_===void 0)return!1;if(typeof _=="function")rl(_,this,t);else for(var y=_.length,O=xf(_,y),n=0;n<y;++n)rl(O[n],this,t);return!0};function _f(o,r,t,n){var s,c,l;if(Io(t),c=o._events,c===void 0?(c=o._events=Object.create(null),o._eventsCount=0):(c.newListener!==void 0&&(o.emit("newListener",r,t.listener?t.listener:t),c=o._events),l=c[r]),l===void 0)l=c[r]=t,++o._eventsCount;else if(typeof l=="function"?l=c[r]=n?[t,l]:[l,t]:n?l.unshift(t):l.push(t),s=mf(o),s>0&&l.length>s&&!l.warned){l.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=o,p.type=r,p.count=l.length,T_(p)}return o}Be.prototype.addListener=function(r,t){return _f(this,r,t,!1)};Be.prototype.on=Be.prototype.addListener;Be.prototype.prependListener=function(r,t){return _f(this,r,t,!0)};function C_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wf(o,r,t){var n={fired:!1,wrapFn:void 0,target:o,type:r,listener:t},s=C_.bind(n);return s.listener=t,n.wrapFn=s,s}Be.prototype.once=function(r,t){return Io(t),this.on(r,wf(this,r,t)),this};Be.prototype.prependOnceListener=function(r,t){return Io(t),this.prependListener(r,wf(this,r,t)),this};Be.prototype.removeListener=function(r,t){var n,s,c,l,p;if(Io(t),s=this._events,s===void 0)return this;if(n=s[r],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete s[r],s.removeListener&&this.emit("removeListener",r,n.listener||t));else if(typeof n!="function"){for(c=-1,l=n.length-1;l>=0;l--)if(n[l]===t||n[l].listener===t){p=n[l].listener,c=l;break}if(c<0)return this;c===0?n.shift():$_(n,c),n.length===1&&(s[r]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",r,p||t)}return this};Be.prototype.off=Be.prototype.removeListener;Be.prototype.removeAllListeners=function(r){var t,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[r]),this;if(arguments.length===0){var c=Object.keys(n),l;for(s=0;s<c.length;++s)l=c[s],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[r],typeof t=="function")this.removeListener(r,t);else if(t!==void 0)for(s=t.length-1;s>=0;s--)this.removeListener(r,t[s]);return this};function bf(o,r,t){var n=o._events;if(n===void 0)return[];var s=n[r];return s===void 0?[]:typeof s=="function"?t?[s.listener||s]:[s]:t?N_(s):xf(s,s.length)}Be.prototype.listeners=function(r){return bf(this,r,!0)};Be.prototype.rawListeners=function(r){return bf(this,r,!1)};Be.listenerCount=function(o,r){return typeof o.listenerCount=="function"?o.listenerCount(r):Ef.call(o,r)};Be.prototype.listenerCount=Ef;function Ef(o){var r=this._events;if(r!==void 0){var t=r[o];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Be.prototype.eventNames=function(){return this._eventsCount>0?mo(this._events):[]};function xf(o,r){for(var t=new Array(r),n=0;n<r;++n)t[n]=o[n];return t}function $_(o,r){for(;r+1<o.length;r++)o[r]=o[r+1];o.pop()}function N_(o){for(var r=new Array(o.length),t=0;t<r.length;++t)r[t]=o[t].listener||o[t];return r}function L_(o,r){return new Promise(function(t,n){function s(l){o.removeListener(r,c),n(l)}function c(){typeof o.removeListener=="function"&&o.removeListener("error",s),t([].slice.call(arguments))}If(o,r,c,{once:!0}),r!=="error"&&D_(o,s,{once:!0})})}function D_(o,r,t){typeof o.on=="function"&&If(o,"error",r,t)}function If(o,r,t,n){if(typeof o.on=="function")n.once?o.once(r,t):o.on(r,t);else if(typeof o.addEventListener=="function")o.addEventListener(r,function s(c){n.once&&o.removeEventListener(r,s),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o)}var vr=Mc.exports;const zc=jc(vr);var So={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _c=function(o,r){return _c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},_c(o,r)};function F_(o,r){_c(o,r);function t(){this.constructor=o}o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var wc=function(){return wc=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},wc.apply(this,arguments)};function j_(o,r){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function q_(o,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,r,t,n);else for(var p=o.length-1;p>=0;p--)(l=o[p])&&(c=(s<3?l(c):s>3?l(r,t,c):l(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function M_(o,r){return function(t,n){r(t,n,o)}}function z_(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function U_(o,r,t,n){function s(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function p(O){try{y(n.next(O))}catch(F){l(F)}}function _(O){try{y(n.throw(O))}catch(F){l(F)}}function y(O){O.done?c(O.value):s(O.value).then(p,_)}y((n=n.apply(o,r||[])).next())})}function H_(o,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(y){return function(O){return _([y,O])}}function _(y){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,s=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){t.label=y[1];break}if(y[0]===6&&t.label<c[1]){t.label=c[1],c=y;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(y);break}c[2]&&t.ops.pop(),t.trys.pop();continue}y=r.call(o,t)}catch(O){y=[6,O],s=0}finally{n=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function B_(o,r,t,n){n===void 0&&(n=t),o[n]=r[t]}function k_(o,r){for(var t in o)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=o[t])}function bc(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sf(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),s,c=[],l;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(p){l={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return c}function V_(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(Sf(arguments[r]));return o}function K_(){for(var o=0,r=0,t=arguments.length;r<t;r++)o+=arguments[r].length;for(var n=Array(o),s=0,r=0;r<t;r++)for(var c=arguments[r],l=0,p=c.length;l<p;l++,s++)n[s]=c[l];return n}function Zn(o){return this instanceof Zn?(this.v=o,this):new Zn(o)}function G_(o,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,r||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(A){n[A]&&(s[A]=function(M){return new Promise(function(D,K){c.push([A,M,D,K])>1||p(A,M)})})}function p(A,M){try{_(n[A](M))}catch(D){F(c[0][3],D)}}function _(A){A.value instanceof Zn?Promise.resolve(A.value.v).then(y,O):F(c[0][2],A)}function y(A){p("next",A)}function O(A){p("throw",A)}function F(A,M){A(M),c.shift(),c.length&&p(c[0][0],c[0][1])}}function W_(o){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=o[s]?function(l){return(t=!t)?{value:Zn(o[s](l)),done:s==="return"}:c?c(l):l}:c}}function J_(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],t;return r?r.call(o):(o=typeof bc=="function"?bc(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=o[c]&&function(l){return new Promise(function(p,_){l=o[c](l),s(p,_,l.done,l.value)})}}function s(c,l,p,_){Promise.resolve(_).then(function(y){c({value:y,done:p})},l)}}function Q_(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function Y_(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var t in o)Object.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r.default=o,r}function X_(o){return o&&o.__esModule?o:{default:o}}function Z_(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function e1(o,r,t){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,t),t}const t1=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return wc},__asyncDelegator:W_,__asyncGenerator:G_,__asyncValues:J_,__await:Zn,__awaiter:U_,__classPrivateFieldGet:Z_,__classPrivateFieldSet:e1,__createBinding:B_,__decorate:q_,__exportStar:k_,__extends:F_,__generator:H_,__importDefault:X_,__importStar:Y_,__makeTemplateObject:Q_,__metadata:z_,__param:M_,__read:Sf,__rest:j_,__spread:V_,__spreadArrays:K_,__values:bc},Symbol.toStringTag,{value:"Module"})),Pf=ns(t1);var ss={};Object.defineProperty(ss,"__esModule",{value:!0});function r1(o){if(typeof o!="string")throw new Error(`Cannot safe json parse value of type ${typeof o}`);try{return JSON.parse(o)}catch{return o}}ss.safeJsonParse=r1;function i1(o){return typeof o=="string"?o:JSON.stringify(o,(r,t)=>typeof t>"u"?null:t)}ss.safeJsonStringify=i1;var qn={exports:{}},nl;function n1(){return nl||(nl=1,function(){let o;function r(){}o=r,o.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},o.prototype.setItem=function(t,n){this[t]=String(n)},o.prototype.removeItem=function(t){delete this[t]},o.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},o.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},o.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof hr<"u"&&hr.localStorage?qn.exports=hr.localStorage:typeof window<"u"&&window.localStorage?qn.exports=window.localStorage:qn.exports=new r}()),qn.exports}var ic={},Mn={},sl;function s1(){if(sl)return Mn;sl=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.IKeyValueStorage=void 0;class o{}return Mn.IKeyValueStorage=o,Mn}var zn={},ol;function o1(){if(ol)return zn;ol=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.parseEntry=void 0;const o=ss;function r(t){var n;return[t[0],o.safeJsonParse((n=t[1])!==null&&n!==void 0?n:"")]}return zn.parseEntry=r,zn}var al;function a1(){return al||(al=1,function(o){Object.defineProperty(o,"__esModule",{value:!0});const r=Pf;r.__exportStar(s1(),o),r.__exportStar(o1(),o)}(ic)),ic}Object.defineProperty(So,"__esModule",{value:!0});So.KeyValueStorage=void 0;const pn=Pf,cl=ss,c1=pn.__importDefault(n1()),u1=a1();class Of{constructor(){this.localStorage=c1.default}getKeys(){return pn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return pn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(u1.parseEntry)})}getItem(r){return pn.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(r);if(t!==null)return cl.safeJsonParse(t)})}setItem(r,t){return pn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(r,cl.safeJsonStringify(t))})}removeItem(r){return pn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(r)})}}So.KeyValueStorage=Of;var h1=So.default=Of,mn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ec=function(o,r){return Ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},Ec(o,r)};function l1(o,r){Ec(o,r);function t(){this.constructor=o}o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var xc=function(){return xc=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},xc.apply(this,arguments)};function f1(o,r){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function p1(o,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,r,t,n);else for(var p=o.length-1;p>=0;p--)(l=o[p])&&(c=(s<3?l(c):s>3?l(r,t,c):l(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function d1(o,r){return function(t,n){r(t,n,o)}}function g1(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function y1(o,r,t,n){function s(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function p(O){try{y(n.next(O))}catch(F){l(F)}}function _(O){try{y(n.throw(O))}catch(F){l(F)}}function y(O){O.done?c(O.value):s(O.value).then(p,_)}y((n=n.apply(o,r||[])).next())})}function v1(o,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(y){return function(O){return _([y,O])}}function _(y){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,s=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){t.label=y[1];break}if(y[0]===6&&t.label<c[1]){t.label=c[1],c=y;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(y);break}c[2]&&t.ops.pop(),t.trys.pop();continue}y=r.call(o,t)}catch(O){y=[6,O],s=0}finally{n=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function m1(o,r,t,n){n===void 0&&(n=t),o[n]=r[t]}function _1(o,r){for(var t in o)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=o[t])}function Ic(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rf(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),s,c=[],l;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(p){l={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return c}function w1(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(Rf(arguments[r]));return o}function b1(){for(var o=0,r=0,t=arguments.length;r<t;r++)o+=arguments[r].length;for(var n=Array(o),s=0,r=0;r<t;r++)for(var c=arguments[r],l=0,p=c.length;l<p;l++,s++)n[s]=c[l];return n}function es(o){return this instanceof es?(this.v=o,this):new es(o)}function E1(o,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,r||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(A){n[A]&&(s[A]=function(M){return new Promise(function(D,K){c.push([A,M,D,K])>1||p(A,M)})})}function p(A,M){try{_(n[A](M))}catch(D){F(c[0][3],D)}}function _(A){A.value instanceof es?Promise.resolve(A.value.v).then(y,O):F(c[0][2],A)}function y(A){p("next",A)}function O(A){p("throw",A)}function F(A,M){A(M),c.shift(),c.length&&p(c[0][0],c[0][1])}}function x1(o){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=o[s]?function(l){return(t=!t)?{value:es(o[s](l)),done:s==="return"}:c?c(l):l}:c}}function I1(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],t;return r?r.call(o):(o=typeof Ic=="function"?Ic(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=o[c]&&function(l){return new Promise(function(p,_){l=o[c](l),s(p,_,l.done,l.value)})}}function s(c,l,p,_){Promise.resolve(_).then(function(y){c({value:y,done:p})},l)}}function S1(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function P1(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var t in o)Object.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r.default=o,r}function O1(o){return o&&o.__esModule?o:{default:o}}function R1(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function A1(o,r,t){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,t),t}const T1=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return xc},__asyncDelegator:x1,__asyncGenerator:E1,__asyncValues:I1,__await:es,__awaiter:y1,__classPrivateFieldGet:R1,__classPrivateFieldSet:A1,__createBinding:m1,__decorate:p1,__exportStar:_1,__extends:l1,__generator:v1,__importDefault:O1,__importStar:P1,__makeTemplateObject:S1,__metadata:g1,__param:d1,__read:Rf,__rest:f1,__spread:w1,__spreadArrays:b1,__values:Ic},Symbol.toStringTag,{value:"Module"})),Po=ns(T1);var Un={},nc={},Hn={};let Hi=class{};const C1=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Hi},Symbol.toStringTag,{value:"Module"})),$1=ns(C1);var ul;function N1(){if(ul)return Hn;ul=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.IHeartBeat=void 0;const o=$1;class r extends o.IEvents{constructor(n){super()}}return Hn.IHeartBeat=r,Hn}var hl;function Af(){return hl||(hl=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),Po.__exportStar(N1(),o)}(nc)),nc}var sc={},zi={},ll;function L1(){if(ll)return zi;ll=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.HEARTBEAT_EVENTS=zi.HEARTBEAT_INTERVAL=void 0;const o=ne;return zi.HEARTBEAT_INTERVAL=o.FIVE_SECONDS,zi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},zi}var fl;function Tf(){return fl||(fl=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),Po.__exportStar(L1(),o)}(sc)),sc}var pl;function D1(){if(pl)return Un;pl=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.HeartBeat=void 0;const o=Po,r=vr,t=ne,n=Af(),s=Tf();class c extends n.IHeartBeat{constructor(p){super(p),this.events=new r.EventEmitter,this.interval=s.HEARTBEAT_INTERVAL,this.interval=(p==null?void 0:p.interval)||s.HEARTBEAT_INTERVAL}static init(p){return o.__awaiter(this,void 0,void 0,function*(){const _=new c(p);return yield _.init(),_})}init(){return o.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(p,_){this.events.on(p,_)}once(p,_){this.events.once(p,_)}off(p,_){this.events.off(p,_)}removeListener(p,_){this.events.removeListener(p,_)}initialize(){return o.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(s.HEARTBEAT_EVENTS.pulse)}}return Un.HeartBeat=c,Un}(function(o){Object.defineProperty(o,"__esModule",{value:!0});const r=Po;r.__exportStar(D1(),o),r.__exportStar(Af(),o),r.__exportStar(Tf(),o)})(mn);var Te={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sc=function(o,r){return Sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},Sc(o,r)};function F1(o,r){Sc(o,r);function t(){this.constructor=o}o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Pc=function(){return Pc=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},Pc.apply(this,arguments)};function j1(o,r){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function q1(o,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,r,t,n);else for(var p=o.length-1;p>=0;p--)(l=o[p])&&(c=(s<3?l(c):s>3?l(r,t,c):l(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function M1(o,r){return function(t,n){r(t,n,o)}}function z1(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function U1(o,r,t,n){function s(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function p(O){try{y(n.next(O))}catch(F){l(F)}}function _(O){try{y(n.throw(O))}catch(F){l(F)}}function y(O){O.done?c(O.value):s(O.value).then(p,_)}y((n=n.apply(o,r||[])).next())})}function H1(o,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(y){return function(O){return _([y,O])}}function _(y){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,s=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){t.label=y[1];break}if(y[0]===6&&t.label<c[1]){t.label=c[1],c=y;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(y);break}c[2]&&t.ops.pop(),t.trys.pop();continue}y=r.call(o,t)}catch(O){y=[6,O],s=0}finally{n=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function B1(o,r,t,n){n===void 0&&(n=t),o[n]=r[t]}function k1(o,r){for(var t in o)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=o[t])}function Oc(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cf(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),s,c=[],l;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(p){l={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return c}function V1(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(Cf(arguments[r]));return o}function K1(){for(var o=0,r=0,t=arguments.length;r<t;r++)o+=arguments[r].length;for(var n=Array(o),s=0,r=0;r<t;r++)for(var c=arguments[r],l=0,p=c.length;l<p;l++,s++)n[s]=c[l];return n}function ts(o){return this instanceof ts?(this.v=o,this):new ts(o)}function G1(o,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,r||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(A){n[A]&&(s[A]=function(M){return new Promise(function(D,K){c.push([A,M,D,K])>1||p(A,M)})})}function p(A,M){try{_(n[A](M))}catch(D){F(c[0][3],D)}}function _(A){A.value instanceof ts?Promise.resolve(A.value.v).then(y,O):F(c[0][2],A)}function y(A){p("next",A)}function O(A){p("throw",A)}function F(A,M){A(M),c.shift(),c.length&&p(c[0][0],c[0][1])}}function W1(o){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=o[s]?function(l){return(t=!t)?{value:ts(o[s](l)),done:s==="return"}:c?c(l):l}:c}}function J1(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],t;return r?r.call(o):(o=typeof Oc=="function"?Oc(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=o[c]&&function(l){return new Promise(function(p,_){l=o[c](l),s(p,_,l.done,l.value)})}}function s(c,l,p,_){Promise.resolve(_).then(function(y){c({value:y,done:p})},l)}}function Q1(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function Y1(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var t in o)Object.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r.default=o,r}function X1(o){return o&&o.__esModule?o:{default:o}}function Z1(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function ew(o,r,t){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,t),t}const tw=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Pc},__asyncDelegator:W1,__asyncGenerator:G1,__asyncValues:J1,__await:ts,__awaiter:U1,__classPrivateFieldGet:Z1,__classPrivateFieldSet:ew,__createBinding:B1,__decorate:q1,__exportStar:k1,__extends:F1,__generator:H1,__importDefault:X1,__importStar:Y1,__makeTemplateObject:Q1,__metadata:z1,__param:M1,__read:Cf,__rest:j1,__spread:V1,__spreadArrays:K1,__values:Oc},Symbol.toStringTag,{value:"Module"})),rw=ns(tw);var oc,dl;function iw(){if(dl)return oc;dl=1;function o(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}oc=r;function r(t,n,s){var c=s&&s.stringify||o,l=1;if(typeof t=="object"&&t!==null){var p=n.length+l;if(p===1)return t;var _=new Array(p);_[0]=c(t);for(var y=1;y<p;y++)_[y]=c(n[y]);return _.join(" ")}if(typeof t!="string")return t;var O=n.length;if(O===0)return t;for(var F="",A=1-l,M=-1,D=t&&t.length||0,K=0;K<D;){if(t.charCodeAt(K)===37&&K+1<D){switch(M=M>-1?M:0,t.charCodeAt(K+1)){case 100:case 102:if(A>=O||n[A]==null)break;M<K&&(F+=t.slice(M,K)),F+=Number(n[A]),M=K+2,K++;break;case 105:if(A>=O||n[A]==null)break;M<K&&(F+=t.slice(M,K)),F+=Math.floor(Number(n[A])),M=K+2,K++;break;case 79:case 111:case 106:if(A>=O||n[A]===void 0)break;M<K&&(F+=t.slice(M,K));var ie=typeof n[A];if(ie==="string"){F+="'"+n[A]+"'",M=K+2,K++;break}if(ie==="function"){F+=n[A].name||"<anonymous>",M=K+2,K++;break}F+=c(n[A]),M=K+2,K++;break;case 115:if(A>=O)break;M<K&&(F+=t.slice(M,K)),F+=String(n[A]),M=K+2,K++;break;case 37:M<K&&(F+=t.slice(M,K)),F+="%",M=K+2,K++,A--;break}++A}++K}return M===-1?t:(M<D&&(F+=t.slice(M)),F)}return oc}var ac,gl;function nw(){if(gl)return ac;gl=1;const o=iw();ac=s;const r=le().console||{},t={mapHttpRequest:D,mapHttpResponse:D,wrapRequestSerializer:K,wrapResponseSerializer:K,wrapErrorSerializer:K,req:D,res:D,err:A};function n(N,U){return Array.isArray(N)?N.filter(function(ye){return ye!=="!stdSerializers.err"}):N===!0?Object.keys(U):!1}function s(N){N=N||{},N.browser=N.browser||{};const U=N.browser.transmit;if(U&&typeof U.send!="function")throw Error("pino: transmit option must have a send function");const W=N.browser.write||r;N.browser.write&&(N.browser.asObject=!0);const ye=N.serializers||{},re=n(N.browser.serialize,ye);let ue=N.browser.serialize;Array.isArray(N.browser.serialize)&&N.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ue=!1);const Ce=["error","fatal","warn","info","debug","trace"];typeof W=="function"&&(W.error=W.fatal=W.warn=W.info=W.debug=W.trace=W),N.enabled===!1&&(N.level="silent");const ze=N.level||"info",m=Object.create(W);m.log||(m.log=ie),Object.defineProperty(m,"levelVal",{get:Y}),Object.defineProperty(m,"level",{get:ce,set:V});const x={transmit:U,serialize:re,asObject:N.browser.asObject,levels:Ce,timestamp:M(N)};m.levels=s.levels,m.level=ze,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=ie,m.serializers=ye,m._serialize=re,m._stdErrSerialize=ue,m.child=H,U&&(m._logEvent=F());function Y(){return this.level==="silent"?1/0:this.levels.values[this.level]}function ce(){return this._level}function V(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,c(x,m,"error","log"),c(x,m,"fatal","error"),c(x,m,"warn","error"),c(x,m,"info","log"),c(x,m,"debug","log"),c(x,m,"trace","log")}function H(k,G){if(!k)throw new Error("missing bindings for child Pino");G=G||{},re&&k.serializers&&(G.serializers=k.serializers);const Qe=G.serializers;if(re&&Qe){var ke=Object.assign({},ye,Qe),jr=N.browser.serialize===!0?Object.keys(ke):re;delete k.serializers,_([k],jr,ke,this._stdErrSerialize)}function xe(It){this._childLevel=(It._childLevel|0)+1,this.error=y(It,k,"error"),this.fatal=y(It,k,"fatal"),this.warn=y(It,k,"warn"),this.info=y(It,k,"info"),this.debug=y(It,k,"debug"),this.trace=y(It,k,"trace"),ke&&(this.serializers=ke,this._serialize=jr),U&&(this._logEvent=F([].concat(It._logEvent.bindings,k)))}return xe.prototype=this,new xe(this)}return m}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:Ee,epochTime:ge,unixTime:pe,isoTime:he});function c(N,U,W,ye){const re=Object.getPrototypeOf(U);U[W]=U.levelVal>U.levels.values[W]?ie:re[W]?re[W]:r[W]||r[ye]||ie,l(N,U,W)}function l(N,U,W){!N.transmit&&U[W]===ie||(U[W]=function(ye){return function(){const ue=N.timestamp(),Ce=new Array(arguments.length),ze=Object.getPrototypeOf&&Object.getPrototypeOf(this)===r?r:this;for(var m=0;m<Ce.length;m++)Ce[m]=arguments[m];if(N.serialize&&!N.asObject&&_(Ce,this._serialize,this.serializers,this._stdErrSerialize),N.asObject?ye.call(ze,p(this,W,Ce,ue)):ye.apply(ze,Ce),N.transmit){const x=N.transmit.level||U.level,Y=s.levels.values[x],ce=s.levels.values[W];if(ce<Y)return;O(this,{ts:ue,methodLevel:W,methodValue:ce,transmitLevel:x,transmitValue:s.levels.values[N.transmit.level||U.level],send:N.transmit.send,val:U.levelVal},Ce)}}}(U[W]))}function p(N,U,W,ye){N._serialize&&_(W,N._serialize,N.serializers,N._stdErrSerialize);const re=W.slice();let ue=re[0];const Ce={};ye&&(Ce.time=ye),Ce.level=s.levels.values[U];let ze=(N._childLevel|0)+1;if(ze<1&&(ze=1),ue!==null&&typeof ue=="object"){for(;ze--&&typeof re[0]=="object";)Object.assign(Ce,re.shift());ue=re.length?o(re.shift(),re):void 0}else typeof ue=="string"&&(ue=o(re.shift(),re));return ue!==void 0&&(Ce.msg=ue),Ce}function _(N,U,W,ye){for(const re in N)if(ye&&N[re]instanceof Error)N[re]=s.stdSerializers.err(N[re]);else if(typeof N[re]=="object"&&!Array.isArray(N[re]))for(const ue in N[re])U&&U.indexOf(ue)>-1&&ue in W&&(N[re][ue]=W[ue](N[re][ue]))}function y(N,U,W){return function(){const ye=new Array(1+arguments.length);ye[0]=U;for(var re=1;re<ye.length;re++)ye[re]=arguments[re-1];return N[W].apply(this,ye)}}function O(N,U,W){const ye=U.send,re=U.ts,ue=U.methodLevel,Ce=U.methodValue,ze=U.val,m=N._logEvent.bindings;_(W,N._serialize||Object.keys(N.serializers),N.serializers,N._stdErrSerialize===void 0?!0:N._stdErrSerialize),N._logEvent.ts=re,N._logEvent.messages=W.filter(function(x){return m.indexOf(x)===-1}),N._logEvent.level.label=ue,N._logEvent.level.value=Ce,ye(ue,N._logEvent,ze),N._logEvent=F(m)}function F(N){return{ts:0,messages:[],bindings:N||[],level:{label:"",value:0}}}function A(N){const U={type:N.constructor.name,msg:N.message,stack:N.stack};for(const W in N)U[W]===void 0&&(U[W]=N[W]);return U}function M(N){return typeof N.timestamp=="function"?N.timestamp:N.timestamp===!1?Ee:ge}function D(){return{}}function K(N){return N}function ie(){}function Ee(){return!1}function ge(){return Date.now()}function pe(){return Math.round(Date.now()/1e3)}function he(){return new Date(Date.now()).toISOString()}function le(){function N(U){return typeof U<"u"&&U}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return N(self)||N(window)||N(this)||{}}}return ac}var Ui={},yl;function $f(){return yl||(yl=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.PINO_CUSTOM_CONTEXT_KEY=Ui.PINO_LOGGER_DEFAULTS=void 0,Ui.PINO_LOGGER_DEFAULTS={level:"info"},Ui.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Ui}var er={},vl;function sw(){if(vl)return er;vl=1,Object.defineProperty(er,"__esModule",{value:!0}),er.generateChildLogger=er.formatChildLoggerContext=er.getLoggerContext=er.setBrowserLoggerContext=er.getBrowserLoggerContext=er.getDefaultLoggerOptions=void 0;const o=$f();function r(p){return Object.assign(Object.assign({},p),{level:(p==null?void 0:p.level)||o.PINO_LOGGER_DEFAULTS.level})}er.getDefaultLoggerOptions=r;function t(p,_=o.PINO_CUSTOM_CONTEXT_KEY){return p[_]||""}er.getBrowserLoggerContext=t;function n(p,_,y=o.PINO_CUSTOM_CONTEXT_KEY){return p[y]=_,p}er.setBrowserLoggerContext=n;function s(p,_=o.PINO_CUSTOM_CONTEXT_KEY){let y="";return typeof p.bindings>"u"?y=t(p,_):y=p.bindings().context||"",y}er.getLoggerContext=s;function c(p,_,y=o.PINO_CUSTOM_CONTEXT_KEY){const O=s(p,y);return O.trim()?`${O}/${_}`:_}er.formatChildLoggerContext=c;function l(p,_,y=o.PINO_CUSTOM_CONTEXT_KEY){const O=c(p,_,y),F=p.child({context:O});return n(F,O,y)}return er.generateChildLogger=l,er}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.pino=void 0;const r=rw,t=r.__importDefault(nw());Object.defineProperty(o,"pino",{enumerable:!0,get:function(){return t.default}}),r.__exportStar($f(),o),r.__exportStar(sw(),o)})(Te);class ow extends Hi{constructor(r){super(),this.opts=r,this.protocol="wc",this.version=2}}class aw extends Hi{constructor(r,t){super(),this.core=r,this.logger=t,this.records=new Map}}class cw{constructor(r,t){this.logger=r,this.core=t}}let uw=class extends Hi{constructor(r,t){super(),this.relayer=r,this.logger=t}},hw=class extends Hi{constructor(r){super()}},lw=class{constructor(r,t,n,s){this.core=r,this.logger=t,this.name=n}};class fw extends Hi{constructor(r,t){super(),this.relayer=r,this.logger=t}}let pw=class extends Hi{constructor(r,t){super(),this.core=r,this.logger=t}},dw=class{constructor(r,t){this.projectId=r,this.logger=t}},gw=class{constructor(r){this.opts=r,this.protocol="wc",this.version=2}},yw=class{constructor(r){this.client=r}};const vw=o=>JSON.stringify(o,(r,t)=>typeof t=="bigint"?t.toString()+"n":t),mw=o=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=o.replace(r,'$1"$2n"$3');return JSON.parse(t,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Uc(o){if(typeof o!="string")throw new Error(`Cannot safe json parse value of type ${typeof o}`);try{return mw(o)}catch{return o}}function rs(o){return typeof o=="string"?o:vw(o)||""}var Hc={},Nf={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var r=km,t=uf;o.DIGEST_LENGTH=64,o.BLOCK_SIZE=128;var n=function(){function p(){this.digestLength=o.DIGEST_LENGTH,this.blockSize=o.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return p.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},p.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},p.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},p.prototype.update=function(_,y){if(y===void 0&&(y=_.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var O=0;if(this._bytesHashed+=y,this._bufferLength>0){for(;this._bufferLength<o.BLOCK_SIZE&&y>0;)this._buffer[this._bufferLength++]=_[O++],y--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(y>=this.blockSize&&(O=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,_,O,y),y%=this.blockSize);y>0;)this._buffer[this._bufferLength++]=_[O++],y--;return this},p.prototype.finish=function(_){if(!this._finished){var y=this._bytesHashed,O=this._bufferLength,F=y/536870912|0,A=y<<3,M=y%128<112?128:256;this._buffer[O]=128;for(var D=O+1;D<M-8;D++)this._buffer[D]=0;r.writeUint32BE(F,this._buffer,M-8),r.writeUint32BE(A,this._buffer,M-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,M),this._finished=!0}for(var D=0;D<this.digestLength/8;D++)r.writeUint32BE(this._stateHi[D],_,D*8),r.writeUint32BE(this._stateLo[D],_,D*8+4);return this},p.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},p.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},p.prototype.restoreState=function(_){return this._stateHi.set(_.stateHi),this._stateLo.set(_.stateLo),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},p.prototype.cleanSavedState=function(_){t.wipe(_.stateHi),t.wipe(_.stateLo),_.buffer&&t.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},p}();o.SHA512=n;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(p,_,y,O,F,A,M){for(var D=y[0],K=y[1],ie=y[2],Ee=y[3],ge=y[4],pe=y[5],he=y[6],le=y[7],N=O[0],U=O[1],W=O[2],ye=O[3],re=O[4],ue=O[5],Ce=O[6],ze=O[7],m,x,Y,ce,V,H,k,G;M>=128;){for(var Qe=0;Qe<16;Qe++){var ke=8*Qe+A;p[Qe]=r.readUint32BE(F,ke),_[Qe]=r.readUint32BE(F,ke+4)}for(var Qe=0;Qe<80;Qe++){var jr=D,xe=K,It=ie,$=Ee,C=ge,R=pe,h=he,E=le,ee=N,fe=U,we=W,$e=ye,Le=re,Pe=ue,St=Ce,_t=ze;if(m=le,x=ze,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=(ge>>>14|re<<32-14)^(ge>>>18|re<<32-18)^(re>>>41-32|ge<<32-(41-32)),x=(re>>>14|ge<<32-14)^(re>>>18|ge<<32-18)^(ge>>>41-32|re<<32-(41-32)),V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,m=ge&pe^~ge&he,x=re&ue^~re&Ce,V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,m=s[Qe*2],x=s[Qe*2+1],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,m=p[Qe%16],x=_[Qe%16],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,Y=k&65535|G<<16,ce=V&65535|H<<16,m=Y,x=ce,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=(D>>>28|N<<32-28)^(N>>>34-32|D<<32-(34-32))^(N>>>39-32|D<<32-(39-32)),x=(N>>>28|D<<32-28)^(D>>>34-32|N<<32-(34-32))^(D>>>39-32|N<<32-(39-32)),V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,m=D&K^D&ie^K&ie,x=N&U^N&W^U&W,V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,E=k&65535|G<<16,_t=V&65535|H<<16,m=$,x=$e,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=Y,x=ce,V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,$=k&65535|G<<16,$e=V&65535|H<<16,K=jr,ie=xe,Ee=It,ge=$,pe=C,he=R,le=h,D=E,U=ee,W=fe,ye=we,re=$e,ue=Le,Ce=Pe,ze=St,N=_t,Qe%16===15)for(var ke=0;ke<16;ke++)m=p[ke],x=_[ke],V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=p[(ke+9)%16],x=_[(ke+9)%16],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,Y=p[(ke+1)%16],ce=_[(ke+1)%16],m=(Y>>>1|ce<<32-1)^(Y>>>8|ce<<32-8)^Y>>>7,x=(ce>>>1|Y<<32-1)^(ce>>>8|Y<<32-8)^(ce>>>7|Y<<32-7),V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,Y=p[(ke+14)%16],ce=_[(ke+14)%16],m=(Y>>>19|ce<<32-19)^(ce>>>61-32|Y<<32-(61-32))^Y>>>6,x=(ce>>>19|Y<<32-19)^(Y>>>61-32|ce<<32-(61-32))^(ce>>>6|Y<<32-6),V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,p[ke]=k&65535|G<<16,_[ke]=V&65535|H<<16}m=D,x=N,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=y[0],x=O[0],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,y[0]=D=k&65535|G<<16,O[0]=N=V&65535|H<<16,m=K,x=U,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=y[1],x=O[1],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,y[1]=K=k&65535|G<<16,O[1]=U=V&65535|H<<16,m=ie,x=W,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=y[2],x=O[2],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,y[2]=ie=k&65535|G<<16,O[2]=W=V&65535|H<<16,m=Ee,x=ye,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=y[3],x=O[3],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,y[3]=Ee=k&65535|G<<16,O[3]=ye=V&65535|H<<16,m=ge,x=re,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=y[4],x=O[4],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,y[4]=ge=k&65535|G<<16,O[4]=re=V&65535|H<<16,m=pe,x=ue,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=y[5],x=O[5],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,y[5]=pe=k&65535|G<<16,O[5]=ue=V&65535|H<<16,m=he,x=Ce,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=y[6],x=O[6],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,y[6]=he=k&65535|G<<16,O[6]=Ce=V&65535|H<<16,m=le,x=ze,V=x&65535,H=x>>>16,k=m&65535,G=m>>>16,m=y[7],x=O[7],V+=x&65535,H+=x>>>16,k+=m&65535,G+=m>>>16,H+=V>>>16,k+=H>>>16,G+=k>>>16,y[7]=le=k&65535|G<<16,O[7]=ze=V&65535|H<<16,A+=128,M-=128}return A}function l(p){var _=new n;_.update(p);var y=_.digest();return _.clean(),y}o.hash=l})(Nf);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.convertSecretKeyToX25519=o.convertPublicKeyToX25519=o.verify=o.sign=o.extractPublicKeyFromSecretKey=o.generateKeyPair=o.generateKeyPairFromSeed=o.SEED_LENGTH=o.SECRET_KEY_LENGTH=o.PUBLIC_KEY_LENGTH=o.SIGNATURE_LENGTH=void 0;const r=hf,t=Nf,n=uf;o.SIGNATURE_LENGTH=64,o.PUBLIC_KEY_LENGTH=32,o.SECRET_KEY_LENGTH=64,o.SEED_LENGTH=32;function s($){const C=new Float64Array(16);if($)for(let R=0;R<$.length;R++)C[R]=$[R];return C}const c=new Uint8Array(32);c[0]=9;const l=s(),p=s([1]),_=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),y=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),O=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),F=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M($,C){for(let R=0;R<16;R++)$[R]=C[R]|0}function D($){let C=1;for(let R=0;R<16;R++){let h=$[R]+C+65535;C=Math.floor(h/65536),$[R]=h-C*65536}$[0]+=C-1+37*(C-1)}function K($,C,R){const h=~(R-1);for(let E=0;E<16;E++){const ee=h&($[E]^C[E]);$[E]^=ee,C[E]^=ee}}function ie($,C){const R=s(),h=s();for(let E=0;E<16;E++)h[E]=C[E];D(h),D(h),D(h);for(let E=0;E<2;E++){R[0]=h[0]-65517;for(let fe=1;fe<15;fe++)R[fe]=h[fe]-65535-(R[fe-1]>>16&1),R[fe-1]&=65535;R[15]=h[15]-32767-(R[14]>>16&1);const ee=R[15]>>16&1;R[14]&=65535,K(h,R,1-ee)}for(let E=0;E<16;E++)$[2*E]=h[E]&255,$[2*E+1]=h[E]>>8}function Ee($,C){let R=0;for(let h=0;h<32;h++)R|=$[h]^C[h];return(1&R-1>>>8)-1}function ge($,C){const R=new Uint8Array(32),h=new Uint8Array(32);return ie(R,$),ie(h,C),Ee(R,h)}function pe($){const C=new Uint8Array(32);return ie(C,$),C[0]&1}function he($,C){for(let R=0;R<16;R++)$[R]=C[2*R]+(C[2*R+1]<<8);$[15]&=32767}function le($,C,R){for(let h=0;h<16;h++)$[h]=C[h]+R[h]}function N($,C,R){for(let h=0;h<16;h++)$[h]=C[h]-R[h]}function U($,C,R){let h,E,ee=0,fe=0,we=0,$e=0,Le=0,Pe=0,St=0,_t=0,at=0,Fe=0,Xe=0,Ze=0,ct=0,Ue=0,et=0,Ne=0,Ve=0,lt=0,qe=0,Pt=0,Dt=0,Ut=0,Ht=0,qt=0,Wt=0,rr=0,qr=0,Jt=0,Vr=0,hi=0,Pi=0,ft=R[0],it=R[1],pt=R[2],dt=R[3],ut=R[4],nt=R[5],Ot=R[6],Rt=R[7],gt=R[8],At=R[9],yt=R[10],wt=R[11],vt=R[12],Ye=R[13],Tt=R[14],Ct=R[15];h=C[0],ee+=h*ft,fe+=h*it,we+=h*pt,$e+=h*dt,Le+=h*ut,Pe+=h*nt,St+=h*Ot,_t+=h*Rt,at+=h*gt,Fe+=h*At,Xe+=h*yt,Ze+=h*wt,ct+=h*vt,Ue+=h*Ye,et+=h*Tt,Ne+=h*Ct,h=C[1],fe+=h*ft,we+=h*it,$e+=h*pt,Le+=h*dt,Pe+=h*ut,St+=h*nt,_t+=h*Ot,at+=h*Rt,Fe+=h*gt,Xe+=h*At,Ze+=h*yt,ct+=h*wt,Ue+=h*vt,et+=h*Ye,Ne+=h*Tt,Ve+=h*Ct,h=C[2],we+=h*ft,$e+=h*it,Le+=h*pt,Pe+=h*dt,St+=h*ut,_t+=h*nt,at+=h*Ot,Fe+=h*Rt,Xe+=h*gt,Ze+=h*At,ct+=h*yt,Ue+=h*wt,et+=h*vt,Ne+=h*Ye,Ve+=h*Tt,lt+=h*Ct,h=C[3],$e+=h*ft,Le+=h*it,Pe+=h*pt,St+=h*dt,_t+=h*ut,at+=h*nt,Fe+=h*Ot,Xe+=h*Rt,Ze+=h*gt,ct+=h*At,Ue+=h*yt,et+=h*wt,Ne+=h*vt,Ve+=h*Ye,lt+=h*Tt,qe+=h*Ct,h=C[4],Le+=h*ft,Pe+=h*it,St+=h*pt,_t+=h*dt,at+=h*ut,Fe+=h*nt,Xe+=h*Ot,Ze+=h*Rt,ct+=h*gt,Ue+=h*At,et+=h*yt,Ne+=h*wt,Ve+=h*vt,lt+=h*Ye,qe+=h*Tt,Pt+=h*Ct,h=C[5],Pe+=h*ft,St+=h*it,_t+=h*pt,at+=h*dt,Fe+=h*ut,Xe+=h*nt,Ze+=h*Ot,ct+=h*Rt,Ue+=h*gt,et+=h*At,Ne+=h*yt,Ve+=h*wt,lt+=h*vt,qe+=h*Ye,Pt+=h*Tt,Dt+=h*Ct,h=C[6],St+=h*ft,_t+=h*it,at+=h*pt,Fe+=h*dt,Xe+=h*ut,Ze+=h*nt,ct+=h*Ot,Ue+=h*Rt,et+=h*gt,Ne+=h*At,Ve+=h*yt,lt+=h*wt,qe+=h*vt,Pt+=h*Ye,Dt+=h*Tt,Ut+=h*Ct,h=C[7],_t+=h*ft,at+=h*it,Fe+=h*pt,Xe+=h*dt,Ze+=h*ut,ct+=h*nt,Ue+=h*Ot,et+=h*Rt,Ne+=h*gt,Ve+=h*At,lt+=h*yt,qe+=h*wt,Pt+=h*vt,Dt+=h*Ye,Ut+=h*Tt,Ht+=h*Ct,h=C[8],at+=h*ft,Fe+=h*it,Xe+=h*pt,Ze+=h*dt,ct+=h*ut,Ue+=h*nt,et+=h*Ot,Ne+=h*Rt,Ve+=h*gt,lt+=h*At,qe+=h*yt,Pt+=h*wt,Dt+=h*vt,Ut+=h*Ye,Ht+=h*Tt,qt+=h*Ct,h=C[9],Fe+=h*ft,Xe+=h*it,Ze+=h*pt,ct+=h*dt,Ue+=h*ut,et+=h*nt,Ne+=h*Ot,Ve+=h*Rt,lt+=h*gt,qe+=h*At,Pt+=h*yt,Dt+=h*wt,Ut+=h*vt,Ht+=h*Ye,qt+=h*Tt,Wt+=h*Ct,h=C[10],Xe+=h*ft,Ze+=h*it,ct+=h*pt,Ue+=h*dt,et+=h*ut,Ne+=h*nt,Ve+=h*Ot,lt+=h*Rt,qe+=h*gt,Pt+=h*At,Dt+=h*yt,Ut+=h*wt,Ht+=h*vt,qt+=h*Ye,Wt+=h*Tt,rr+=h*Ct,h=C[11],Ze+=h*ft,ct+=h*it,Ue+=h*pt,et+=h*dt,Ne+=h*ut,Ve+=h*nt,lt+=h*Ot,qe+=h*Rt,Pt+=h*gt,Dt+=h*At,Ut+=h*yt,Ht+=h*wt,qt+=h*vt,Wt+=h*Ye,rr+=h*Tt,qr+=h*Ct,h=C[12],ct+=h*ft,Ue+=h*it,et+=h*pt,Ne+=h*dt,Ve+=h*ut,lt+=h*nt,qe+=h*Ot,Pt+=h*Rt,Dt+=h*gt,Ut+=h*At,Ht+=h*yt,qt+=h*wt,Wt+=h*vt,rr+=h*Ye,qr+=h*Tt,Jt+=h*Ct,h=C[13],Ue+=h*ft,et+=h*it,Ne+=h*pt,Ve+=h*dt,lt+=h*ut,qe+=h*nt,Pt+=h*Ot,Dt+=h*Rt,Ut+=h*gt,Ht+=h*At,qt+=h*yt,Wt+=h*wt,rr+=h*vt,qr+=h*Ye,Jt+=h*Tt,Vr+=h*Ct,h=C[14],et+=h*ft,Ne+=h*it,Ve+=h*pt,lt+=h*dt,qe+=h*ut,Pt+=h*nt,Dt+=h*Ot,Ut+=h*Rt,Ht+=h*gt,qt+=h*At,Wt+=h*yt,rr+=h*wt,qr+=h*vt,Jt+=h*Ye,Vr+=h*Tt,hi+=h*Ct,h=C[15],Ne+=h*ft,Ve+=h*it,lt+=h*pt,qe+=h*dt,Pt+=h*ut,Dt+=h*nt,Ut+=h*Ot,Ht+=h*Rt,qt+=h*gt,Wt+=h*At,rr+=h*yt,qr+=h*wt,Jt+=h*vt,Vr+=h*Ye,hi+=h*Tt,Pi+=h*Ct,ee+=38*Ve,fe+=38*lt,we+=38*qe,$e+=38*Pt,Le+=38*Dt,Pe+=38*Ut,St+=38*Ht,_t+=38*qt,at+=38*Wt,Fe+=38*rr,Xe+=38*qr,Ze+=38*Jt,ct+=38*Vr,Ue+=38*hi,et+=38*Pi,E=1,h=ee+E+65535,E=Math.floor(h/65536),ee=h-E*65536,h=fe+E+65535,E=Math.floor(h/65536),fe=h-E*65536,h=we+E+65535,E=Math.floor(h/65536),we=h-E*65536,h=$e+E+65535,E=Math.floor(h/65536),$e=h-E*65536,h=Le+E+65535,E=Math.floor(h/65536),Le=h-E*65536,h=Pe+E+65535,E=Math.floor(h/65536),Pe=h-E*65536,h=St+E+65535,E=Math.floor(h/65536),St=h-E*65536,h=_t+E+65535,E=Math.floor(h/65536),_t=h-E*65536,h=at+E+65535,E=Math.floor(h/65536),at=h-E*65536,h=Fe+E+65535,E=Math.floor(h/65536),Fe=h-E*65536,h=Xe+E+65535,E=Math.floor(h/65536),Xe=h-E*65536,h=Ze+E+65535,E=Math.floor(h/65536),Ze=h-E*65536,h=ct+E+65535,E=Math.floor(h/65536),ct=h-E*65536,h=Ue+E+65535,E=Math.floor(h/65536),Ue=h-E*65536,h=et+E+65535,E=Math.floor(h/65536),et=h-E*65536,h=Ne+E+65535,E=Math.floor(h/65536),Ne=h-E*65536,ee+=E-1+37*(E-1),E=1,h=ee+E+65535,E=Math.floor(h/65536),ee=h-E*65536,h=fe+E+65535,E=Math.floor(h/65536),fe=h-E*65536,h=we+E+65535,E=Math.floor(h/65536),we=h-E*65536,h=$e+E+65535,E=Math.floor(h/65536),$e=h-E*65536,h=Le+E+65535,E=Math.floor(h/65536),Le=h-E*65536,h=Pe+E+65535,E=Math.floor(h/65536),Pe=h-E*65536,h=St+E+65535,E=Math.floor(h/65536),St=h-E*65536,h=_t+E+65535,E=Math.floor(h/65536),_t=h-E*65536,h=at+E+65535,E=Math.floor(h/65536),at=h-E*65536,h=Fe+E+65535,E=Math.floor(h/65536),Fe=h-E*65536,h=Xe+E+65535,E=Math.floor(h/65536),Xe=h-E*65536,h=Ze+E+65535,E=Math.floor(h/65536),Ze=h-E*65536,h=ct+E+65535,E=Math.floor(h/65536),ct=h-E*65536,h=Ue+E+65535,E=Math.floor(h/65536),Ue=h-E*65536,h=et+E+65535,E=Math.floor(h/65536),et=h-E*65536,h=Ne+E+65535,E=Math.floor(h/65536),Ne=h-E*65536,ee+=E-1+37*(E-1),$[0]=ee,$[1]=fe,$[2]=we,$[3]=$e,$[4]=Le,$[5]=Pe,$[6]=St,$[7]=_t,$[8]=at,$[9]=Fe,$[10]=Xe,$[11]=Ze,$[12]=ct,$[13]=Ue,$[14]=et,$[15]=Ne}function W($,C){U($,C,C)}function ye($,C){const R=s();let h;for(h=0;h<16;h++)R[h]=C[h];for(h=253;h>=0;h--)W(R,R),h!==2&&h!==4&&U(R,R,C);for(h=0;h<16;h++)$[h]=R[h]}function re($,C){const R=s();let h;for(h=0;h<16;h++)R[h]=C[h];for(h=250;h>=0;h--)W(R,R),h!==1&&U(R,R,C);for(h=0;h<16;h++)$[h]=R[h]}function ue($,C){const R=s(),h=s(),E=s(),ee=s(),fe=s(),we=s(),$e=s(),Le=s(),Pe=s();N(R,$[1],$[0]),N(Pe,C[1],C[0]),U(R,R,Pe),le(h,$[0],$[1]),le(Pe,C[0],C[1]),U(h,h,Pe),U(E,$[3],C[3]),U(E,E,y),U(ee,$[2],C[2]),le(ee,ee,ee),N(fe,h,R),N(we,ee,E),le($e,ee,E),le(Le,h,R),U($[0],fe,we),U($[1],Le,$e),U($[2],$e,we),U($[3],fe,Le)}function Ce($,C,R){for(let h=0;h<4;h++)K($[h],C[h],R)}function ze($,C){const R=s(),h=s(),E=s();ye(E,C[2]),U(R,C[0],E),U(h,C[1],E),ie($,h),$[31]^=pe(R)<<7}function m($,C,R){M($[0],l),M($[1],p),M($[2],p),M($[3],l);for(let h=255;h>=0;--h){const E=R[h/8|0]>>(h&7)&1;Ce($,C,E),ue(C,$),ue($,$),Ce($,C,E)}}function x($,C){const R=[s(),s(),s(),s()];M(R[0],O),M(R[1],F),M(R[2],p),U(R[3],O,F),m($,R,C)}function Y($){if($.length!==o.SEED_LENGTH)throw new Error(`ed25519: seed must be ${o.SEED_LENGTH} bytes`);const C=(0,t.hash)($);C[0]&=248,C[31]&=127,C[31]|=64;const R=new Uint8Array(32),h=[s(),s(),s(),s()];x(h,C),ze(R,h);const E=new Uint8Array(64);return E.set($),E.set(R,32),{publicKey:R,secretKey:E}}o.generateKeyPairFromSeed=Y;function ce($){const C=(0,r.randomBytes)(32,$),R=Y(C);return(0,n.wipe)(C),R}o.generateKeyPair=ce;function V($){if($.length!==o.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${o.SECRET_KEY_LENGTH} bytes`);return new Uint8Array($.subarray(32))}o.extractPublicKeyFromSecretKey=V;const H=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k($,C){let R,h,E,ee;for(h=63;h>=32;--h){for(R=0,E=h-32,ee=h-12;E<ee;++E)C[E]+=R-16*C[h]*H[E-(h-32)],R=Math.floor((C[E]+128)/256),C[E]-=R*256;C[E]+=R,C[h]=0}for(R=0,E=0;E<32;E++)C[E]+=R-(C[31]>>4)*H[E],R=C[E]>>8,C[E]&=255;for(E=0;E<32;E++)C[E]-=R*H[E];for(h=0;h<32;h++)C[h+1]+=C[h]>>8,$[h]=C[h]&255}function G($){const C=new Float64Array(64);for(let R=0;R<64;R++)C[R]=$[R];for(let R=0;R<64;R++)$[R]=0;k($,C)}function Qe($,C){const R=new Float64Array(64),h=[s(),s(),s(),s()],E=(0,t.hash)($.subarray(0,32));E[0]&=248,E[31]&=127,E[31]|=64;const ee=new Uint8Array(64);ee.set(E.subarray(32),32);const fe=new t.SHA512;fe.update(ee.subarray(32)),fe.update(C);const we=fe.digest();fe.clean(),G(we),x(h,we),ze(ee,h),fe.reset(),fe.update(ee.subarray(0,32)),fe.update($.subarray(32)),fe.update(C);const $e=fe.digest();G($e);for(let Le=0;Le<32;Le++)R[Le]=we[Le];for(let Le=0;Le<32;Le++)for(let Pe=0;Pe<32;Pe++)R[Le+Pe]+=$e[Le]*E[Pe];return k(ee.subarray(32),R),ee}o.sign=Qe;function ke($,C){const R=s(),h=s(),E=s(),ee=s(),fe=s(),we=s(),$e=s();return M($[2],p),he($[1],C),W(E,$[1]),U(ee,E,_),N(E,E,$[2]),le(ee,$[2],ee),W(fe,ee),W(we,fe),U($e,we,fe),U(R,$e,E),U(R,R,ee),re(R,R),U(R,R,E),U(R,R,ee),U(R,R,ee),U($[0],R,ee),W(h,$[0]),U(h,h,ee),ge(h,E)&&U($[0],$[0],A),W(h,$[0]),U(h,h,ee),ge(h,E)?-1:(pe($[0])===C[31]>>7&&N($[0],l,$[0]),U($[3],$[0],$[1]),0)}function jr($,C,R){const h=new Uint8Array(32),E=[s(),s(),s(),s()],ee=[s(),s(),s(),s()];if(R.length!==o.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${o.SIGNATURE_LENGTH} bytes`);if(ke(ee,$))return!1;const fe=new t.SHA512;fe.update(R.subarray(0,32)),fe.update($),fe.update(C);const we=fe.digest();return G(we),m(E,ee,we),x(ee,R.subarray(32)),ue(E,ee),ze(h,E),!Ee(R,h)}o.verify=jr;function xe($){let C=[s(),s(),s(),s()];if(ke(C,$))throw new Error("Ed25519: invalid public key");let R=s(),h=s(),E=C[1];le(R,p,E),N(h,p,E),ye(h,h),U(R,R,h);let ee=new Uint8Array(32);return ie(ee,R),ee}o.convertPublicKeyToX25519=xe;function It($){const C=(0,t.hash)($.subarray(0,32));C[0]&=248,C[31]&=127,C[31]|=64;const R=new Uint8Array(C.subarray(0,32));return(0,n.wipe)(C),R}o.convertSecretKeyToX25519=It})(Hc);const _w="EdDSA",ww="JWT",Lf=".",Df="base64url",bw="utf8",Ew="utf8",xw=":",Iw="did",Sw="key",ml="base58btc",Pw="z",Ow="K36",Rw=32;function wo(o){return xo(qc(rs(o),bw),Df)}function Ff(o){const r=qc(Ow,ml),t=Pw+xo(Vm([r,o]),ml);return[Iw,Sw,t].join(xw)}function Aw(o){return xo(o,Df)}function Tw(o){return qc([wo(o.header),wo(o.payload)].join(Lf),Ew)}function Cw(o){return[wo(o.header),wo(o.payload),Aw(o.signature)].join(Lf)}function _l(o=hf.randomBytes(Rw)){return Hc.generateKeyPairFromSeed(o)}async function $w(o,r,t,n,s=ne.fromMiliseconds(Date.now())){const c={alg:_w,typ:ww},l=Ff(n.publicKey),p=s+t,_={iss:l,sub:o,aud:r,iat:s,exp:p},y=Tw({header:c,payload:_}),O=Hc.sign(n.secretKey,y);return Cw({header:c,payload:_,signature:O})}const Nw="PARSE_ERROR",Lw="INVALID_REQUEST",Dw="METHOD_NOT_FOUND",Fw="INVALID_PARAMS",jf="INTERNAL_ERROR",Bc="SERVER_ERROR",jw=[-32700,-32600,-32601,-32602,-32603],Yn={[Nw]:{code:-32700,message:"Parse error"},[Lw]:{code:-32600,message:"Invalid Request"},[Dw]:{code:-32601,message:"Method not found"},[Fw]:{code:-32602,message:"Invalid params"},[jf]:{code:-32603,message:"Internal error"},[Bc]:{code:-32e3,message:"Server error"}},qf=Bc;function qw(o){return jw.includes(o)}function wl(o){return Object.keys(Yn).includes(o)?Yn[o]:Yn[qf]}function Mw(o){const r=Object.values(Yn).find(t=>t.code===o);return r||Yn[qf]}function Mf(o,r,t){return o.message.includes("getaddrinfo ENOTFOUND")||o.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${r}`):o}var zf={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rc=function(o,r){return Rc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},Rc(o,r)};function zw(o,r){Rc(o,r);function t(){this.constructor=o}o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Ac=function(){return Ac=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},Ac.apply(this,arguments)};function Uw(o,r){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function Hw(o,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,r,t,n);else for(var p=o.length-1;p>=0;p--)(l=o[p])&&(c=(s<3?l(c):s>3?l(r,t,c):l(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function Bw(o,r){return function(t,n){r(t,n,o)}}function kw(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function Vw(o,r,t,n){function s(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function p(O){try{y(n.next(O))}catch(F){l(F)}}function _(O){try{y(n.throw(O))}catch(F){l(F)}}function y(O){O.done?c(O.value):s(O.value).then(p,_)}y((n=n.apply(o,r||[])).next())})}function Kw(o,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(y){return function(O){return _([y,O])}}function _(y){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,s=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){t.label=y[1];break}if(y[0]===6&&t.label<c[1]){t.label=c[1],c=y;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(y);break}c[2]&&t.ops.pop(),t.trys.pop();continue}y=r.call(o,t)}catch(O){y=[6,O],s=0}finally{n=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function Gw(o,r,t,n){n===void 0&&(n=t),o[n]=r[t]}function Ww(o,r){for(var t in o)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=o[t])}function Tc(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uf(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),s,c=[],l;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(p){l={error:p}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(l)throw l.error}}return c}function Jw(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(Uf(arguments[r]));return o}function Qw(){for(var o=0,r=0,t=arguments.length;r<t;r++)o+=arguments[r].length;for(var n=Array(o),s=0,r=0;r<t;r++)for(var c=arguments[r],l=0,p=c.length;l<p;l++,s++)n[s]=c[l];return n}function is(o){return this instanceof is?(this.v=o,this):new is(o)}function Yw(o,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,r||[]),s,c=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(A){n[A]&&(s[A]=function(M){return new Promise(function(D,K){c.push([A,M,D,K])>1||p(A,M)})})}function p(A,M){try{_(n[A](M))}catch(D){F(c[0][3],D)}}function _(A){A.value instanceof is?Promise.resolve(A.value.v).then(y,O):F(c[0][2],A)}function y(A){p("next",A)}function O(A){p("throw",A)}function F(A,M){A(M),c.shift(),c.length&&p(c[0][0],c[0][1])}}function Xw(o){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=o[s]?function(l){return(t=!t)?{value:is(o[s](l)),done:s==="return"}:c?c(l):l}:c}}function Zw(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],t;return r?r.call(o):(o=typeof Tc=="function"?Tc(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=o[c]&&function(l){return new Promise(function(p,_){l=o[c](l),s(p,_,l.done,l.value)})}}function s(c,l,p,_){Promise.resolve(_).then(function(y){c({value:y,done:p})},l)}}function eb(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function tb(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var t in o)Object.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r.default=o,r}function rb(o){return o&&o.__esModule?o:{default:o}}function ib(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function nb(o,r,t){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,t),t}const sb=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ac},__asyncDelegator:Xw,__asyncGenerator:Yw,__asyncValues:Zw,__await:is,__awaiter:Vw,__classPrivateFieldGet:ib,__classPrivateFieldSet:nb,__createBinding:Gw,__decorate:Hw,__exportStar:Ww,__extends:zw,__generator:Kw,__importDefault:rb,__importStar:tb,__makeTemplateObject:eb,__metadata:kw,__param:Bw,__read:Uf,__rest:Uw,__spread:Jw,__spreadArrays:Qw,__values:Tc},Symbol.toStringTag,{value:"Module"})),ob=ns(sb);var ii={},bl;function ab(){if(bl)return ii;bl=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.isBrowserCryptoAvailable=ii.getSubtleCrypto=ii.getBrowerCrypto=void 0;function o(){return(hr===null||hr===void 0?void 0:hr.crypto)||(hr===null||hr===void 0?void 0:hr.msCrypto)||{}}ii.getBrowerCrypto=o;function r(){const n=o();return n.subtle||n.webkitSubtle}ii.getSubtleCrypto=r;function t(){return!!o()&&!!r()}return ii.isBrowserCryptoAvailable=t,ii}var ni={},El;function cb(){if(El)return ni;El=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.isBrowser=ni.isNode=ni.isReactNative=void 0;function o(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ni.isReactNative=o;function r(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ni.isNode=r;function t(){return!o()&&!r()}return ni.isBrowser=t,ni}(function(o){Object.defineProperty(o,"__esModule",{value:!0});const r=ob;r.__exportStar(ab(),o),r.__exportStar(cb(),o)})(zf);function kc(o=3){const r=Date.now()*Math.pow(10,o),t=Math.floor(Math.random()*Math.pow(10,o));return r+t}function Hf(o=6){return BigInt(kc(o))}function yn(o,r,t){return{id:t||kc(),jsonrpc:"2.0",method:o,params:r}}function Vc(o,r){return{id:o,jsonrpc:"2.0",result:r}}function Oo(o,r,t){return{id:o,jsonrpc:"2.0",error:ub(r,t)}}function ub(o,r){return typeof o>"u"?wl(jf):(typeof o=="string"&&(o=Object.assign(Object.assign({},wl(Bc)),{message:o})),typeof r<"u"&&(o.data=r),qw(o.code)&&(o=Mw(o.code)),o)}class hb{}class lb extends hb{constructor(){super()}}class fb extends lb{constructor(r){super()}}const pb="^https?:",db="^wss?:";function gb(o){const r=o.match(new RegExp(/^\w+:/,"gi"));if(!(!r||!r.length))return r[0]}function Bf(o,r){const t=gb(o);return typeof t>"u"?!1:new RegExp(r).test(t)}function xl(o){return Bf(o,pb)}function Il(o){return Bf(o,db)}function yb(o){return new RegExp("wss?://localhost(:d{2,5})?").test(o)}function kf(o){return typeof o=="object"&&"id"in o&&"jsonrpc"in o&&o.jsonrpc==="2.0"}function Kc(o){return kf(o)&&"method"in o}function Ro(o){return kf(o)&&(ai(o)||Fr(o))}function ai(o){return"result"in o}function Fr(o){return"error"in o}class ci extends fb{constructor(r){super(r),this.events=new vr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(r),this.connection.connected&&this.registerEventListeners()}async connect(r=this.connection){await this.open(r)}async disconnect(){await this.close()}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async request(r,t){return this.requestStrict(yn(r.method,r.params||[],r.id||Hf().toString()),t)}async requestStrict(r,t){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(c){s(c)}this.events.on(`${r.id}`,c=>{Fr(c)?s(c.error):n(c.result)});try{await this.connection.send(r,t)}catch(c){s(c)}})}setConnection(r=this.connection){return r}onPayload(r){this.events.emit("payload",r),Ro(r)?this.events.emit(`${r.id}`,r):this.events.emit("message",{type:r.method,data:r.params})}onClose(r){r&&r.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${r.code} ${r.reason?`(${r.reason})`:""}`)),this.events.emit("disconnect")}async open(r=this.connection){this.connection===r&&this.connection.connected||(this.connection.connected&&this.close(),typeof r=="string"&&(await this.connection.open(r),r=this.connection),this.connection=this.setConnection(r),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",r=>this.onPayload(r)),this.connection.on("close",r=>this.onClose(r)),this.connection.on("error",r=>this.events.emit("error",r)),this.connection.on("register_error",r=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const vb=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),mb=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Sl=o=>o.split("?")[0],Pl=10,_b=vb();class wb{constructor(r){if(this.url=r,this.events=new vr.EventEmitter,this.registering=!1,!Il(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),r()},this.socket.close()})}async send(r,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(rs(r))}catch(n){this.onError(r.id,n)}}register(r=this.url){if(!Il(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),s(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=r,this.registering=!0,new Promise((t,n)=>{const s=zf.isReactNative()?void 0:{rejectUnauthorized:!yb(r)},c=new _b(r,[],s);mb()?c.onerror=l=>{const p=l;n(this.emitError(p.error))}:c.on("error",l=>{n(this.emitError(l))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(r){r.onmessage=t=>this.onPayload(t),r.onclose=t=>this.onClose(t),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;const t=typeof r.data=="string"?Uc(r.data):r.data;this.events.emit("payload",t)}onError(r,t){const n=this.parseError(t),s=n.message||n.toString(),c=Oo(r,s);this.events.emit("payload",c)}parseError(r,t=this.url){return Mf(r,Sl(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Pl&&this.events.setMaxListeners(Pl)}emitError(r){const t=this.parseError(new Error((r==null?void 0:r.message)||`WebSocket connection failed for host: ${Sl(this.url)}`));return this.events.emit("register_error",t),t}}var bo={exports:{}};bo.exports;(function(o,r){var t=200,n="__lodash_hash_undefined__",s=1,c=2,l=9007199254740991,p="[object Arguments]",_="[object Array]",y="[object AsyncFunction]",O="[object Boolean]",F="[object Date]",A="[object Error]",M="[object Function]",D="[object GeneratorFunction]",K="[object Map]",ie="[object Number]",Ee="[object Null]",ge="[object Object]",pe="[object Promise]",he="[object Proxy]",le="[object RegExp]",N="[object Set]",U="[object String]",W="[object Symbol]",ye="[object Undefined]",re="[object WeakMap]",ue="[object ArrayBuffer]",Ce="[object DataView]",ze="[object Float32Array]",m="[object Float64Array]",x="[object Int8Array]",Y="[object Int16Array]",ce="[object Int32Array]",V="[object Uint8Array]",H="[object Uint8ClampedArray]",k="[object Uint16Array]",G="[object Uint32Array]",Qe=/[\\^$.*+?()[\]{}|]/g,ke=/^\[object .+?Constructor\]$/,jr=/^(?:0|[1-9]\d*)$/,xe={};xe[ze]=xe[m]=xe[x]=xe[Y]=xe[ce]=xe[V]=xe[H]=xe[k]=xe[G]=!0,xe[p]=xe[_]=xe[ue]=xe[O]=xe[Ce]=xe[F]=xe[A]=xe[M]=xe[K]=xe[ie]=xe[ge]=xe[le]=xe[N]=xe[U]=xe[re]=!1;var It=typeof hr=="object"&&hr&&hr.Object===Object&&hr,$=typeof self=="object"&&self&&self.Object===Object&&self,C=It||$||Function("return this")(),R=r&&!r.nodeType&&r,h=R&&!0&&o&&!o.nodeType&&o,E=h&&h.exports===R,ee=E&&It.process,fe=function(){try{return ee&&ee.binding&&ee.binding("util")}catch{}}(),we=fe&&fe.isTypedArray;function $e(v,I){for(var z=-1,Q=v==null?0:v.length,Ge=0,ve=[];++z<Q;){var tt=v[z];I(tt,z,v)&&(ve[Ge++]=tt)}return ve}function Le(v,I){for(var z=-1,Q=I.length,Ge=v.length;++z<Q;)v[Ge+z]=I[z];return v}function Pe(v,I){for(var z=-1,Q=v==null?0:v.length;++z<Q;)if(I(v[z],z,v))return!0;return!1}function St(v,I){for(var z=-1,Q=Array(v);++z<v;)Q[z]=I(z);return Q}function _t(v){return function(I){return v(I)}}function at(v,I){return v.has(I)}function Fe(v,I){return v==null?void 0:v[I]}function Xe(v){var I=-1,z=Array(v.size);return v.forEach(function(Q,Ge){z[++I]=[Ge,Q]}),z}function Ze(v,I){return function(z){return v(I(z))}}function ct(v){var I=-1,z=Array(v.size);return v.forEach(function(Q){z[++I]=Q}),z}var Ue=Array.prototype,et=Function.prototype,Ne=Object.prototype,Ve=C["__core-js_shared__"],lt=et.toString,qe=Ne.hasOwnProperty,Pt=function(){var v=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),Dt=Ne.toString,Ut=RegExp("^"+lt.call(qe).replace(Qe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=E?C.Buffer:void 0,qt=C.Symbol,Wt=C.Uint8Array,rr=Ne.propertyIsEnumerable,qr=Ue.splice,Jt=qt?qt.toStringTag:void 0,Vr=Object.getOwnPropertySymbols,hi=Ht?Ht.isBuffer:void 0,Pi=Ze(Object.keys,Object),ft=lr(C,"DataView"),it=lr(C,"Map"),pt=lr(C,"Promise"),dt=lr(C,"Set"),ut=lr(C,"WeakMap"),nt=lr(Object,"create"),Ot=Gr(ft),Rt=Gr(it),gt=Gr(pt),At=Gr(dt),yt=Gr(ut),wt=qt?qt.prototype:void 0,vt=wt?wt.valueOf:void 0;function Ye(v){var I=-1,z=v==null?0:v.length;for(this.clear();++I<z;){var Q=v[I];this.set(Q[0],Q[1])}}function Tt(){this.__data__=nt?nt(null):{},this.size=0}function Ct(v){var I=this.has(v)&&delete this.__data__[v];return this.size-=I?1:0,I}function Co(v){var I=this.__data__;if(nt){var z=I[v];return z===n?void 0:z}return qe.call(I,v)?I[v]:void 0}function $o(v){var I=this.__data__;return nt?I[v]!==void 0:qe.call(I,v)}function No(v,I){var z=this.__data__;return this.size+=this.has(v)?0:1,z[v]=nt&&I===void 0?n:I,this}Ye.prototype.clear=Tt,Ye.prototype.delete=Ct,Ye.prototype.get=Co,Ye.prototype.has=$o,Ye.prototype.set=No;function mr(v){var I=-1,z=v==null?0:v.length;for(this.clear();++I<z;){var Q=v[I];this.set(Q[0],Q[1])}}function Lo(){this.__data__=[],this.size=0}function Do(v){var I=this.__data__,z=Oi(I,v);if(z<0)return!1;var Q=I.length-1;return z==Q?I.pop():qr.call(I,z,1),--this.size,!0}function Fo(v){var I=this.__data__,z=Oi(I,v);return z<0?void 0:I[z][1]}function jo(v){return Oi(this.__data__,v)>-1}function qo(v,I){var z=this.__data__,Q=Oi(z,v);return Q<0?(++this.size,z.push([v,I])):z[Q][1]=I,this}mr.prototype.clear=Lo,mr.prototype.delete=Do,mr.prototype.get=Fo,mr.prototype.has=jo,mr.prototype.set=qo;function Kr(v){var I=-1,z=v==null?0:v.length;for(this.clear();++I<z;){var Q=v[I];this.set(Q[0],Q[1])}}function ki(){this.size=0,this.__data__={hash:new Ye,map:new(it||mr),string:new Ye}}function Mo(v){var I=li(this,v).delete(v);return this.size-=I?1:0,I}function Vi(v){return li(this,v).get(v)}function zo(v){return li(this,v).has(v)}function Uo(v,I){var z=li(this,v),Q=z.size;return z.set(v,I),this.size+=z.size==Q?0:1,this}Kr.prototype.clear=ki,Kr.prototype.delete=Mo,Kr.prototype.get=Vi,Kr.prototype.has=zo,Kr.prototype.set=Uo;function Ki(v){var I=-1,z=v==null?0:v.length;for(this.__data__=new Kr;++I<z;)this.add(v[I])}function as(v){return this.__data__.set(v,n),this}function cs(v){return this.__data__.has(v)}Ki.prototype.add=Ki.prototype.push=as,Ki.prototype.has=cs;function Rr(v){var I=this.__data__=new mr(v);this.size=I.size}function Ho(){this.__data__=new mr,this.size=0}function Bo(v){var I=this.__data__,z=I.delete(v);return this.size=I.size,z}function ko(v){return this.__data__.get(v)}function Vo(v){return this.__data__.has(v)}function us(v,I){var z=this.__data__;if(z instanceof mr){var Q=z.__data__;if(!it||Q.length<t-1)return Q.push([v,I]),this.size=++z.size,this;z=this.__data__=new Kr(Q)}return z.set(v,I),this.size=z.size,this}Rr.prototype.clear=Ho,Rr.prototype.delete=Bo,Rr.prototype.get=ko,Rr.prototype.has=Vo,Rr.prototype.set=us;function hs(v,I){var z=Ji(v),Q=!z&&Es(v),Ge=!z&&!Q&&bn(v),ve=!z&&!Q&&!Ge&&Ss(v),tt=z||Q||Ge||ve,$t=tt?St(v.length,String):[],Re=$t.length;for(var We in v)(I||qe.call(v,We))&&!(tt&&(We=="length"||Ge&&(We=="offset"||We=="parent")||ve&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||vs(We,Re)))&&$t.push(We);return $t}function Oi(v,I){for(var z=v.length;z--;)if(bs(v[z][0],I))return z;return-1}function _n(v,I,z){var Q=I(v);return Ji(v)?Q:Le(Q,z(v))}function Ri(v){return v==null?v===void 0?ye:Ee:Jt&&Jt in Object(v)?gs(v):Wo(v)}function wn(v){return Ti(v)&&Ri(v)==p}function Ai(v,I,z,Q,Ge){return v===I?!0:v==null||I==null||!Ti(v)&&!Ti(I)?v!==v&&I!==I:ls(v,I,z,Q,Ai,Ge)}function ls(v,I,z,Q,Ge,ve){var tt=Ji(v),$t=Ji(I),Re=tt?_:Mr(v),We=$t?_:Mr(I);Re=Re==p?ge:Re,We=We==p?ge:We;var bt=Re==ge,ir=We==ge,Nt=Re==We;if(Nt&&bn(v)){if(!bn(I))return!1;tt=!0,bt=!1}if(Nt&&!bt)return ve||(ve=new Rr),tt||Ss(v)?Gi(v,I,z,Q,Ge,ve):Go(v,I,Re,z,Q,Ge,ve);if(!(z&s)){var rt=bt&&qe.call(v,"__wrapped__"),Qt=ir&&qe.call(I,"__wrapped__");if(rt||Qt){var Ar=rt?v.value():v,_r=Qt?I.value():I;return ve||(ve=new Rr),Ge(Ar,_r,z,Q,ve)}}return Nt?(ve||(ve=new Rr),ds(v,I,z,Q,Ge,ve)):!1}function Ko(v){if(!Is(v)||_s(v))return!1;var I=Qi(v)?Ut:ke;return I.test(Gr(v))}function fs(v){return Ti(v)&&xs(v.length)&&!!xe[Ri(v)]}function ps(v){if(!ws(v))return Pi(v);var I=[];for(var z in Object(v))qe.call(v,z)&&z!="constructor"&&I.push(z);return I}function Gi(v,I,z,Q,Ge,ve){var tt=z&s,$t=v.length,Re=I.length;if($t!=Re&&!(tt&&Re>$t))return!1;var We=ve.get(v);if(We&&ve.get(I))return We==I;var bt=-1,ir=!0,Nt=z&c?new Ki:void 0;for(ve.set(v,I),ve.set(I,v);++bt<$t;){var rt=v[bt],Qt=I[bt];if(Q)var Ar=tt?Q(Qt,rt,bt,I,v,ve):Q(rt,Qt,bt,v,I,ve);if(Ar!==void 0){if(Ar)continue;ir=!1;break}if(Nt){if(!Pe(I,function(_r,zr){if(!at(Nt,zr)&&(rt===_r||Ge(rt,_r,z,Q,ve)))return Nt.push(zr)})){ir=!1;break}}else if(!(rt===Qt||Ge(rt,Qt,z,Q,ve))){ir=!1;break}}return ve.delete(v),ve.delete(I),ir}function Go(v,I,z,Q,Ge,ve,tt){switch(z){case Ce:if(v.byteLength!=I.byteLength||v.byteOffset!=I.byteOffset)return!1;v=v.buffer,I=I.buffer;case ue:return!(v.byteLength!=I.byteLength||!ve(new Wt(v),new Wt(I)));case O:case F:case ie:return bs(+v,+I);case A:return v.name==I.name&&v.message==I.message;case le:case U:return v==I+"";case K:var $t=Xe;case N:var Re=Q&s;if($t||($t=ct),v.size!=I.size&&!Re)return!1;var We=tt.get(v);if(We)return We==I;Q|=c,tt.set(v,I);var bt=Gi($t(v),$t(I),Q,Ge,ve,tt);return tt.delete(v),bt;case W:if(vt)return vt.call(v)==vt.call(I)}return!1}function ds(v,I,z,Q,Ge,ve){var tt=z&s,$t=Wi(v),Re=$t.length,We=Wi(I),bt=We.length;if(Re!=bt&&!tt)return!1;for(var ir=Re;ir--;){var Nt=$t[ir];if(!(tt?Nt in I:qe.call(I,Nt)))return!1}var rt=ve.get(v);if(rt&&ve.get(I))return rt==I;var Qt=!0;ve.set(v,I),ve.set(I,v);for(var Ar=tt;++ir<Re;){Nt=$t[ir];var _r=v[Nt],zr=I[Nt];if(Q)var En=tt?Q(zr,_r,Nt,I,v,ve):Q(_r,zr,Nt,v,I,ve);if(!(En===void 0?_r===zr||Ge(_r,zr,z,Q,ve):En)){Qt=!1;break}Ar||(Ar=Nt=="constructor")}if(Qt&&!Ar){var Ci=v.constructor,Mt=I.constructor;Ci!=Mt&&"constructor"in v&&"constructor"in I&&!(typeof Ci=="function"&&Ci instanceof Ci&&typeof Mt=="function"&&Mt instanceof Mt)&&(Qt=!1)}return ve.delete(v),ve.delete(I),Qt}function Wi(v){return _n(v,Yo,ys)}function li(v,I){var z=v.__data__;return ms(I)?z[typeof I=="string"?"string":"hash"]:z.map}function lr(v,I){var z=Fe(v,I);return Ko(z)?z:void 0}function gs(v){var I=qe.call(v,Jt),z=v[Jt];try{v[Jt]=void 0;var Q=!0}catch{}var Ge=Dt.call(v);return Q&&(I?v[Jt]=z:delete v[Jt]),Ge}var ys=Vr?function(v){return v==null?[]:(v=Object(v),$e(Vr(v),function(I){return rr.call(v,I)}))}:Ke,Mr=Ri;(ft&&Mr(new ft(new ArrayBuffer(1)))!=Ce||it&&Mr(new it)!=K||pt&&Mr(pt.resolve())!=pe||dt&&Mr(new dt)!=N||ut&&Mr(new ut)!=re)&&(Mr=function(v){var I=Ri(v),z=I==ge?v.constructor:void 0,Q=z?Gr(z):"";if(Q)switch(Q){case Ot:return Ce;case Rt:return K;case gt:return pe;case At:return N;case yt:return re}return I});function vs(v,I){return I=I??l,!!I&&(typeof v=="number"||jr.test(v))&&v>-1&&v%1==0&&v<I}function ms(v){var I=typeof v;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?v!=="__proto__":v===null}function _s(v){return!!Pt&&Pt in v}function ws(v){var I=v&&v.constructor,z=typeof I=="function"&&I.prototype||Ne;return v===z}function Wo(v){return Dt.call(v)}function Gr(v){if(v!=null){try{return lt.call(v)}catch{}try{return v+""}catch{}}return""}function bs(v,I){return v===I||v!==v&&I!==I}var Es=wn(function(){return arguments}())?wn:function(v){return Ti(v)&&qe.call(v,"callee")&&!rr.call(v,"callee")},Ji=Array.isArray;function Jo(v){return v!=null&&xs(v.length)&&!Qi(v)}var bn=hi||He;function Qo(v,I){return Ai(v,I)}function Qi(v){if(!Is(v))return!1;var I=Ri(v);return I==M||I==D||I==y||I==he}function xs(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=l}function Is(v){var I=typeof v;return v!=null&&(I=="object"||I=="function")}function Ti(v){return v!=null&&typeof v=="object"}var Ss=we?_t(we):fs;function Yo(v){return Jo(v)?hs(v):ps(v)}function Ke(){return[]}function He(){return!1}o.exports=Qo})(bo,bo.exports);var bb=bo.exports;const Eb=jc(bb);function xb(o,r){if(o.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<o.length;s++){var c=o.charAt(s),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=s}var p=o.length,_=o.charAt(0),y=Math.log(p)/Math.log(256),O=Math.log(256)/Math.log(p);function F(D){if(D instanceof Uint8Array||(ArrayBuffer.isView(D)?D=new Uint8Array(D.buffer,D.byteOffset,D.byteLength):Array.isArray(D)&&(D=Uint8Array.from(D))),!(D instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(D.length===0)return"";for(var K=0,ie=0,Ee=0,ge=D.length;Ee!==ge&&D[Ee]===0;)Ee++,K++;for(var pe=(ge-Ee)*O+1>>>0,he=new Uint8Array(pe);Ee!==ge;){for(var le=D[Ee],N=0,U=pe-1;(le!==0||N<ie)&&U!==-1;U--,N++)le+=256*he[U]>>>0,he[U]=le%p>>>0,le=le/p>>>0;if(le!==0)throw new Error("Non-zero carry");ie=N,Ee++}for(var W=pe-ie;W!==pe&&he[W]===0;)W++;for(var ye=_.repeat(K);W<pe;++W)ye+=o.charAt(he[W]);return ye}function A(D){if(typeof D!="string")throw new TypeError("Expected String");if(D.length===0)return new Uint8Array;var K=0;if(D[K]!==" "){for(var ie=0,Ee=0;D[K]===_;)ie++,K++;for(var ge=(D.length-K)*y+1>>>0,pe=new Uint8Array(ge);D[K];){var he=t[D.charCodeAt(K)];if(he===255)return;for(var le=0,N=ge-1;(he!==0||le<Ee)&&N!==-1;N--,le++)he+=p*pe[N]>>>0,pe[N]=he%256>>>0,he=he/256>>>0;if(he!==0)throw new Error("Non-zero carry");Ee=le,K++}if(D[K]!==" "){for(var U=ge-Ee;U!==ge&&pe[U]===0;)U++;for(var W=new Uint8Array(ie+(ge-U)),ye=ie;U!==ge;)W[ye++]=pe[U++];return W}}}function M(D){var K=A(D);if(K)return K;throw new Error(`Non-${r} character`)}return{encode:F,decodeUnsafe:A,decode:M}}var Ib=xb,Sb=Ib;const Vf=o=>{if(o instanceof Uint8Array&&o.constructor.name==="Uint8Array")return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o))return new Uint8Array(o.buffer,o.byteOffset,o.byteLength);throw new Error("Unknown type, must be binary type")},Pb=o=>new TextEncoder().encode(o),Ob=o=>new TextDecoder().decode(o);class Rb{constructor(r,t,n){this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class Ab{constructor(r,t,n){if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return Kf(this,r)}}class Tb{constructor(r){this.decoders=r}or(r){return Kf(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Kf=(o,r)=>new Tb({...o.decoders||{[o.prefix]:o},...r.decoders||{[r.prefix]:r}});class Cb{constructor(r,t,n,s){this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new Rb(r,t,n),this.decoder=new Ab(r,t,s)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}const Ao=({name:o,prefix:r,encode:t,decode:n})=>new Cb(o,r,t,n),os=({prefix:o,name:r,alphabet:t})=>{const{encode:n,decode:s}=Sb(t,r);return Ao({prefix:o,name:r,encode:n,decode:c=>Vf(s(c))})},$b=(o,r,t,n)=>{const s={};for(let O=0;O<r.length;++O)s[r[O]]=O;let c=o.length;for(;o[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let p=0,_=0,y=0;for(let O=0;O<c;++O){const F=s[o[O]];if(F===void 0)throw new SyntaxError(`Non-${n} character`);_=_<<t|F,p+=t,p>=8&&(p-=8,l[y++]=255&_>>p)}if(p>=t||255&_<<8-p)throw new SyntaxError("Unexpected end of data");return l},Nb=(o,r,t)=>{const n=r[r.length-1]==="=",s=(1<<t)-1;let c="",l=0,p=0;for(let _=0;_<o.length;++_)for(p=p<<8|o[_],l+=8;l>t;)l-=t,c+=r[s&p>>l];if(l&&(c+=r[s&p<<t-l]),n)for(;c.length*t&7;)c+="=";return c},kt=({name:o,prefix:r,bitsPerChar:t,alphabet:n})=>Ao({prefix:r,name:o,encode(s){return Nb(s,n,t)},decode(s){return $b(s,n,t,o)}}),Lb=Ao({prefix:"\0",name:"identity",encode:o=>Ob(o),decode:o=>Pb(o)});var Db=Object.freeze({__proto__:null,identity:Lb});const Fb=kt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var jb=Object.freeze({__proto__:null,base2:Fb});const qb=kt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Mb=Object.freeze({__proto__:null,base8:qb});const zb=os({prefix:"9",name:"base10",alphabet:"0123456789"});var Ub=Object.freeze({__proto__:null,base10:zb});const Hb=kt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Bb=kt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var kb=Object.freeze({__proto__:null,base16:Hb,base16upper:Bb});const Vb=kt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Kb=kt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gb=kt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Wb=kt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Jb=kt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qb=kt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yb=kt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xb=kt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Zb=kt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eE=Object.freeze({__proto__:null,base32:Vb,base32upper:Kb,base32pad:Gb,base32padupper:Wb,base32hex:Jb,base32hexupper:Qb,base32hexpad:Yb,base32hexpadupper:Xb,base32z:Zb});const tE=os({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rE=os({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var iE=Object.freeze({__proto__:null,base36:tE,base36upper:rE});const nE=os({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sE=os({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var oE=Object.freeze({__proto__:null,base58btc:nE,base58flickr:sE});const aE=kt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cE=kt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uE=kt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hE=kt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var lE=Object.freeze({__proto__:null,base64:aE,base64pad:cE,base64url:uE,base64urlpad:hE});const Gf=Array.from(""),fE=Gf.reduce((o,r,t)=>(o[t]=r,o),[]),pE=Gf.reduce((o,r,t)=>(o[r.codePointAt(0)]=t,o),[]);function dE(o){return o.reduce((r,t)=>(r+=fE[t],r),"")}function gE(o){const r=[];for(const t of o){const n=pE[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);r.push(n)}return new Uint8Array(r)}const yE=Ao({prefix:"",name:"base256emoji",encode:dE,decode:gE});var vE=Object.freeze({__proto__:null,base256emoji:yE}),mE=Wf,Ol=128,_E=127,wE=~_E,bE=Math.pow(2,31);function Wf(o,r,t){r=r||[],t=t||0;for(var n=t;o>=bE;)r[t++]=o&255|Ol,o/=128;for(;o&wE;)r[t++]=o&255|Ol,o>>>=7;return r[t]=o|0,Wf.bytes=t-n+1,r}var EE=Cc,xE=128,Rl=127;function Cc(o,n){var t=0,n=n||0,s=0,c=n,l,p=o.length;do{if(c>=p)throw Cc.bytes=0,new RangeError("Could not decode varint");l=o[c++],t+=s<28?(l&Rl)<<s:(l&Rl)*Math.pow(2,s),s+=7}while(l>=xE);return Cc.bytes=c-n,t}var IE=Math.pow(2,7),SE=Math.pow(2,14),PE=Math.pow(2,21),OE=Math.pow(2,28),RE=Math.pow(2,35),AE=Math.pow(2,42),TE=Math.pow(2,49),CE=Math.pow(2,56),$E=Math.pow(2,63),NE=function(o){return o<IE?1:o<SE?2:o<PE?3:o<OE?4:o<RE?5:o<AE?6:o<TE?7:o<CE?8:o<$E?9:10},LE={encode:mE,decode:EE,encodingLength:NE},Jf=LE;const Al=(o,r,t=0)=>(Jf.encode(o,r,t),r),Tl=o=>Jf.encodingLength(o),$c=(o,r)=>{const t=r.byteLength,n=Tl(o),s=n+Tl(t),c=new Uint8Array(s+t);return Al(o,c,0),Al(t,c,n),c.set(r,s),new DE(o,t,r,c)};class DE{constructor(r,t,n,s){this.code=r,this.size=t,this.digest=n,this.bytes=s}}const Qf=({name:o,code:r,encode:t})=>new FE(o,r,t);class FE{constructor(r,t,n){this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){const t=this.encode(r);return t instanceof Uint8Array?$c(this.code,t):t.then(n=>$c(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Yf=o=>async r=>new Uint8Array(await crypto.subtle.digest(o,r)),jE=Qf({name:"sha2-256",code:18,encode:Yf("SHA-256")}),qE=Qf({name:"sha2-512",code:19,encode:Yf("SHA-512")});var ME=Object.freeze({__proto__:null,sha256:jE,sha512:qE});const Xf=0,zE="identity",Zf=Vf,UE=o=>$c(Xf,Zf(o)),HE={code:Xf,name:zE,encode:Zf,digest:UE};var BE=Object.freeze({__proto__:null,identity:HE});new TextEncoder,new TextDecoder;const Cl={...Db,...jb,...Mb,...Ub,...kb,...eE,...iE,...oE,...lE,...vE};({...ME,...BE});function ep(o){return globalThis.Buffer!=null?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o}function kE(o=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ep(globalThis.Buffer.allocUnsafe(o)):new Uint8Array(o)}function tp(o,r,t,n){return{name:o,prefix:r,encoder:{name:o,prefix:r,encode:t},decoder:{decode:n}}}const $l=tp("utf8","u",o=>"u"+new TextDecoder("utf8").decode(o),o=>new TextEncoder().encode(o.substring(1))),cc=tp("ascii","a",o=>{let r="a";for(let t=0;t<o.length;t++)r+=String.fromCharCode(o[t]);return r},o=>{o=o.substring(1);const r=kE(o.length);for(let t=0;t<o.length;t++)r[t]=o.charCodeAt(t);return r}),VE={utf8:$l,"utf-8":$l,hex:Cl.base16,latin1:cc,ascii:cc,binary:cc,...Cl};function KE(o,r="utf8"){const t=VE[r];if(!t)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ep(globalThis.Buffer.from(o,"utf-8")):t.decoder.decode(`${t.prefix}${o}`)}const rp="wc",GE=2,Gc="core",xi=`${rp}@2:${Gc}:`,WE={name:Gc,logger:"error"},JE={database:":memory:"},QE="crypto",Nl="client_ed25519_seed",YE=ne.ONE_DAY,XE="keychain",ZE="0.3",ex="messages",tx="0.3",rx=ne.SIX_HOURS,ix="publisher",ip="irn",nx="error",np="wss://relay.walletconnect.com",Ll="wss://relay.walletconnect.org",sx="relayer",Gt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ox="_subscription",si={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},ax=ne.ONE_SECOND,cx="2.10.2",ux=1e4,hx="0.3",lx="WALLETCONNECT_CLIENT_ID",Lr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},fx="subscription",px="0.3",dx=ne.FIVE_SECONDS*1e3,gx="pairing",yx="0.3",Bn={wc_pairingDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:0},res:{ttl:ne.ONE_DAY,prompt:!1,tag:0}}},Jn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},kr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},vx="history",mx="0.3",_x="expirer",Or={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},wx="0.3",uc="verify-api",_o="https://verify.walletconnect.com",Dl="https://verify.walletconnect.org";class bx{constructor(r,t){this.core=r,this.logger=t,this.keychain=new Map,this.name=XE,this.version=ZE,this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()},this.get=n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:c}=Z("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(c)}return s},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=r,this.logger=Te.generateChildLogger(t,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(r){await this.core.storage.setItem(this.storageKey,df(r))}async getKeyChain(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?gf(r):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Ex{constructor(r,t,n){this.core=r,this.logger=t,this.name=QE,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),c=_l(s);return Ff(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=Wm();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const c=await this.getClientSeed(),l=_l(c),p=vc();return await $w(p,s,YE,l)},this.generateSharedKey=(s,c,l)=>{this.isInitialized();const p=this.getPrivateKey(s),_=Jm(p,c);return this.setSymKey(_,l)},this.setSymKey=async(s,c)=>{this.isInitialized();const l=c||Qm(s);return await this.keychain.set(l,s),l},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,c,l)=>{this.isInitialized();const p=Ym(l),_=rs(c);if(Yh(p)){const A=p.senderPublicKey,M=p.receiverPublicKey;s=await this.generateSharedKey(A,M)}const y=this.getSymKey(s),{type:O,senderPublicKey:F}=p;return Xm({type:O,symKey:y,message:_,senderPublicKey:F})},this.decode=async(s,c,l)=>{this.isInitialized();const p=Zm(c,l);if(Yh(p)){const _=p.receiverPublicKey,y=p.senderPublicKey;s=await this.generateSharedKey(_,y)}try{const _=this.getSymKey(s),y=e_({symKey:_,encoded:c});return Uc(y)}catch(_){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(_)}},this.getPayloadType=s=>{const c=Xh(s);return t_(c.type)},this.getPayloadSenderPublicKey=s=>{const c=Xh(s);return c.senderPublicKey?xo(c.senderPublicKey,r_):void 0},this.core=r,this.logger=Te.generateChildLogger(t,this.name),this.keychain=n||new bx(this.core,this.logger)}get context(){return Te.getLoggerContext(this.logger)}async setPrivateKey(r,t){return await this.keychain.set(r,t),r}getPrivateKey(r){return this.keychain.get(r)}async getClientSeed(){let r="";try{r=this.keychain.get(Nl)}catch{r=vc(),await this.keychain.set(Nl,r)}return KE(r,"base16")}getSymKey(r){return this.keychain.get(r)}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}}class xx extends cw{constructor(r,t){super(r,t),this.logger=r,this.core=t,this.messages=new Map,this.name=ex,this.version=tx,this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,s)=>{this.isInitialized();const c=dn(s);let l=this.messages.get(n);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=s,this.messages.set(n,l),await this.persist()),c},this.get=n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s},this.has=(n,s)=>{this.isInitialized();const c=this.get(n),l=dn(s);return typeof c[l]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Te.generateChildLogger(r,this.name),this.core=t}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(r){await this.core.storage.setItem(this.storageKey,df(r))}async getRelayerMessages(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?gf(r):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Ix extends uw{constructor(r,t){super(r,t),this.relayer=r,this.logger=t,this.events=new vr.EventEmitter,this.name=ix,this.queue=new Map,this.publishTimeout=ne.toMiliseconds(ne.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,s,c)=>{var l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:c}});try{const p=(c==null?void 0:c.ttl)||rx,_=mc(c),y=(c==null?void 0:c.prompt)||!1,O=(c==null?void 0:c.tag)||0,F=(c==null?void 0:c.id)||Hf().toString(),A={topic:n,message:s,opts:{ttl:p,relay:_,prompt:y,tag:O,id:F}},M=setTimeout(()=>this.queue.set(F,A),this.publishTimeout);try{await await Xn(this.rpcPublish(n,s,p,_,y,O,F),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(F),this.relayer.events.emit(Gt.publish,A)}catch(D){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(l=c==null?void 0:c.internal)!=null&&l.throwOnFailedPublish)throw this.removeRequestFromQueue(F),D;return}finally{clearTimeout(M)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:c}})}catch(p){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(p),p}},this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.relayer=r,this.logger=Te.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Te.getLoggerContext(this.logger)}rpcPublish(r,t,n,s,c,l,p){var _,y,O,F;const A={method:yo(s.protocol).publish,params:{topic:r,message:t,ttl:n,prompt:c,tag:l},id:p};return Ei((_=A.params)==null?void 0:_.prompt)&&((y=A.params)==null||delete y.prompt),Ei((O=A.params)==null?void 0:O.tag)&&((F=A.params)==null||delete F.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:A}),this.relayer.request(A)}removeRequestFromQueue(r){this.queue.delete(r)}checkQueue(){this.queue.forEach(async r=>{const{topic:t,message:n,opts:s}=r;await this.publish(t,n,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(mn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Gt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Gt.message_ack,r=>{this.removeRequestFromQueue(r.id.toString())})}}class Sx{constructor(){this.map=new Map,this.set=(r,t)=>{const n=this.get(r);this.exists(r,t)||this.map.set(r,[...n,t])},this.get=r=>this.map.get(r)||[],this.exists=(r,t)=>this.get(r).includes(t),this.delete=(r,t)=>{if(typeof t>"u"){this.map.delete(r);return}if(!this.map.has(r))return;const n=this.get(r);if(!this.exists(r,t))return;const s=n.filter(c=>c!==t);if(!s.length){this.map.delete(r);return}this.map.set(r,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Px=Object.defineProperty,Ox=Object.defineProperties,Rx=Object.getOwnPropertyDescriptors,Fl=Object.getOwnPropertySymbols,Ax=Object.prototype.hasOwnProperty,Tx=Object.prototype.propertyIsEnumerable,jl=(o,r,t)=>r in o?Px(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,kn=(o,r)=>{for(var t in r||(r={}))Ax.call(r,t)&&jl(o,t,r[t]);if(Fl)for(var t of Fl(r))Tx.call(r,t)&&jl(o,t,r[t]);return o},hc=(o,r)=>Ox(o,Rx(r));class Cx extends fw{constructor(r,t){super(r,t),this.relayer=r,this.logger=t,this.subscriptions=new Map,this.topicMap=new Sx,this.events=new vr.EventEmitter,this.name=fx,this.version=px,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=xi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const c=mc(s),l={topic:n,relay:c};this.pending.set(n,l);const p=await this.rpcSubscribe(n,c);return this.onSubscribe(p,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}}),p}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(n,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((s,c)=>{const l=new ne.Watch;l.start(this.pendingSubscriptionWatchLabel);const p=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(p),l.stop(this.pendingSubscriptionWatchLabel),s(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=dx&&(clearInterval(p),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=Te.generateChildLogger(t,this.name),this.clientId=""}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(r,t){let n=!1;try{n=this.getSubscription(r).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(r,t){const n=this.topicMap.get(r);await Promise.all(n.map(async s=>await this.unsubscribeById(r,s,t)))}async unsubscribeById(r,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:t,opts:n}});try{const s=mc(n);await this.rpcUnsubscribe(r,t,s);const c=tr("USER_DISCONNECTED",`${this.name}, ${r}`);await this.onUnsubscribe(r,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:t,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(r,t){const n={method:yo(t.protocol).subscribe,params:{topic:r}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Xn(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Gt.connection_stalled)}return dn(r+this.clientId)}async rpcBatchSubscribe(r){if(!r.length)return;const t=r[0].relay,n={method:yo(t.protocol).batchSubscribe,params:{topics:r.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Xn(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Gt.connection_stalled)}}rpcUnsubscribe(r,t,n){const s={method:yo(n.protocol).unsubscribe,params:{topic:r,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(r,t){this.setSubscription(r,hc(kn({},t),{id:r})),this.pending.delete(t.topic)}onBatchSubscribe(r){r.length&&r.forEach(t=>{this.setSubscription(t.id,kn({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(r,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,r)&&this.deleteSubscription(t,n),await this.relayer.messages.del(r)}async setRelayerSubscriptions(r){await this.relayer.core.storage.setItem(this.storageKey,r)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(r,t){this.subscriptions.has(r)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:r,subscription:t}),this.addSubscription(r,t))}addSubscription(r,t){this.subscriptions.set(r,kn({},t)),this.topicMap.set(t.topic,r),this.events.emit(Lr.created,t)}getSubscription(r){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:r});const t=this.subscriptions.get(r);if(!t){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(n)}return t}deleteSubscription(r,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:r,reason:t});const n=this.getSubscription(r);this.subscriptions.delete(r),this.topicMap.delete(n.topic,r),this.events.emit(Lr.deleted,hc(kn({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Lr.sync)}async reset(){if(this.cached.length){const r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<r;t++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Lr.resubscribed)}async restore(){try{const r=await this.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(this.subscriptions.size){const{message:t}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(r){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(r)}}async batchSubscribe(r){if(!r.length)return;const t=await this.rpcBatchSubscribe(r);vn(t)&&this.onBatchSubscribe(t.map((n,s)=>hc(kn({},r[s]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const r=[];this.pending.forEach(t=>{r.push(t)}),await this.batchSubscribe(r)}registerEventListeners(){this.relayer.core.heartbeat.on(mn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Gt.connect,async()=>{await this.onConnect()}),this.relayer.on(Gt.disconnect,()=>{this.onDisconnect()}),this.events.on(Lr.created,async r=>{const t=Lr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),await this.persist()}),this.events.on(Lr.deleted,async r=>{const t=Lr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}async restartToComplete(){this.restartInProgress&&await new Promise(r=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),r())},this.pollingInterval)})}}var $x=Object.defineProperty,ql=Object.getOwnPropertySymbols,Nx=Object.prototype.hasOwnProperty,Lx=Object.prototype.propertyIsEnumerable,Ml=(o,r,t)=>r in o?$x(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,Dx=(o,r)=>{for(var t in r||(r={}))Nx.call(r,t)&&Ml(o,t,r[t]);if(ql)for(var t of ql(r))Lx.call(r,t)&&Ml(o,t,r[t]);return o};class Fx extends hw{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new vr.EventEmitter,this.name=sx,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(Gt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(Gt.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(si.payload,this.onPayloadHandler),this.provider.on(si.connect,this.onConnectHandler),this.provider.on(si.disconnect,this.onDisconnectHandler),this.provider.on(si.error,this.onProviderErrorHandler)},this.core=r.core,this.logger=typeof r.logger<"u"&&typeof r.logger!="string"?Te.generateChildLogger(r.logger,this.name):Te.pino(Te.getDefaultLoggerOptions({level:r.logger||nx})),this.messages=new xx(this.logger,r.core),this.subscriber=new Cx(this,this.logger),this.publisher=new Ix(this,this.logger),this.relayUrl=(r==null?void 0:r.relayUrl)||np,this.projectId=r.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Ll}...`),await this.restartTransport(Ll)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},ux)}get context(){return Te.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(r,t,n){this.isInitialized(),await this.publisher.publish(r,t,n),await this.recordMessageEvent({topic:r,message:t,publishedAt:Date.now()})}async subscribe(r,t){var n;this.isInitialized();let s=((n=this.subscriber.topicMap.get(r))==null?void 0:n[0])||"";if(s)return s;let c;const l=p=>{p.topic===r&&(this.subscriber.off(Lr.created,l),c())};return await Promise.all([new Promise(p=>{c=p,this.subscriber.on(Lr.created,l)}),new Promise(async p=>{s=await this.subscriber.subscribe(r,t),p()})]),s}async unsubscribe(r,t){this.isInitialized(),await this.subscriber.unsubscribe(r,t)}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Xn(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(r){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){r&&r!==this.relayUrl&&(this.relayUrl=r,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(Lr.resubscribed,()=>{t()})}),new Promise(async(t,n)=>{try{await Xn(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(s){n(s);return}t()})])}catch(t){this.logger.error(t);const n=t;if(!this.isConnectionStalled(n.message))throw t;this.provider.events.emit(si.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(r){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=r||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Zh())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(r){return this.staleConnectionErrors.some(t=>r.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const r=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ci(new wb(i_({sdkVersion:cx,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:r,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(r){const{topic:t,message:n}=r;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(r){const{topic:t,message:n}=r;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,n);return s&&this.logger.debug(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(r){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:r}),Kc(r)){if(!r.method.endsWith(ox))return;const t=r.params,{topic:n,message:s,publishedAt:c}=t.data,l={topic:n,message:s,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Dx({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(r),await this.onMessageEvent(l)}else Ro(r)&&this.events.emit(Gt.message_ack,r)}async onMessageEvent(r){await this.shouldIgnoreMessageEvent(r)||(this.events.emit(Gt.message,r),await this.recordMessageEvent(r))}async acknowledgePayload(r){const t=Vc(r.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(si.payload,this.onPayloadHandler),this.provider.off(si.connect,this.onConnectHandler),this.provider.off(si.disconnect,this.onDisconnectHandler),this.provider.off(si.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Gt.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let r=await Zh();n_(async t=>{this.initialized&&r!==t&&(r=t,t?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(Gt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(r=>this.logger.error(r))},ne.toMiliseconds(ax)))}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(r=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),r())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var jx=Object.defineProperty,zl=Object.getOwnPropertySymbols,qx=Object.prototype.hasOwnProperty,Mx=Object.prototype.propertyIsEnumerable,Ul=(o,r,t)=>r in o?jx(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,Hl=(o,r)=>{for(var t in r||(r={}))qx.call(r,t)&&Ul(o,t,r[t]);if(zl)for(var t of zl(r))Mx.call(r,t)&&Ul(o,t,r[t]);return o};class To extends lw{constructor(r,t,n,s=xi,c=void 0){super(r,t,n,s),this.core=r,this.logger=t,this.name=n,this.map=new Map,this.version=hx,this.cached=[],this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!Ei(l)?this.map.set(this.getKey(l),l):Km(l)?this.map.set(l.id,l):Gm(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,p)=>{this.isInitialized(),this.map.has(l)?await this.update(l,p):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:p}),this.map.set(l,p),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(p=>Object.keys(l).every(_=>Eb(p[_],l[_]))):this.values),this.update=async(l,p)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:p});const _=Hl(Hl({},this.getData(l)),p);this.map.set(l,_),await this.persist()},this.delete=async(l,p)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:p}),this.map.delete(l),await this.persist())},this.logger=Te.generateChildLogger(t,this.name),this.storagePrefix=s,this.getKey=c}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(r){await this.core.storage.setItem(this.storageKey,r)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(r){const t=this.map.get(r);if(!t){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(n),new Error(n)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const r=await this.getDataStore();if(typeof r>"u"||!r.length)return;if(this.map.size){const{message:t}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(r){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(r)}}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}}class zx{constructor(r,t){this.core=r,this.logger=t,this.name=gx,this.version=yx,this.events=new zc,this.initialized=!1,this.storagePrefix=xi,this.ignoredPayloadTypes=[lf],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=vc(),s=await this.core.crypto.setSymKey(n),c=Dr(ne.FIVE_MINUTES),l={protocol:ip},p={topic:s,expiry:c,relay:l,active:!1},_=s_({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:l});return await this.pairings.set(s,p),await this.core.relayer.subscribe(s),this.core.expirer.set(s,c),{topic:s,uri:_}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:s,symKey:c,relay:l}=o_(n.uri);let p;if(this.pairings.keys.includes(s)&&(p=this.pairings.get(s),p.active))throw new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(s)||(await this.core.crypto.setSymKey(c,s),await this.core.relayer.subscribe(s,{relay:l}));const _=Dr(ne.FIVE_MINUTES),y={topic:s,relay:l,expiry:_,active:!1};return await this.pairings.set(s,y),this.core.expirer.set(s,_),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Jn.create,y),y},this.activate=async({topic:n})=>{this.isInitialized();const s=Dr(ne.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:s}),this.core.expirer.set(n,s)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:s}=n;if(this.pairings.keys.includes(s)){const c=await this.sendRequest(s,"wc_pairingPing",{}),{done:l,resolve:p,reject:_}=ln();this.events.once(Lt("pairing_ping",c),({error:y})=>{y?_(y):p()}),await l()}},this.updateExpiry=async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})},this.updateMetadata=async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",tr("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(n,s,c)=>{const l=yn(s,c),p=await this.core.crypto.encode(n,l),_=Bn[s].req;return this.core.history.set(n,l),this.core.relayer.publish(n,p,_),l.id},this.sendResult=async(n,s,c)=>{const l=Vc(n,c),p=await this.core.crypto.encode(s,l),_=await this.core.history.get(s,n),y=Bn[_.request.method].res;await this.core.relayer.publish(s,p,y),await this.core.history.resolve(l)},this.sendError=async(n,s,c)=>{const l=Oo(n,c),p=await this.core.crypto.encode(s,l),_=await this.core.history.get(s,n),y=Bn[_.request.method]?Bn[_.request.method].res:Bn.unregistered_method.res;await this.core.relayer.publish(s,p,y),await this.core.history.resolve(l)},this.deletePairing=async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,tr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(s=>bi(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=n=>{const{topic:s,payload:c}=n;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(s,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,c);default:return this.onUnknownRpcMethodRequest(s,c)}},this.onRelayEventResponse=async n=>{const{topic:s,payload:c}=n,l=(await this.core.history.get(s,c.id)).request.method;switch(l){case"wc_pairingPing":return this.onPairingPingResponse(s,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(n,s)=>{const{id:c}=s;try{this.isValidPing({topic:n}),await this.sendResult(c,n,!0),this.events.emit(Jn.ping,{id:c,topic:n})}catch(l){await this.sendError(c,n,l),this.logger.error(l)}},this.onPairingPingResponse=(n,s)=>{const{id:c}=s;setTimeout(()=>{ai(s)?this.events.emit(Lt("pairing_ping",c),{}):Fr(s)&&this.events.emit(Lt("pairing_ping",c),{error:s.error})},500)},this.onPairingDeleteRequest=async(n,s)=>{const{id:c}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Jn.delete,{id:c,topic:n})}catch(l){await this.sendError(c,n,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(n,s)=>{const{id:c,method:l}=s;try{if(this.registeredMethods.includes(l))return;const p=tr("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,n,p),this.logger.error(p)}catch(p){await this.sendError(c,n,p),this.logger.error(p)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(tr("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!ur(n)){const{message:s}=Z("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(s)}if(!a_(n.uri)){const{message:s}=Z("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(s)}},this.isValidPing=async n=>{if(!ur(n)){const{message:c}=Z("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(c)}const{topic:s}=n;await this.isValidPairingTopic(s)},this.isValidDisconnect=async n=>{if(!ur(n)){const{message:c}=Z("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(c)}const{topic:s}=n;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async n=>{if(!fn(n,!1)){const{message:s}=Z("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=Z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(bi(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=Z("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}},this.core=r,this.logger=Te.generateChildLogger(t,this.name),this.pairings=new To(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Te.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}registerRelayerEvents(){this.core.relayer.on(Gt.message,async r=>{const{topic:t,message:n}=r;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(t,n);try{Kc(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):Ro(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(Or.expired,async r=>{const{topic:t}=ff(r.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Jn.expire,{topic:t}))})}}class Ux extends aw{constructor(r,t){super(r,t),this.core=r,this.logger=t,this.records=new Map,this.events=new vr.EventEmitter,this.name=vx,this.version=mx,this.cached=[],this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,s,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:c}),this.records.has(s.id))return;const l={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:c,expiry:Dr(ne.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(kr.created,l)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=Fr(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.events.emit(kr.updated,s))},this.get=async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s)),this.delete=(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(c=>{if(c.topic===n){if(typeof s<"u"&&c.id!==s)return;this.records.delete(c.id),this.events.emit(kr.deleted,c)}})},this.exists=async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1),this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.logger=Te.generateChildLogger(t,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const r=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:yn(t.request.method,t.request.params,t.id),chainId:t.chainId};return r.push(n)}),r}async setJsonRpcRecords(r){await this.core.storage.setItem(this.storageKey,r)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(r){this.isInitialized();const t=this.records.get(r);if(!t){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(n)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(kr.sync)}async restore(){try{const r=await this.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(this.records.size){const{message:t}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}}registerEventListeners(){this.events.on(kr.created,r=>{const t=kr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.events.on(kr.updated,r=>{const t=kr.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.events.on(kr.deleted,r=>{const t=kr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.core.heartbeat.on(mn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(r=>{ne.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.delete(r.topic,r.id))})}catch(r){this.logger.warn(r)}}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Hx extends pw{constructor(r,t){super(r,t),this.core=r,this.logger=t,this.expirations=new Map,this.events=new vr.EventEmitter,this.name=_x,this.version=wx,this.cached=[],this.initialized=!1,this.storagePrefix=xi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(n,s)=>{this.isInitialized();const c=this.formatTarget(n),l={target:c,expiry:s};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(Or.created,{target:c,expiration:l})},this.get=n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)},this.del=n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),c=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Or.deleted,{target:s,expiration:c})}},this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.logger=Te.generateChildLogger(t,this.name)}get context(){return Te.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(r){if(typeof r=="string")return c_(r);if(typeof r=="number")return u_(r);const{message:t}=Z("UNKNOWN_TYPE",`Target type: ${typeof r}`);throw new Error(t)}async setExpirations(r){await this.core.storage.setItem(this.storageKey,r)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Or.sync)}async restore(){try{const r=await this.getExpirations();if(typeof r>"u"||!r.length)return;if(this.expirations.size){const{message:t}=Z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(r){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(r)}}getExpiration(r){const t=this.expirations.get(r);if(!t){const{message:n}=Z("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(r,t){const{expiry:n}=t;ne.toMiliseconds(n)-Date.now()<=0&&this.expire(r,t)}expire(r,t){this.expirations.delete(r),this.events.emit(Or.expired,{target:r,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((r,t)=>this.checkExpiry(t,r))}registerEventListeners(){this.core.heartbeat.on(mn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Or.created,r=>{const t=Or.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()}),this.events.on(Or.expired,r=>{const t=Or.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()}),this.events.on(Or.deleted,r=>{const t=Or.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Bx extends dw{constructor(r,t){super(r,t),this.projectId=r,this.logger=t,this.name=uc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async()=>{if(this.verifyDisabled||h_()||!pf())return;const n=_o;this.verifyUrl!==n&&this.removeIframe(),this.verifyUrl=n;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Dl;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const s=(n==null?void 0:n.verifyUrl)||_o;let c;try{c=await this.fetchAttestation(n.attestationId,s)}catch(l){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${s}`),this.logger.info(l),c=await this.fetchAttestation(n.attestationId,Dl)}return c},this.fetchAttestation=async(n,s)=>{this.logger.info(`resolving attestation: ${n} from url: ${s}`);const c=this.startAbortTimer(ne.ONE_SECOND*2),l=await fetch(`${s}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var s;try{if(!this.iframe)return;(s=this.iframe.contentWindow)==null||s.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const s=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),n())};await Promise.race([new Promise(c=>{if(document.getElementById(uc))return c();window.addEventListener("message",s);const l=document.createElement("iframe");l.id=uc,l.src=`${this.verifyUrl}/${this.projectId}`,l.style.display="none",document.body.append(l),this.iframe=l,n=c}),new Promise((c,l)=>setTimeout(()=>{window.removeEventListener("message",s),l("verify iframe load timeout")},ne.toMiliseconds(ne.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Te.generateChildLogger(t,this.name),this.verifyUrl=_o,this.abortController=new AbortController,this.isDevEnv=l_()&&{}.IS_VITEST}get context(){return Te.getLoggerContext(this.logger)}startAbortTimer(r){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ne.toMiliseconds(r))}}var kx=Object.defineProperty,Bl=Object.getOwnPropertySymbols,Vx=Object.prototype.hasOwnProperty,Kx=Object.prototype.propertyIsEnumerable,kl=(o,r,t)=>r in o?kx(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,Vl=(o,r)=>{for(var t in r||(r={}))Vx.call(r,t)&&kl(o,t,r[t]);if(Bl)for(var t of Bl(r))Kx.call(r,t)&&kl(o,t,r[t]);return o};class Wc extends ow{constructor(r){super(r),this.protocol=rp,this.version=GE,this.name=Gc,this.events=new vr.EventEmitter,this.initialized=!1,this.on=(n,s)=>this.events.on(n,s),this.once=(n,s)=>this.events.once(n,s),this.off=(n,s)=>this.events.off(n,s),this.removeListener=(n,s)=>this.events.removeListener(n,s),this.projectId=r==null?void 0:r.projectId,this.relayUrl=(r==null?void 0:r.relayUrl)||np,this.customStoragePrefix=r!=null&&r.customStoragePrefix?`:${r.customStoragePrefix}`:"";const t=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Te.pino(Te.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||WE.logger}));this.logger=Te.generateChildLogger(t,this.name),this.heartbeat=new mn.HeartBeat,this.crypto=new Ex(this,this.logger,r==null?void 0:r.keychain),this.history=new Ux(this,this.logger),this.expirer=new Hx(this,this.logger),this.storage=r!=null&&r.storage?r.storage:new h1(Vl(Vl({},JE),r==null?void 0:r.storageOptions)),this.relayer=new Fx({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new zx(this,this.logger),this.verify=new Bx(this.projectId||"",this.logger)}static async init(r){const t=new Wc(r);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem(lx,n),t}get context(){return Te.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(r){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),this.logger.error(r.message),r}}}const Gx=Wc,sp="wc",op=2,ap="client",Jc=`${sp}@${op}:${ap}:`,lc={name:ap,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Kl="WALLETCONNECT_DEEPLINK_CHOICE",Wx="proposal",cp="Proposal expired",Jx="session",fo=ne.SEVEN_DAYS,Qx="engine",Vn={wc_sessionPropose:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1115}}},fc={min:ne.FIVE_MINUTES,max:ne.SEVEN_DAYS},oi={idle:"IDLE",active:"ACTIVE"},Yx="request",Xx=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Zx=Object.defineProperty,eI=Object.defineProperties,tI=Object.getOwnPropertyDescriptors,Gl=Object.getOwnPropertySymbols,rI=Object.prototype.hasOwnProperty,iI=Object.prototype.propertyIsEnumerable,Wl=(o,r,t)=>r in o?Zx(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,cr=(o,r)=>{for(var t in r||(r={}))rI.call(r,t)&&Wl(o,t,r[t]);if(Gl)for(var t of Gl(r))iI.call(r,t)&&Wl(o,t,r[t]);return o},Kn=(o,r)=>eI(o,tI(r));class nI extends yw{constructor(r){super(r),this.name=Qx,this.events=new zc,this.initialized=!1,this.ignoredPayloadTypes=[lf],this.requestQueue={state:oi.idle,queue:[]},this.sessionRequestQueue={state:oi.idle,queue:[]},this.requestQueueDelay=ne.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Vn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const n=Kn(cr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:p,relays:_}=n;let y=s,O,F=!1;if(y&&(F=this.client.core.pairing.pairings.get(y).active),!y||!F){const{topic:pe,uri:he}=await this.client.core.pairing.create();y=pe,O=he}const A=await this.client.core.crypto.generateKeyPair(),M=cr({requiredNamespaces:c,optionalNamespaces:l,relays:_??[{protocol:ip}],proposer:{publicKey:A,metadata:this.client.metadata}},p&&{sessionProperties:p}),{reject:D,resolve:K,done:ie}=ln(ne.FIVE_MINUTES,cp);if(this.events.once(Lt("session_connect"),async({error:pe,session:he})=>{if(pe)D(pe);else if(he){he.self.publicKey=A;const le=Kn(cr({},he),{requiredNamespaces:he.requiredNamespaces,optionalNamespaces:he.optionalNamespaces});await this.client.session.set(he.topic,le),await this.setExpiry(he.topic,he.expiry),y&&await this.client.core.pairing.updateMetadata({topic:y,metadata:he.peer.metadata}),K(le)}}),!y){const{message:pe}=Z("NO_MATCHING_KEY",`connect() pairing topic: ${y}`);throw new Error(pe)}const Ee=await this.sendRequest({topic:y,method:"wc_sessionPropose",params:M}),ge=Dr(ne.FIVE_MINUTES);return await this.setProposal(Ee,cr({id:Ee,expiry:ge},M)),{uri:O,approval:ie}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:n,relayProtocol:s,namespaces:c,sessionProperties:l}=t,p=this.client.proposal.get(n);let{pairingTopic:_,proposer:y,requiredNamespaces:O,optionalNamespaces:F}=p;_=_||"",vo(O)||(O=p_(c,"approve()"));const A=await this.client.core.crypto.generateKeyPair(),M=y.publicKey,D=await this.client.core.crypto.generateSharedKey(A,M);_&&n&&(await this.client.core.pairing.updateMetadata({topic:_,metadata:y.metadata}),await this.sendResult({id:n,topic:_,result:{relay:{protocol:s??"irn"},responderPublicKey:A}}),await this.client.proposal.delete(n,tr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}));const K=cr({relay:{protocol:s??"irn"},namespaces:c,requiredNamespaces:O,optionalNamespaces:F,pairingTopic:_,controller:{publicKey:A,metadata:this.client.metadata},expiry:Dr(fo)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(D),await this.sendRequest({topic:D,method:"wc_sessionSettle",params:K,throwOnFailedPublish:!0});const ie=Kn(cr({},K),{topic:D,pairingTopic:_,acknowledged:!1,self:K.controller,peer:{publicKey:y.publicKey,metadata:y.metadata},controller:A});return await this.client.session.set(D,ie),await this.setExpiry(D,Dr(fo)),{topic:D,acknowledged:()=>new Promise(Ee=>setTimeout(()=>Ee(this.client.session.get(D)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:n,reason:s}=t,{pairingTopic:c}=this.client.proposal.get(n);c&&(await this.sendError(n,c,s),await this.client.proposal.delete(n,tr("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:n,namespaces:s}=t,c=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s}}),{done:l,resolve:p,reject:_}=ln();return this.events.once(Lt("session_update",c),({error:y})=>{y?_(y):p()}),await this.client.session.update(n,{namespaces:s}),{acknowledged:l}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:n}=t,s=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:c,resolve:l,reject:p}=ln();return this.events.once(Lt("session_extend",s),({error:_})=>{_?p(_):l()}),await this.setExpiry(n,Dr(fo)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:n,request:s,topic:c,expiry:l}=t,p=kc(),{done:_,resolve:y,reject:O}=ln(l,"Request expired. Please try again.");return this.events.once(Lt("session_request",p),({error:F,result:A})=>{F?O(F):y(A)}),await Promise.all([new Promise(async F=>{await this.sendRequest({clientRpcId:p,topic:c,method:"wc_sessionRequest",params:{request:s,chainId:n},expiry:l,throwOnFailedPublish:!0}).catch(A=>O(A)),this.client.events.emit("session_request_sent",{topic:c,request:s,chainId:n,id:p}),F()}),new Promise(async F=>{const A=await this.client.core.storage.getItem(Kl);d_({id:p,topic:c,wcDeepLink:A}),F()}),_()]).then(F=>F[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:s}=t,{id:c}=s;ai(s)?await this.sendResult({id:c,topic:n,result:s.result,throwOnFailedPublish:!0}):Fr(s)&&await this.sendError(c,n,s.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const s=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:c,resolve:l,reject:p}=ln();this.events.once(Lt("session_ping",s),({error:_})=>{_?p(_):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:n,event:s,chainId:c}=t;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:tr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(n=>g_(n,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const n=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(c=>{var l,p;return((l=c.peerMetadata)==null?void 0:l.url)&&((p=c.peerMetadata)==null?void 0:p.url)===t.peer.metadata.url&&c.topic&&c.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(t,n)=>{const{self:s}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,tr("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),n||this.client.core.expirer.del(t),this.client.core.storage.removeItem(Kl).catch(c=>this.client.logger.warn(c))},this.deleteProposal=async(t,n)=>{await Promise.all([this.client.proposal.delete(t,tr("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),s?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==t),s&&(this.sessionRequestQueue.state=oi.idle)},this.setExpiry=async(t,n)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:n}),this.client.core.expirer.set(t,n)},this.setProposal=async(t,n)=>{await this.client.proposal.set(t,n),this.client.core.expirer.set(t,n.expiry)},this.setPendingSessionRequest=async t=>{const n=Vn.wc_sessionRequest.req.ttl,{id:s,topic:c,params:l,verifyContext:p}=t;await this.client.pendingRequest.set(s,{id:s,topic:c,params:l,verifyContext:p}),n&&this.client.core.expirer.set(s,Dr(n))},this.sendRequest=async t=>{const{topic:n,method:s,params:c,expiry:l,relayRpcId:p,clientRpcId:_,throwOnFailedPublish:y}=t,O=yn(s,c,_);if(pf()&&Xx.includes(s)){const M=dn(JSON.stringify(O));this.client.core.verify.register({attestationId:M})}const F=await this.client.core.crypto.encode(n,O),A=Vn[s].req;return l&&(A.ttl=l),p&&(A.id=p),this.client.core.history.set(n,O),y?(A.internal=Kn(cr({},A.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,F,A)):this.client.core.relayer.publish(n,F,A).catch(M=>this.client.logger.error(M)),O.id},this.sendResult=async t=>{const{id:n,topic:s,result:c,throwOnFailedPublish:l}=t,p=Vc(n,c),_=await this.client.core.crypto.encode(s,p),y=await this.client.core.history.get(s,n),O=Vn[y.request.method].res;l?(O.internal=Kn(cr({},O.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,_,O)):this.client.core.relayer.publish(s,_,O).catch(F=>this.client.logger.error(F)),await this.client.core.history.resolve(p)},this.sendError=async(t,n,s)=>{const c=Oo(t,s),l=await this.client.core.crypto.encode(n,c),p=await this.client.core.history.get(n,t),_=Vn[p.request.method].res;this.client.core.relayer.publish(n,l,_),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],n=[];this.client.session.getAll().forEach(s=>{bi(s.expiry)&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{bi(s.expiry)&&n.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession(s)),...n.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===oi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=oi.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=oi.idle},this.processRequest=t=>{const{topic:n,payload:s}=t,c=s.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(n,s);case"wc_sessionSettle":return this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return this.onSessionExtendRequest(n,s);case"wc_sessionPing":return this.onSessionPingRequest(n,s);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return this.onSessionRequest(n,s);case"wc_sessionEvent":return this.onSessionEventRequest(n,s);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:s}=t,c=(await this.client.core.history.get(n,s.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:n}=t,{message:s}=Z("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.onSessionProposeRequest=async(t,n)=>{const{params:s,id:c}=n;try{this.isValidConnect(cr({},n.params));const l=Dr(ne.FIVE_MINUTES),p=cr({id:c,pairingTopic:t,expiry:l},s);await this.setProposal(c,p);const _=dn(JSON.stringify(n)),y=await this.getVerifyContext(_,p.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:p,verifyContext:y})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,n)=>{const{id:s}=n;if(ai(n)){const{result:c}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const p=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:p});const _=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});const y=await this.client.core.crypto.generateSharedKey(p,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:y});const O=await this.client.core.relayer.subscribe(y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:O}),await this.client.core.pairing.activate({topic:t})}else Fr(n)&&(await this.client.proposal.delete(s,tr("USER_DISCONNECTED")),this.events.emit(Lt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(t,n)=>{const{id:s,params:c}=n;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:p,expiry:_,namespaces:y,requiredNamespaces:O,optionalNamespaces:F,sessionProperties:A,pairingTopic:M}=n.params,D=cr({topic:t,relay:l,expiry:_,namespaces:y,acknowledged:!0,pairingTopic:M,requiredNamespaces:O,optionalNamespaces:F,controller:p.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:p.publicKey,metadata:p.metadata}},A&&{sessionProperties:A});await this.sendResult({id:n.id,topic:t,result:!0}),this.events.emit(Lt("session_connect"),{session:D}),this.cleanupDuplicatePairings(D)}catch(l){await this.sendError(s,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,n)=>{const{id:s}=n;ai(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Lt("session_approve",s),{})):Fr(n)&&(await this.client.session.delete(t,tr("USER_DISCONNECTED")),this.events.emit(Lt("session_approve",s),{error:n.error}))},this.onSessionUpdateRequest=async(t,n)=>{const{params:s,id:c}=n;try{const l=`${t}_session_update`,p=lo.get(l);if(p&&this.isRequestOutOfSync(p,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(cr({topic:t},s)),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:s}),lo.set(l,c)}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.isRequestOutOfSync=(t,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,n)=>{const{id:s}=n;ai(n)?this.events.emit(Lt("session_update",s),{}):Fr(n)&&this.events.emit(Lt("session_update",s),{error:n.error})},this.onSessionExtendRequest=async(t,n)=>{const{id:s}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Dr(fo)),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(c){await this.sendError(s,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,n)=>{const{id:s}=n;ai(n)?this.events.emit(Lt("session_extend",s),{}):Fr(n)&&this.events.emit(Lt("session_extend",s),{error:n.error})},this.onSessionPingRequest=async(t,n)=>{const{id:s}=n;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(c){await this.sendError(s,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,n)=>{const{id:s}=n;setTimeout(()=>{ai(n)?this.events.emit(Lt("session_ping",s),{}):Fr(n)&&this.events.emit(Lt("session_ping",s),{error:n.error})},500)},this.onSessionDeleteRequest=async(t,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Gt.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult({id:s,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:s,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,n)=>{const{id:s,params:c}=n;try{this.isValidRequest(cr({topic:t},c));const l=dn(JSON.stringify(yn("wc_sessionRequest",c,s))),p=this.client.session.get(t),_=await this.getVerifyContext(l,p.peer.metadata),y={id:s,topic:t,params:c,verifyContext:_};await this.setPendingSessionRequest(y),this.addSessionRequestToSessionRequestQueue(y),this.processSessionRequestQueue()}catch(l){await this.sendError(s,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,n)=>{const{id:s}=n;ai(n)?this.events.emit(Lt("session_request",s),{result:n.result}):Fr(n)&&this.events.emit(Lt("session_request",s),{error:n.error})},this.onSessionEventRequest=async(t,n)=>{const{id:s,params:c}=n;try{const l=`${t}_session_event_${c.event.name}`,p=lo.get(l);if(p&&this.isRequestOutOfSync(p,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(cr({topic:t},c)),this.client.events.emit("session_event",{id:s,topic:t,params:c}),lo.set(l,s)}catch(l){await this.sendError(s,t,l),this.client.logger.error(l)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=oi.idle,this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===oi.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=oi.active,this.client.events.emit("session_request",t)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=t=>{if(t.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);n&&this.onSessionProposeRequest(t.topic,yn("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer},n.id))},this.isValidConnect=async t=>{if(!ur(t)){const{message:_}=Z("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(_)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:c,sessionProperties:l,relays:p}=t;if(Ei(n)||await this.isValidPairingTopic(n),!y_(p,!0)){const{message:_}=Z("MISSING_OR_INVALID",`connect() relays: ${p}`);throw new Error(_)}!Ei(s)&&vo(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Ei(c)&&vo(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),Ei(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,n)=>{const s=v_(t,"connect()",n);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!ur(t))throw new Error(Z("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:s,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(n);const p=this.client.proposal.get(n),_=tc(s,"approve()");if(_)throw new Error(_.message);const y=el(p.requiredNamespaces,s,"approve()");if(y)throw new Error(y.message);if(!fn(c,!0)){const{message:O}=Z("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(O)}Ei(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!ur(t)){const{message:c}=Z("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:n,reason:s}=t;if(await this.isValidProposalId(n),!m_(s)){const{message:c}=Z("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!ur(t)){const{message:y}=Z("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(y)}const{relay:n,controller:s,namespaces:c,expiry:l}=t;if(!__(n)){const{message:y}=Z("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(y)}const p=w_(s,"onSessionSettleRequest()");if(p)throw new Error(p.message);const _=tc(c,"onSessionSettleRequest()");if(_)throw new Error(_.message);if(bi(l)){const{message:y}=Z("EXPIRED","onSessionSettleRequest()");throw new Error(y)}},this.isValidUpdate=async t=>{if(!ur(t)){const{message:_}=Z("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(_)}const{topic:n,namespaces:s}=t;await this.isValidSessionTopic(n);const c=this.client.session.get(n),l=tc(s,"update()");if(l)throw new Error(l.message);const p=el(c.requiredNamespaces,s,"update()");if(p)throw new Error(p.message)},this.isValidExtend=async t=>{if(!ur(t)){const{message:s}=Z("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionTopic(n)},this.isValidRequest=async t=>{if(!ur(t)){const{message:_}=Z("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(_)}const{topic:n,request:s,chainId:c,expiry:l}=t;await this.isValidSessionTopic(n);const{namespaces:p}=this.client.session.get(n);if(!tl(p,c)){const{message:_}=Z("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(_)}if(!b_(s)){const{message:_}=Z("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(_)}if(!E_(p,c,s.method)){const{message:_}=Z("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(_)}if(l&&!x_(l,fc)){const{message:_}=Z("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${fc.min} and ${fc.max}`);throw new Error(_)}},this.isValidRespond=async t=>{if(!ur(t)){const{message:c}=Z("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:n,response:s}=t;if(await this.isValidSessionTopic(n),!I_(s)){const{message:c}=Z("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!ur(t)){const{message:s}=Z("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async t=>{if(!ur(t)){const{message:p}=Z("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(p)}const{topic:n,event:s,chainId:c}=t;await this.isValidSessionTopic(n);const{namespaces:l}=this.client.session.get(n);if(!tl(l,c)){const{message:p}=Z("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(p)}if(!S_(s)){const{message:p}=Z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(p)}if(!P_(l,c,s.name)){const{message:p}=Z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(p)}},this.isValidDisconnect=async t=>{if(!ur(t)){const{message:s}=Z("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(t,n)=>{const s={verified:{verifyUrl:n.verifyUrl||_o,validation:"UNKNOWN",origin:n.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});c&&(s.verified.origin=c.origin,s.verified.isScam=c.isScam,s.verified.validation=c.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(s)}`),s},this.validateSessionProps=(t,n)=>{Object.values(t).forEach(s=>{if(!fn(s,!1)){const{message:c}=Z("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:r}=Z("NOT_INITIALIZED",this.name);throw new Error(r)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Gt.message,async r=>{const{topic:t,message:n}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const s=await this.client.core.crypto.decode(t,n);try{Kc(s)?(this.client.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):Ro(s)?(await this.client.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.client.core.history.delete(t,s.id)):this.onRelayEventUnknownPayload({topic:t,payload:s})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(Or.expired,async r=>{const{topic:t,id:n}=ff(r.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Z("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Jn.create,r=>this.onPairingCreated(r))}isValidPairingTopic(r){if(!fn(r,!1)){const{message:t}=Z("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(r)){const{message:t}=Z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(t)}if(bi(this.client.core.pairing.pairings.get(r).expiry)){const{message:t}=Z("EXPIRED",`pairing topic: ${r}`);throw new Error(t)}}async isValidSessionTopic(r){if(!fn(r,!1)){const{message:t}=Z("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw new Error(t)}if(!this.client.session.keys.includes(r)){const{message:t}=Z("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw new Error(t)}if(bi(this.client.session.get(r).expiry)){await this.deleteSession(r);const{message:t}=Z("EXPIRED",`session topic: ${r}`);throw new Error(t)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else if(this.client.core.pairing.pairings.keys.includes(r))this.isValidPairingTopic(r);else if(fn(r,!1)){const{message:t}=Z("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw new Error(t)}else{const{message:t}=Z("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw new Error(t)}}async isValidProposalId(r){if(!O_(r)){const{message:t}=Z("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw new Error(t)}if(!this.client.proposal.keys.includes(r)){const{message:t}=Z("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw new Error(t)}if(bi(this.client.proposal.get(r).expiry)){await this.deleteProposal(r);const{message:t}=Z("EXPIRED",`proposal id: ${r}`);throw new Error(t)}}}class sI extends To{constructor(r,t){super(r,t,Wx,Jc),this.core=r,this.logger=t}}class oI extends To{constructor(r,t){super(r,t,Jx,Jc),this.core=r,this.logger=t}}class aI extends To{constructor(r,t){super(r,t,Yx,Jc,n=>n.id),this.core=r,this.logger=t}}let cI=class up extends gw{constructor(r){super(r),this.protocol=sp,this.version=op,this.name=lc.name,this.events=new vr.EventEmitter,this.on=(n,s)=>this.events.on(n,s),this.once=(n,s)=>this.events.once(n,s),this.off=(n,s)=>this.events.off(n,s),this.removeListener=(n,s)=>this.events.removeListener(n,s),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}},this.update=async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}},this.request=async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}},this.find=n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(r==null?void 0:r.name)||lc.name,this.metadata=(r==null?void 0:r.metadata)||f_();const t=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Te.pino(Te.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||lc.logger}));this.core=(r==null?void 0:r.core)||new Gx(r),this.logger=Te.generateChildLogger(t,this.name),this.session=new oI(this.core,this.logger),this.proposal=new sI(this.core,this.logger),this.pendingRequest=new aI(this.core,this.logger),this.engine=new nI(this)}static async init(r){const t=new up(r);return await t.initialize(),t}get context(){return Te.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}};var Nc={exports:{}};(function(o,r){var t=typeof self<"u"?self:hr,n=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(l){var p={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function _(m){return m&&DataView.prototype.isPrototypeOf(m)}if(p.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],O=ArrayBuffer.isView||function(m){return m&&y.indexOf(Object.prototype.toString.call(m))>-1};function F(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function A(m){return typeof m!="string"&&(m=String(m)),m}function M(m){var x={next:function(){var Y=m.shift();return{done:Y===void 0,value:Y}}};return p.iterable&&(x[Symbol.iterator]=function(){return x}),x}function D(m){this.map={},m instanceof D?m.forEach(function(x,Y){this.append(Y,x)},this):Array.isArray(m)?m.forEach(function(x){this.append(x[0],x[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(x){this.append(x,m[x])},this)}D.prototype.append=function(m,x){m=F(m),x=A(x);var Y=this.map[m];this.map[m]=Y?Y+", "+x:x},D.prototype.delete=function(m){delete this.map[F(m)]},D.prototype.get=function(m){return m=F(m),this.has(m)?this.map[m]:null},D.prototype.has=function(m){return this.map.hasOwnProperty(F(m))},D.prototype.set=function(m,x){this.map[F(m)]=A(x)},D.prototype.forEach=function(m,x){for(var Y in this.map)this.map.hasOwnProperty(Y)&&m.call(x,this.map[Y],Y,this)},D.prototype.keys=function(){var m=[];return this.forEach(function(x,Y){m.push(Y)}),M(m)},D.prototype.values=function(){var m=[];return this.forEach(function(x){m.push(x)}),M(m)},D.prototype.entries=function(){var m=[];return this.forEach(function(x,Y){m.push([Y,x])}),M(m)},p.iterable&&(D.prototype[Symbol.iterator]=D.prototype.entries);function K(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function ie(m){return new Promise(function(x,Y){m.onload=function(){x(m.result)},m.onerror=function(){Y(m.error)}})}function Ee(m){var x=new FileReader,Y=ie(x);return x.readAsArrayBuffer(m),Y}function ge(m){var x=new FileReader,Y=ie(x);return x.readAsText(m),Y}function pe(m){for(var x=new Uint8Array(m),Y=new Array(x.length),ce=0;ce<x.length;ce++)Y[ce]=String.fromCharCode(x[ce]);return Y.join("")}function he(m){if(m.slice)return m.slice(0);var x=new Uint8Array(m.byteLength);return x.set(new Uint8Array(m)),x.buffer}function le(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:p.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:p.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:p.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():p.arrayBuffer&&p.blob&&_(m)?(this._bodyArrayBuffer=he(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):p.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||O(m))?this._bodyArrayBuffer=he(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var m=K(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?K(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Ee)}),this.text=function(){var m=K(this);if(m)return m;if(this._bodyBlob)return ge(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(pe(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(ye)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function U(m){var x=m.toUpperCase();return N.indexOf(x)>-1?x:m}function W(m,x){x=x||{};var Y=x.body;if(m instanceof W){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,x.headers||(this.headers=new D(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!Y&&m._bodyInit!=null&&(Y=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new D(x.headers)),this.method=U(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Y)}W.prototype.clone=function(){return new W(this,{body:this._bodyInit})};function ye(m){var x=new FormData;return m.trim().split("&").forEach(function(Y){if(Y){var ce=Y.split("="),V=ce.shift().replace(/\+/g," "),H=ce.join("=").replace(/\+/g," ");x.append(decodeURIComponent(V),decodeURIComponent(H))}}),x}function re(m){var x=new D,Y=m.replace(/\r?\n[\t ]+/g," ");return Y.split(/\r?\n/).forEach(function(ce){var V=ce.split(":"),H=V.shift().trim();if(H){var k=V.join(":").trim();x.append(H,k)}}),x}le.call(W.prototype);function ue(m,x){x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in x?x.statusText:"OK",this.headers=new D(x.headers),this.url=x.url||"",this._initBody(m)}le.call(ue.prototype),ue.prototype.clone=function(){return new ue(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new D(this.headers),url:this.url})},ue.error=function(){var m=new ue(null,{status:0,statusText:""});return m.type="error",m};var Ce=[301,302,303,307,308];ue.redirect=function(m,x){if(Ce.indexOf(x)===-1)throw new RangeError("Invalid status code");return new ue(null,{status:x,headers:{location:m}})},l.DOMException=c.DOMException;try{new l.DOMException}catch{l.DOMException=function(x,Y){this.message=x,this.name=Y;var ce=Error(x);this.stack=ce.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function ze(m,x){return new Promise(function(Y,ce){var V=new W(m,x);if(V.signal&&V.signal.aborted)return ce(new l.DOMException("Aborted","AbortError"));var H=new XMLHttpRequest;function k(){H.abort()}H.onload=function(){var G={status:H.status,statusText:H.statusText,headers:re(H.getAllResponseHeaders()||"")};G.url="responseURL"in H?H.responseURL:G.headers.get("X-Request-URL");var Qe="response"in H?H.response:H.responseText;Y(new ue(Qe,G))},H.onerror=function(){ce(new TypeError("Network request failed"))},H.ontimeout=function(){ce(new TypeError("Network request failed"))},H.onabort=function(){ce(new l.DOMException("Aborted","AbortError"))},H.open(V.method,V.url,!0),V.credentials==="include"?H.withCredentials=!0:V.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&p.blob&&(H.responseType="blob"),V.headers.forEach(function(G,Qe){H.setRequestHeader(Qe,G)}),V.signal&&(V.signal.addEventListener("abort",k),H.onreadystatechange=function(){H.readyState===4&&V.signal.removeEventListener("abort",k)}),H.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return ze.polyfill=!0,c.fetch||(c.fetch=ze,c.Headers=D,c.Request=W,c.Response=ue),l.Headers=D,l.Request=W,l.Response=ue,l.fetch=ze,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;r=s.fetch,r.default=s.fetch,r.fetch=s.fetch,r.Headers=s.Headers,r.Request=s.Request,r.Response=s.Response,o.exports=r})(Nc,Nc.exports);var uI=Nc.exports;const Jl=jc(uI),hI={Accept:"application/json","Content-Type":"application/json"},lI="POST",Ql={headers:hI,method:lI},Yl=10;class Si{constructor(r,t=!1){if(this.url=r,this.disableProviderPing=t,this.events=new vr.EventEmitter,this.isAvailable=!1,this.registering=!1,!xl(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);this.url=r,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async open(r=this.url){await this.register(r)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(r,t){this.isAvailable||await this.register();try{const n=rs(r),c=await(await Jl(this.url,Object.assign(Object.assign({},Ql),{body:n}))).json();this.onPayload({data:c})}catch(n){this.onError(r.id,n)}}async register(r=this.url){if(!xl(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),s(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=r,this.registering=!0;try{if(!this.disableProviderPing){const t=rs({id:1,jsonrpc:"2.0",method:"test",params:[]});await Jl(r,Object.assign(Object.assign({},Ql),{body:t}))}this.onOpen()}catch(t){const n=this.parseError(t);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(r){if(typeof r.data>"u")return;const t=typeof r.data=="string"?Uc(r.data):r.data;this.events.emit("payload",t)}onError(r,t){const n=this.parseError(t),s=n.message||n.toString(),c=Oo(r,s);this.events.emit("payload",c)}parseError(r,t=this.url){return Mf(r,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Yl&&this.events.setMaxListeners(Yl)}}const Xl="error",fI="wss://relay.walletconnect.com",pI="wc",dI="universal_provider",Zl=`${pI}@2:${dI}:`,gI="https://rpc.walletconnect.com/v1/",ui={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(o,r){(function(){var t,n="4.17.21",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",p="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",y=500,O="__lodash_placeholder__",F=1,A=2,M=4,D=1,K=2,ie=1,Ee=2,ge=4,pe=8,he=16,le=32,N=64,U=128,W=256,ye=512,re=30,ue="...",Ce=800,ze=16,m=1,x=2,Y=3,ce=1/0,V=9007199254740991,H=17976931348623157e292,k=0/0,G=4294967295,Qe=G-1,ke=G>>>1,jr=[["ary",U],["bind",ie],["bindKey",Ee],["curry",pe],["curryRight",he],["flip",ye],["partial",le],["partialRight",N],["rearg",W]],xe="[object Arguments]",It="[object Array]",$="[object AsyncFunction]",C="[object Boolean]",R="[object Date]",h="[object DOMException]",E="[object Error]",ee="[object Function]",fe="[object GeneratorFunction]",we="[object Map]",$e="[object Number]",Le="[object Null]",Pe="[object Object]",St="[object Promise]",_t="[object Proxy]",at="[object RegExp]",Fe="[object Set]",Xe="[object String]",Ze="[object Symbol]",ct="[object Undefined]",Ue="[object WeakMap]",et="[object WeakSet]",Ne="[object ArrayBuffer]",Ve="[object DataView]",lt="[object Float32Array]",qe="[object Float64Array]",Pt="[object Int8Array]",Dt="[object Int16Array]",Ut="[object Int32Array]",Ht="[object Uint8Array]",qt="[object Uint8ClampedArray]",Wt="[object Uint16Array]",rr="[object Uint32Array]",qr=/\b__p \+= '';/g,Jt=/\b(__p \+=) '' \+/g,Vr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hi=/&(?:amp|lt|gt|quot|#39);/g,Pi=/[&<>"']/g,ft=RegExp(hi.source),it=RegExp(Pi.source),pt=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,ut=/<%=([\s\S]+?)%>/g,nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/,Rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gt=/[\\^$.*+?()[\]{}|]/g,At=RegExp(gt.source),yt=/^\s+/,wt=/\s/,vt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Tt=/,? & /,Ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Co=/[()=,{}\[\]\/\s]/,$o=/\\(\\)?/g,No=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mr=/\w*$/,Lo=/^[-+]0x[0-9a-f]+$/i,Do=/^0b[01]+$/i,Fo=/^\[object .+?Constructor\]$/,jo=/^0o[0-7]+$/i,qo=/^(?:0|[1-9]\d*)$/,Kr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ki=/($^)/,Mo=/['\n\r\u2028\u2029\\]/g,Vi="\\ud800-\\udfff",zo="\\u0300-\\u036f",Uo="\\ufe20-\\ufe2f",Ki="\\u20d0-\\u20ff",as=zo+Uo+Ki,cs="\\u2700-\\u27bf",Rr="a-z\\xdf-\\xf6\\xf8-\\xff",Ho="\\xac\\xb1\\xd7\\xf7",Bo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ko="\\u2000-\\u206f",Vo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",us="A-Z\\xc0-\\xd6\\xd8-\\xde",hs="\\ufe0e\\ufe0f",Oi=Ho+Bo+ko+Vo,_n="[']",Ri="["+Vi+"]",wn="["+Oi+"]",Ai="["+as+"]",ls="\\d+",Ko="["+cs+"]",fs="["+Rr+"]",ps="[^"+Vi+Oi+ls+cs+Rr+us+"]",Gi="\\ud83c[\\udffb-\\udfff]",Go="(?:"+Ai+"|"+Gi+")",ds="[^"+Vi+"]",Wi="(?:\\ud83c[\\udde6-\\uddff]){2}",li="[\\ud800-\\udbff][\\udc00-\\udfff]",lr="["+us+"]",gs="\\u200d",ys="(?:"+fs+"|"+ps+")",Mr="(?:"+lr+"|"+ps+")",vs="(?:"+_n+"(?:d|ll|m|re|s|t|ve))?",ms="(?:"+_n+"(?:D|LL|M|RE|S|T|VE))?",_s=Go+"?",ws="["+hs+"]?",Wo="(?:"+gs+"(?:"+[ds,Wi,li].join("|")+")"+ws+_s+")*",Gr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Es=ws+_s+Wo,Ji="(?:"+[Ko,Wi,li].join("|")+")"+Es,Jo="(?:"+[ds+Ai+"?",Ai,Wi,li,Ri].join("|")+")",bn=RegExp(_n,"g"),Qo=RegExp(Ai,"g"),Qi=RegExp(Gi+"(?="+Gi+")|"+Jo+Es,"g"),xs=RegExp([lr+"?"+fs+"+"+vs+"(?="+[wn,lr,"$"].join("|")+")",Mr+"+"+ms+"(?="+[wn,lr+ys,"$"].join("|")+")",lr+"?"+ys+"+"+vs,lr+"+"+ms,bs,Gr,ls,Ji].join("|"),"g"),Is=RegExp("["+gs+Vi+as+hs+"]"),Ti=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ss=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yo=-1,Ke={};Ke[lt]=Ke[qe]=Ke[Pt]=Ke[Dt]=Ke[Ut]=Ke[Ht]=Ke[qt]=Ke[Wt]=Ke[rr]=!0,Ke[xe]=Ke[It]=Ke[Ne]=Ke[C]=Ke[Ve]=Ke[R]=Ke[E]=Ke[ee]=Ke[we]=Ke[$e]=Ke[Pe]=Ke[at]=Ke[Fe]=Ke[Xe]=Ke[Ue]=!1;var He={};He[xe]=He[It]=He[Ne]=He[Ve]=He[C]=He[R]=He[lt]=He[qe]=He[Pt]=He[Dt]=He[Ut]=He[we]=He[$e]=He[Pe]=He[at]=He[Fe]=He[Xe]=He[Ze]=He[Ht]=He[qt]=He[Wt]=He[rr]=!0,He[E]=He[ee]=He[Ue]=!1;var v={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},z={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Q={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=parseFloat,ve=parseInt,tt=typeof Gn=="object"&&Gn&&Gn.Object===Object&&Gn,$t=typeof self=="object"&&self&&self.Object===Object&&self,Re=tt||$t||Function("return this")(),We=r&&!r.nodeType&&r,bt=We&&!0&&o&&!o.nodeType&&o,ir=bt&&bt.exports===We,Nt=ir&&tt.process,rt=function(){try{var S=bt&&bt.require&&bt.require("util").types;return S||Nt&&Nt.binding&&Nt.binding("util")}catch{}}(),Qt=rt&&rt.isArrayBuffer,Ar=rt&&rt.isDate,_r=rt&&rt.isMap,zr=rt&&rt.isRegExp,En=rt&&rt.isSet,Ci=rt&&rt.isTypedArray;function Mt(S,L,T){switch(T.length){case 0:return S.call(L);case 1:return S.call(L,T[0]);case 2:return S.call(L,T[0],T[1]);case 3:return S.call(L,T[0],T[1],T[2])}return S.apply(L,T)}function fp(S,L,T,X){for(var de=-1,De=S==null?0:S.length;++de<De;){var Ft=S[de];L(X,Ft,T(Ft),S)}return X}function wr(S,L){for(var T=-1,X=S==null?0:S.length;++T<X&&L(S[T],T,S)!==!1;);return S}function pp(S,L){for(var T=S==null?0:S.length;T--&&L(S[T],T,S)!==!1;);return S}function Xc(S,L){for(var T=-1,X=S==null?0:S.length;++T<X;)if(!L(S[T],T,S))return!1;return!0}function fi(S,L){for(var T=-1,X=S==null?0:S.length,de=0,De=[];++T<X;){var Ft=S[T];L(Ft,T,S)&&(De[de++]=Ft)}return De}function Ps(S,L){var T=S==null?0:S.length;return!!T&&Yi(S,L,0)>-1}function Xo(S,L,T){for(var X=-1,de=S==null?0:S.length;++X<de;)if(T(L,S[X]))return!0;return!1}function st(S,L){for(var T=-1,X=S==null?0:S.length,de=Array(X);++T<X;)de[T]=L(S[T],T,S);return de}function pi(S,L){for(var T=-1,X=L.length,de=S.length;++T<X;)S[de+T]=L[T];return S}function Zo(S,L,T,X){var de=-1,De=S==null?0:S.length;for(X&&De&&(T=S[++de]);++de<De;)T=L(T,S[de],de,S);return T}function dp(S,L,T,X){var de=S==null?0:S.length;for(X&&de&&(T=S[--de]);de--;)T=L(T,S[de],de,S);return T}function ea(S,L){for(var T=-1,X=S==null?0:S.length;++T<X;)if(L(S[T],T,S))return!0;return!1}var gp=ta("length");function yp(S){return S.split("")}function vp(S){return S.match(Ct)||[]}function Zc(S,L,T){var X;return T(S,function(de,De,Ft){if(L(de,De,Ft))return X=De,!1}),X}function Os(S,L,T,X){for(var de=S.length,De=T+(X?1:-1);X?De--:++De<de;)if(L(S[De],De,S))return De;return-1}function Yi(S,L,T){return L===L?Ap(S,L,T):Os(S,eu,T)}function mp(S,L,T,X){for(var de=T-1,De=S.length;++de<De;)if(X(S[de],L))return de;return-1}function eu(S){return S!==S}function tu(S,L){var T=S==null?0:S.length;return T?ia(S,L)/T:k}function ta(S){return function(L){return L==null?t:L[S]}}function ra(S){return function(L){return S==null?t:S[L]}}function ru(S,L,T,X,de){return de(S,function(De,Ft,Je){T=X?(X=!1,De):L(T,De,Ft,Je)}),T}function _p(S,L){var T=S.length;for(S.sort(L);T--;)S[T]=S[T].value;return S}function ia(S,L){for(var T,X=-1,de=S.length;++X<de;){var De=L(S[X]);De!==t&&(T=T===t?De:T+De)}return T}function na(S,L){for(var T=-1,X=Array(S);++T<S;)X[T]=L(T);return X}function wp(S,L){return st(L,function(T){return[T,S[T]]})}function iu(S){return S&&S.slice(0,au(S)+1).replace(yt,"")}function fr(S){return function(L){return S(L)}}function sa(S,L){return st(L,function(T){return S[T]})}function xn(S,L){return S.has(L)}function nu(S,L){for(var T=-1,X=S.length;++T<X&&Yi(L,S[T],0)>-1;);return T}function su(S,L){for(var T=S.length;T--&&Yi(L,S[T],0)>-1;);return T}function bp(S,L){for(var T=S.length,X=0;T--;)S[T]===L&&++X;return X}var Ep=ra(v),xp=ra(I);function Ip(S){return"\\"+Q[S]}function Sp(S,L){return S==null?t:S[L]}function Xi(S){return Is.test(S)}function Pp(S){return Ti.test(S)}function Op(S){for(var L,T=[];!(L=S.next()).done;)T.push(L.value);return T}function oa(S){var L=-1,T=Array(S.size);return S.forEach(function(X,de){T[++L]=[de,X]}),T}function ou(S,L){return function(T){return S(L(T))}}function di(S,L){for(var T=-1,X=S.length,de=0,De=[];++T<X;){var Ft=S[T];(Ft===L||Ft===O)&&(S[T]=O,De[de++]=T)}return De}function Rs(S){var L=-1,T=Array(S.size);return S.forEach(function(X){T[++L]=X}),T}function Rp(S){var L=-1,T=Array(S.size);return S.forEach(function(X){T[++L]=[X,X]}),T}function Ap(S,L,T){for(var X=T-1,de=S.length;++X<de;)if(S[X]===L)return X;return-1}function Tp(S,L,T){for(var X=T+1;X--;)if(S[X]===L)return X;return X}function Zi(S){return Xi(S)?$p(S):gp(S)}function Tr(S){return Xi(S)?Np(S):yp(S)}function au(S){for(var L=S.length;L--&&wt.test(S.charAt(L)););return L}var Cp=ra(z);function $p(S){for(var L=Qi.lastIndex=0;Qi.test(S);)++L;return L}function Np(S){return S.match(Qi)||[]}function Lp(S){return S.match(xs)||[]}var Dp=function S(L){L=L==null?Re:en.defaults(Re.Object(),L,en.pick(Re,Ss));var T=L.Array,X=L.Date,de=L.Error,De=L.Function,Ft=L.Math,Je=L.Object,aa=L.RegExp,Fp=L.String,br=L.TypeError,As=T.prototype,jp=De.prototype,tn=Je.prototype,Ts=L["__core-js_shared__"],Cs=jp.toString,Me=tn.hasOwnProperty,qp=0,cu=function(){var e=/[^.]+$/.exec(Ts&&Ts.keys&&Ts.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),$s=tn.toString,Mp=Cs.call(Je),zp=Re._,Up=aa("^"+Cs.call(Me).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ns=ir?L.Buffer:t,gi=L.Symbol,Ls=L.Uint8Array,uu=Ns?Ns.allocUnsafe:t,Ds=ou(Je.getPrototypeOf,Je),hu=Je.create,lu=tn.propertyIsEnumerable,Fs=As.splice,fu=gi?gi.isConcatSpreadable:t,In=gi?gi.iterator:t,$i=gi?gi.toStringTag:t,js=function(){try{var e=ji(Je,"defineProperty");return e({},"",{}),e}catch{}}(),Hp=L.clearTimeout!==Re.clearTimeout&&L.clearTimeout,Bp=X&&X.now!==Re.Date.now&&X.now,kp=L.setTimeout!==Re.setTimeout&&L.setTimeout,qs=Ft.ceil,Ms=Ft.floor,ca=Je.getOwnPropertySymbols,Vp=Ns?Ns.isBuffer:t,pu=L.isFinite,Kp=As.join,Gp=ou(Je.keys,Je),jt=Ft.max,Vt=Ft.min,Wp=X.now,Jp=L.parseInt,du=Ft.random,Qp=As.reverse,ua=ji(L,"DataView"),Sn=ji(L,"Map"),ha=ji(L,"Promise"),rn=ji(L,"Set"),Pn=ji(L,"WeakMap"),On=ji(Je,"create"),zs=Pn&&new Pn,nn={},Yp=qi(ua),Xp=qi(Sn),Zp=qi(ha),ed=qi(rn),td=qi(Pn),Us=gi?gi.prototype:t,Rn=Us?Us.valueOf:t,gu=Us?Us.toString:t;function d(e){if(mt(e)&&!me(e)&&!(e instanceof Oe)){if(e instanceof Er)return e;if(Me.call(e,"__wrapped__"))return yh(e)}return new Er(e)}var sn=function(){function e(){}return function(i){if(!ht(i))return{};if(hu)return hu(i);e.prototype=i;var a=new e;return e.prototype=t,a}}();function Hs(){}function Er(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}d.templateSettings={escape:pt,evaluate:dt,interpolate:ut,variable:"",imports:{_:d}},d.prototype=Hs.prototype,d.prototype.constructor=d,Er.prototype=sn(Hs.prototype),Er.prototype.constructor=Er;function Oe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function rd(){var e=new Oe(this.__wrapped__);return e.__actions__=nr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nr(this.__views__),e}function id(){if(this.__filtered__){var e=new Oe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function nd(){var e=this.__wrapped__.value(),i=this.__dir__,a=me(e),u=i<0,f=a?e.length:0,g=yg(0,f,this.__views__),w=g.start,b=g.end,P=b-w,j=u?b:w-1,q=this.__iteratees__,B=q.length,J=0,te=Vt(P,this.__takeCount__);if(!a||!u&&f==P&&te==P)return Mu(e,this.__actions__);var oe=[];e:for(;P--&&J<te;){j+=i;for(var be=-1,ae=e[j];++be<B;){var Se=q[be],Ae=Se.iteratee,gr=Se.type,Zt=Ae(ae);if(gr==x)ae=Zt;else if(!Zt){if(gr==m)continue e;break e}}oe[J++]=ae}return oe}Oe.prototype=sn(Hs.prototype),Oe.prototype.constructor=Oe;function Ni(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function sd(){this.__data__=On?On(null):{},this.size=0}function od(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function ad(e){var i=this.__data__;if(On){var a=i[e];return a===_?t:a}return Me.call(i,e)?i[e]:t}function cd(e){var i=this.__data__;return On?i[e]!==t:Me.call(i,e)}function ud(e,i){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=On&&i===t?_:i,this}Ni.prototype.clear=sd,Ni.prototype.delete=od,Ni.prototype.get=ad,Ni.prototype.has=cd,Ni.prototype.set=ud;function Wr(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function hd(){this.__data__=[],this.size=0}function ld(e){var i=this.__data__,a=Bs(i,e);if(a<0)return!1;var u=i.length-1;return a==u?i.pop():Fs.call(i,a,1),--this.size,!0}function fd(e){var i=this.__data__,a=Bs(i,e);return a<0?t:i[a][1]}function pd(e){return Bs(this.__data__,e)>-1}function dd(e,i){var a=this.__data__,u=Bs(a,e);return u<0?(++this.size,a.push([e,i])):a[u][1]=i,this}Wr.prototype.clear=hd,Wr.prototype.delete=ld,Wr.prototype.get=fd,Wr.prototype.has=pd,Wr.prototype.set=dd;function Jr(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function gd(){this.size=0,this.__data__={hash:new Ni,map:new(Sn||Wr),string:new Ni}}function yd(e){var i=to(this,e).delete(e);return this.size-=i?1:0,i}function vd(e){return to(this,e).get(e)}function md(e){return to(this,e).has(e)}function _d(e,i){var a=to(this,e),u=a.size;return a.set(e,i),this.size+=a.size==u?0:1,this}Jr.prototype.clear=gd,Jr.prototype.delete=yd,Jr.prototype.get=vd,Jr.prototype.has=md,Jr.prototype.set=_d;function Li(e){var i=-1,a=e==null?0:e.length;for(this.__data__=new Jr;++i<a;)this.add(e[i])}function wd(e){return this.__data__.set(e,_),this}function bd(e){return this.__data__.has(e)}Li.prototype.add=Li.prototype.push=wd,Li.prototype.has=bd;function Cr(e){var i=this.__data__=new Wr(e);this.size=i.size}function Ed(){this.__data__=new Wr,this.size=0}function xd(e){var i=this.__data__,a=i.delete(e);return this.size=i.size,a}function Id(e){return this.__data__.get(e)}function Sd(e){return this.__data__.has(e)}function Pd(e,i){var a=this.__data__;if(a instanceof Wr){var u=a.__data__;if(!Sn||u.length<s-1)return u.push([e,i]),this.size=++a.size,this;a=this.__data__=new Jr(u)}return a.set(e,i),this.size=a.size,this}Cr.prototype.clear=Ed,Cr.prototype.delete=xd,Cr.prototype.get=Id,Cr.prototype.has=Sd,Cr.prototype.set=Pd;function yu(e,i){var a=me(e),u=!a&&Mi(e),f=!a&&!u&&wi(e),g=!a&&!u&&!f&&un(e),w=a||u||f||g,b=w?na(e.length,Fp):[],P=b.length;for(var j in e)(i||Me.call(e,j))&&!(w&&(j=="length"||f&&(j=="offset"||j=="parent")||g&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||Zr(j,P)))&&b.push(j);return b}function vu(e){var i=e.length;return i?e[ba(0,i-1)]:t}function Od(e,i){return ro(nr(e),Di(i,0,e.length))}function Rd(e){return ro(nr(e))}function la(e,i,a){(a!==t&&!$r(e[i],a)||a===t&&!(i in e))&&Qr(e,i,a)}function An(e,i,a){var u=e[i];(!(Me.call(e,i)&&$r(u,a))||a===t&&!(i in e))&&Qr(e,i,a)}function Bs(e,i){for(var a=e.length;a--;)if($r(e[a][0],i))return a;return-1}function Ad(e,i,a,u){return yi(e,function(f,g,w){i(u,f,a(f),w)}),u}function mu(e,i){return e&&Hr(i,zt(i),e)}function Td(e,i){return e&&Hr(i,or(i),e)}function Qr(e,i,a){i=="__proto__"&&js?js(e,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[i]=a}function fa(e,i){for(var a=-1,u=i.length,f=T(u),g=e==null;++a<u;)f[a]=g?t:Ka(e,i[a]);return f}function Di(e,i,a){return e===e&&(a!==t&&(e=e<=a?e:a),i!==t&&(e=e>=i?e:i)),e}function xr(e,i,a,u,f,g){var w,b=i&F,P=i&A,j=i&M;if(a&&(w=f?a(e,u,f,g):a(e)),w!==t)return w;if(!ht(e))return e;var q=me(e);if(q){if(w=mg(e),!b)return nr(e,w)}else{var B=Kt(e),J=B==ee||B==fe;if(wi(e))return Hu(e,b);if(B==Pe||B==xe||J&&!f){if(w=P||J?{}:ah(e),!b)return P?ag(e,Td(w,e)):og(e,mu(w,e))}else{if(!He[B])return f?e:{};w=_g(e,B,b)}}g||(g=new Cr);var te=g.get(e);if(te)return te;g.set(e,w),Fh(e)?e.forEach(function(ae){w.add(xr(ae,i,a,ae,e,g))}):Lh(e)&&e.forEach(function(ae,Se){w.set(Se,xr(ae,i,a,Se,e,g))});var oe=j?P?$a:Ca:P?or:zt,be=q?t:oe(e);return wr(be||e,function(ae,Se){be&&(Se=ae,ae=e[Se]),An(w,Se,xr(ae,i,a,Se,e,g))}),w}function Cd(e){var i=zt(e);return function(a){return _u(a,e,i)}}function _u(e,i,a){var u=a.length;if(e==null)return!u;for(e=Je(e);u--;){var f=a[u],g=i[f],w=e[f];if(w===t&&!(f in e)||!g(w))return!1}return!0}function wu(e,i,a){if(typeof e!="function")throw new br(l);return Fn(function(){e.apply(t,a)},i)}function Tn(e,i,a,u){var f=-1,g=Ps,w=!0,b=e.length,P=[],j=i.length;if(!b)return P;a&&(i=st(i,fr(a))),u?(g=Xo,w=!1):i.length>=s&&(g=xn,w=!1,i=new Li(i));e:for(;++f<b;){var q=e[f],B=a==null?q:a(q);if(q=u||q!==0?q:0,w&&B===B){for(var J=j;J--;)if(i[J]===B)continue e;P.push(q)}else g(i,B,u)||P.push(q)}return P}var yi=Gu(Ur),bu=Gu(da,!0);function $d(e,i){var a=!0;return yi(e,function(u,f,g){return a=!!i(u,f,g),a}),a}function ks(e,i,a){for(var u=-1,f=e.length;++u<f;){var g=e[u],w=i(g);if(w!=null&&(b===t?w===w&&!dr(w):a(w,b)))var b=w,P=g}return P}function Nd(e,i,a,u){var f=e.length;for(a=_e(a),a<0&&(a=-a>f?0:f+a),u=u===t||u>f?f:_e(u),u<0&&(u+=f),u=a>u?0:qh(u);a<u;)e[a++]=i;return e}function Eu(e,i){var a=[];return yi(e,function(u,f,g){i(u,f,g)&&a.push(u)}),a}function Bt(e,i,a,u,f){var g=-1,w=e.length;for(a||(a=bg),f||(f=[]);++g<w;){var b=e[g];i>0&&a(b)?i>1?Bt(b,i-1,a,u,f):pi(f,b):u||(f[f.length]=b)}return f}var pa=Wu(),xu=Wu(!0);function Ur(e,i){return e&&pa(e,i,zt)}function da(e,i){return e&&xu(e,i,zt)}function Vs(e,i){return fi(i,function(a){return ei(e[a])})}function Fi(e,i){i=mi(i,e);for(var a=0,u=i.length;e!=null&&a<u;)e=e[Br(i[a++])];return a&&a==u?e:t}function Iu(e,i,a){var u=i(e);return me(e)?u:pi(u,a(e))}function Yt(e){return e==null?e===t?ct:Le:$i&&$i in Je(e)?gg(e):Rg(e)}function ga(e,i){return e>i}function Ld(e,i){return e!=null&&Me.call(e,i)}function Dd(e,i){return e!=null&&i in Je(e)}function Fd(e,i,a){return e>=Vt(i,a)&&e<jt(i,a)}function ya(e,i,a){for(var u=a?Xo:Ps,f=e[0].length,g=e.length,w=g,b=T(g),P=1/0,j=[];w--;){var q=e[w];w&&i&&(q=st(q,fr(i))),P=Vt(q.length,P),b[w]=!a&&(i||f>=120&&q.length>=120)?new Li(w&&q):t}q=e[0];var B=-1,J=b[0];e:for(;++B<f&&j.length<P;){var te=q[B],oe=i?i(te):te;if(te=a||te!==0?te:0,!(J?xn(J,oe):u(j,oe,a))){for(w=g;--w;){var be=b[w];if(!(be?xn(be,oe):u(e[w],oe,a)))continue e}J&&J.push(oe),j.push(te)}}return j}function jd(e,i,a,u){return Ur(e,function(f,g,w){i(u,a(f),g,w)}),u}function Cn(e,i,a){i=mi(i,e),e=lh(e,i);var u=e==null?e:e[Br(Sr(i))];return u==null?t:Mt(u,e,a)}function Su(e){return mt(e)&&Yt(e)==xe}function qd(e){return mt(e)&&Yt(e)==Ne}function Md(e){return mt(e)&&Yt(e)==R}function $n(e,i,a,u,f){return e===i?!0:e==null||i==null||!mt(e)&&!mt(i)?e!==e&&i!==i:zd(e,i,a,u,$n,f)}function zd(e,i,a,u,f,g){var w=me(e),b=me(i),P=w?It:Kt(e),j=b?It:Kt(i);P=P==xe?Pe:P,j=j==xe?Pe:j;var q=P==Pe,B=j==Pe,J=P==j;if(J&&wi(e)){if(!wi(i))return!1;w=!0,q=!1}if(J&&!q)return g||(g=new Cr),w||un(e)?nh(e,i,a,u,f,g):pg(e,i,P,a,u,f,g);if(!(a&D)){var te=q&&Me.call(e,"__wrapped__"),oe=B&&Me.call(i,"__wrapped__");if(te||oe){var be=te?e.value():e,ae=oe?i.value():i;return g||(g=new Cr),f(be,ae,a,u,g)}}return J?(g||(g=new Cr),dg(e,i,a,u,f,g)):!1}function Ud(e){return mt(e)&&Kt(e)==we}function va(e,i,a,u){var f=a.length,g=f,w=!u;if(e==null)return!g;for(e=Je(e);f--;){var b=a[f];if(w&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++f<g;){b=a[f];var P=b[0],j=e[P],q=b[1];if(w&&b[2]){if(j===t&&!(P in e))return!1}else{var B=new Cr;if(u)var J=u(j,q,P,e,i,B);if(!(J===t?$n(q,j,D|K,u,B):J))return!1}}return!0}function Pu(e){if(!ht(e)||xg(e))return!1;var i=ei(e)?Up:Fo;return i.test(qi(e))}function Hd(e){return mt(e)&&Yt(e)==at}function Bd(e){return mt(e)&&Kt(e)==Fe}function kd(e){return mt(e)&&co(e.length)&&!!Ke[Yt(e)]}function Ou(e){return typeof e=="function"?e:e==null?ar:typeof e=="object"?me(e)?Tu(e[0],e[1]):Au(e):Jh(e)}function ma(e){if(!Dn(e))return Gp(e);var i=[];for(var a in Je(e))Me.call(e,a)&&a!="constructor"&&i.push(a);return i}function Vd(e){if(!ht(e))return Og(e);var i=Dn(e),a=[];for(var u in e)u=="constructor"&&(i||!Me.call(e,u))||a.push(u);return a}function _a(e,i){return e<i}function Ru(e,i){var a=-1,u=sr(e)?T(e.length):[];return yi(e,function(f,g,w){u[++a]=i(f,g,w)}),u}function Au(e){var i=La(e);return i.length==1&&i[0][2]?uh(i[0][0],i[0][1]):function(a){return a===e||va(a,e,i)}}function Tu(e,i){return Fa(e)&&ch(i)?uh(Br(e),i):function(a){var u=Ka(a,e);return u===t&&u===i?Ga(a,e):$n(i,u,D|K)}}function Ks(e,i,a,u,f){e!==i&&pa(i,function(g,w){if(f||(f=new Cr),ht(g))Kd(e,i,w,a,Ks,u,f);else{var b=u?u(qa(e,w),g,w+"",e,i,f):t;b===t&&(b=g),la(e,w,b)}},or)}function Kd(e,i,a,u,f,g,w){var b=qa(e,a),P=qa(i,a),j=w.get(P);if(j){la(e,a,j);return}var q=g?g(b,P,a+"",e,i,w):t,B=q===t;if(B){var J=me(P),te=!J&&wi(P),oe=!J&&!te&&un(P);q=P,J||te||oe?me(b)?q=b:Et(b)?q=nr(b):te?(B=!1,q=Hu(P,!0)):oe?(B=!1,q=Bu(P,!0)):q=[]:jn(P)||Mi(P)?(q=b,Mi(b)?q=Mh(b):(!ht(b)||ei(b))&&(q=ah(P))):B=!1}B&&(w.set(P,q),f(q,P,u,g,w),w.delete(P)),la(e,a,q)}function Cu(e,i){var a=e.length;if(a)return i+=i<0?a:0,Zr(i,a)?e[i]:t}function $u(e,i,a){i.length?i=st(i,function(g){return me(g)?function(w){return Fi(w,g.length===1?g[0]:g)}:g}):i=[ar];var u=-1;i=st(i,fr(se()));var f=Ru(e,function(g,w,b){var P=st(i,function(j){return j(g)});return{criteria:P,index:++u,value:g}});return _p(f,function(g,w){return sg(g,w,a)})}function Gd(e,i){return Nu(e,i,function(a,u){return Ga(e,u)})}function Nu(e,i,a){for(var u=-1,f=i.length,g={};++u<f;){var w=i[u],b=Fi(e,w);a(b,w)&&Nn(g,mi(w,e),b)}return g}function Wd(e){return function(i){return Fi(i,e)}}function wa(e,i,a,u){var f=u?mp:Yi,g=-1,w=i.length,b=e;for(e===i&&(i=nr(i)),a&&(b=st(e,fr(a)));++g<w;)for(var P=0,j=i[g],q=a?a(j):j;(P=f(b,q,P,u))>-1;)b!==e&&Fs.call(b,P,1),Fs.call(e,P,1);return e}function Lu(e,i){for(var a=e?i.length:0,u=a-1;a--;){var f=i[a];if(a==u||f!==g){var g=f;Zr(f)?Fs.call(e,f,1):Ia(e,f)}}return e}function ba(e,i){return e+Ms(du()*(i-e+1))}function Jd(e,i,a,u){for(var f=-1,g=jt(qs((i-e)/(a||1)),0),w=T(g);g--;)w[u?g:++f]=e,e+=a;return w}function Ea(e,i){var a="";if(!e||i<1||i>V)return a;do i%2&&(a+=e),i=Ms(i/2),i&&(e+=e);while(i);return a}function Ie(e,i){return Ma(hh(e,i,ar),e+"")}function Qd(e){return vu(hn(e))}function Yd(e,i){var a=hn(e);return ro(a,Di(i,0,a.length))}function Nn(e,i,a,u){if(!ht(e))return e;i=mi(i,e);for(var f=-1,g=i.length,w=g-1,b=e;b!=null&&++f<g;){var P=Br(i[f]),j=a;if(P==="__proto__"||P==="constructor"||P==="prototype")return e;if(f!=w){var q=b[P];j=u?u(q,P,b):t,j===t&&(j=ht(q)?q:Zr(i[f+1])?[]:{})}An(b,P,j),b=b[P]}return e}var Du=zs?function(e,i){return zs.set(e,i),e}:ar,Xd=js?function(e,i){return js(e,"toString",{configurable:!0,enumerable:!1,value:Ja(i),writable:!0})}:ar;function Zd(e){return ro(hn(e))}function Ir(e,i,a){var u=-1,f=e.length;i<0&&(i=-i>f?0:f+i),a=a>f?f:a,a<0&&(a+=f),f=i>a?0:a-i>>>0,i>>>=0;for(var g=T(f);++u<f;)g[u]=e[u+i];return g}function eg(e,i){var a;return yi(e,function(u,f,g){return a=i(u,f,g),!a}),!!a}function Gs(e,i,a){var u=0,f=e==null?u:e.length;if(typeof i=="number"&&i===i&&f<=ke){for(;u<f;){var g=u+f>>>1,w=e[g];w!==null&&!dr(w)&&(a?w<=i:w<i)?u=g+1:f=g}return f}return xa(e,i,ar,a)}function xa(e,i,a,u){var f=0,g=e==null?0:e.length;if(g===0)return 0;i=a(i);for(var w=i!==i,b=i===null,P=dr(i),j=i===t;f<g;){var q=Ms((f+g)/2),B=a(e[q]),J=B!==t,te=B===null,oe=B===B,be=dr(B);if(w)var ae=u||oe;else j?ae=oe&&(u||J):b?ae=oe&&J&&(u||!te):P?ae=oe&&J&&!te&&(u||!be):te||be?ae=!1:ae=u?B<=i:B<i;ae?f=q+1:g=q}return Vt(g,Qe)}function Fu(e,i){for(var a=-1,u=e.length,f=0,g=[];++a<u;){var w=e[a],b=i?i(w):w;if(!a||!$r(b,P)){var P=b;g[f++]=w===0?0:w}}return g}function ju(e){return typeof e=="number"?e:dr(e)?k:+e}function pr(e){if(typeof e=="string")return e;if(me(e))return st(e,pr)+"";if(dr(e))return gu?gu.call(e):"";var i=e+"";return i=="0"&&1/e==-ce?"-0":i}function vi(e,i,a){var u=-1,f=Ps,g=e.length,w=!0,b=[],P=b;if(a)w=!1,f=Xo;else if(g>=s){var j=i?null:lg(e);if(j)return Rs(j);w=!1,f=xn,P=new Li}else P=i?[]:b;e:for(;++u<g;){var q=e[u],B=i?i(q):q;if(q=a||q!==0?q:0,w&&B===B){for(var J=P.length;J--;)if(P[J]===B)continue e;i&&P.push(B),b.push(q)}else f(P,B,a)||(P!==b&&P.push(B),b.push(q))}return b}function Ia(e,i){return i=mi(i,e),e=lh(e,i),e==null||delete e[Br(Sr(i))]}function qu(e,i,a,u){return Nn(e,i,a(Fi(e,i)),u)}function Ws(e,i,a,u){for(var f=e.length,g=u?f:-1;(u?g--:++g<f)&&i(e[g],g,e););return a?Ir(e,u?0:g,u?g+1:f):Ir(e,u?g+1:0,u?f:g)}function Mu(e,i){var a=e;return a instanceof Oe&&(a=a.value()),Zo(i,function(u,f){return f.func.apply(f.thisArg,pi([u],f.args))},a)}function Sa(e,i,a){var u=e.length;if(u<2)return u?vi(e[0]):[];for(var f=-1,g=T(u);++f<u;)for(var w=e[f],b=-1;++b<u;)b!=f&&(g[f]=Tn(g[f]||w,e[b],i,a));return vi(Bt(g,1),i,a)}function zu(e,i,a){for(var u=-1,f=e.length,g=i.length,w={};++u<f;){var b=u<g?i[u]:t;a(w,e[u],b)}return w}function Pa(e){return Et(e)?e:[]}function Oa(e){return typeof e=="function"?e:ar}function mi(e,i){return me(e)?e:Fa(e,i)?[e]:gh(je(e))}var tg=Ie;function _i(e,i,a){var u=e.length;return a=a===t?u:a,!i&&a>=u?e:Ir(e,i,a)}var Uu=Hp||function(e){return Re.clearTimeout(e)};function Hu(e,i){if(i)return e.slice();var a=e.length,u=uu?uu(a):new e.constructor(a);return e.copy(u),u}function Ra(e){var i=new e.constructor(e.byteLength);return new Ls(i).set(new Ls(e)),i}function rg(e,i){var a=i?Ra(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function ig(e){var i=new e.constructor(e.source,mr.exec(e));return i.lastIndex=e.lastIndex,i}function ng(e){return Rn?Je(Rn.call(e)):{}}function Bu(e,i){var a=i?Ra(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function ku(e,i){if(e!==i){var a=e!==t,u=e===null,f=e===e,g=dr(e),w=i!==t,b=i===null,P=i===i,j=dr(i);if(!b&&!j&&!g&&e>i||g&&w&&P&&!b&&!j||u&&w&&P||!a&&P||!f)return 1;if(!u&&!g&&!j&&e<i||j&&a&&f&&!u&&!g||b&&a&&f||!w&&f||!P)return-1}return 0}function sg(e,i,a){for(var u=-1,f=e.criteria,g=i.criteria,w=f.length,b=a.length;++u<w;){var P=ku(f[u],g[u]);if(P){if(u>=b)return P;var j=a[u];return P*(j=="desc"?-1:1)}}return e.index-i.index}function Vu(e,i,a,u){for(var f=-1,g=e.length,w=a.length,b=-1,P=i.length,j=jt(g-w,0),q=T(P+j),B=!u;++b<P;)q[b]=i[b];for(;++f<w;)(B||f<g)&&(q[a[f]]=e[f]);for(;j--;)q[b++]=e[f++];return q}function Ku(e,i,a,u){for(var f=-1,g=e.length,w=-1,b=a.length,P=-1,j=i.length,q=jt(g-b,0),B=T(q+j),J=!u;++f<q;)B[f]=e[f];for(var te=f;++P<j;)B[te+P]=i[P];for(;++w<b;)(J||f<g)&&(B[te+a[w]]=e[f++]);return B}function nr(e,i){var a=-1,u=e.length;for(i||(i=T(u));++a<u;)i[a]=e[a];return i}function Hr(e,i,a,u){var f=!a;a||(a={});for(var g=-1,w=i.length;++g<w;){var b=i[g],P=u?u(a[b],e[b],b,a,e):t;P===t&&(P=e[b]),f?Qr(a,b,P):An(a,b,P)}return a}function og(e,i){return Hr(e,Da(e),i)}function ag(e,i){return Hr(e,sh(e),i)}function Js(e,i){return function(a,u){var f=me(a)?fp:Ad,g=i?i():{};return f(a,e,se(u,2),g)}}function on(e){return Ie(function(i,a){var u=-1,f=a.length,g=f>1?a[f-1]:t,w=f>2?a[2]:t;for(g=e.length>3&&typeof g=="function"?(f--,g):t,w&&Xt(a[0],a[1],w)&&(g=f<3?t:g,f=1),i=Je(i);++u<f;){var b=a[u];b&&e(i,b,u,g)}return i})}function Gu(e,i){return function(a,u){if(a==null)return a;if(!sr(a))return e(a,u);for(var f=a.length,g=i?f:-1,w=Je(a);(i?g--:++g<f)&&u(w[g],g,w)!==!1;);return a}}function Wu(e){return function(i,a,u){for(var f=-1,g=Je(i),w=u(i),b=w.length;b--;){var P=w[e?b:++f];if(a(g[P],P,g)===!1)break}return i}}function cg(e,i,a){var u=i&ie,f=Ln(e);function g(){var w=this&&this!==Re&&this instanceof g?f:e;return w.apply(u?a:this,arguments)}return g}function Ju(e){return function(i){i=je(i);var a=Xi(i)?Tr(i):t,u=a?a[0]:i.charAt(0),f=a?_i(a,1).join(""):i.slice(1);return u[e]()+f}}function an(e){return function(i){return Zo(Gh(Kh(i).replace(bn,"")),e,"")}}function Ln(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=sn(e.prototype),u=e.apply(a,i);return ht(u)?u:a}}function ug(e,i,a){var u=Ln(e);function f(){for(var g=arguments.length,w=T(g),b=g,P=cn(f);b--;)w[b]=arguments[b];var j=g<3&&w[0]!==P&&w[g-1]!==P?[]:di(w,P);if(g-=j.length,g<a)return eh(e,i,Qs,f.placeholder,t,w,j,t,t,a-g);var q=this&&this!==Re&&this instanceof f?u:e;return Mt(q,this,w)}return f}function Qu(e){return function(i,a,u){var f=Je(i);if(!sr(i)){var g=se(a,3);i=zt(i),a=function(b){return g(f[b],b,f)}}var w=e(i,a,u);return w>-1?f[g?i[w]:w]:t}}function Yu(e){return Xr(function(i){var a=i.length,u=a,f=Er.prototype.thru;for(e&&i.reverse();u--;){var g=i[u];if(typeof g!="function")throw new br(l);if(f&&!w&&eo(g)=="wrapper")var w=new Er([],!0)}for(u=w?u:a;++u<a;){g=i[u];var b=eo(g),P=b=="wrapper"?Na(g):t;P&&ja(P[0])&&P[1]==(U|pe|le|W)&&!P[4].length&&P[9]==1?w=w[eo(P[0])].apply(w,P[3]):w=g.length==1&&ja(g)?w[b]():w.thru(g)}return function(){var j=arguments,q=j[0];if(w&&j.length==1&&me(q))return w.plant(q).value();for(var B=0,J=a?i[B].apply(this,j):q;++B<a;)J=i[B].call(this,J);return J}})}function Qs(e,i,a,u,f,g,w,b,P,j){var q=i&U,B=i&ie,J=i&Ee,te=i&(pe|he),oe=i&ye,be=J?t:Ln(e);function ae(){for(var Se=arguments.length,Ae=T(Se),gr=Se;gr--;)Ae[gr]=arguments[gr];if(te)var Zt=cn(ae),yr=bp(Ae,Zt);if(u&&(Ae=Vu(Ae,u,f,te)),g&&(Ae=Ku(Ae,g,w,te)),Se-=yr,te&&Se<j){var xt=di(Ae,Zt);return eh(e,i,Qs,ae.placeholder,a,Ae,xt,b,P,j-Se)}var Nr=B?a:this,ri=J?Nr[e]:e;return Se=Ae.length,b?Ae=Ag(Ae,b):oe&&Se>1&&Ae.reverse(),q&&P<Se&&(Ae.length=P),this&&this!==Re&&this instanceof ae&&(ri=be||Ln(ri)),ri.apply(Nr,Ae)}return ae}function Xu(e,i){return function(a,u){return jd(a,e,i(u),{})}}function Ys(e,i){return function(a,u){var f;if(a===t&&u===t)return i;if(a!==t&&(f=a),u!==t){if(f===t)return u;typeof a=="string"||typeof u=="string"?(a=pr(a),u=pr(u)):(a=ju(a),u=ju(u)),f=e(a,u)}return f}}function Aa(e){return Xr(function(i){return i=st(i,fr(se())),Ie(function(a){var u=this;return e(i,function(f){return Mt(f,u,a)})})})}function Xs(e,i){i=i===t?" ":pr(i);var a=i.length;if(a<2)return a?Ea(i,e):i;var u=Ea(i,qs(e/Zi(i)));return Xi(i)?_i(Tr(u),0,e).join(""):u.slice(0,e)}function hg(e,i,a,u){var f=i&ie,g=Ln(e);function w(){for(var b=-1,P=arguments.length,j=-1,q=u.length,B=T(q+P),J=this&&this!==Re&&this instanceof w?g:e;++j<q;)B[j]=u[j];for(;P--;)B[j++]=arguments[++b];return Mt(J,f?a:this,B)}return w}function Zu(e){return function(i,a,u){return u&&typeof u!="number"&&Xt(i,a,u)&&(a=u=t),i=ti(i),a===t?(a=i,i=0):a=ti(a),u=u===t?i<a?1:-1:ti(u),Jd(i,a,u,e)}}function Zs(e){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Pr(i),a=Pr(a)),e(i,a)}}function eh(e,i,a,u,f,g,w,b,P,j){var q=i&pe,B=q?w:t,J=q?t:w,te=q?g:t,oe=q?t:g;i|=q?le:N,i&=~(q?N:le),i&ge||(i&=~(ie|Ee));var be=[e,i,f,te,B,oe,J,b,P,j],ae=a.apply(t,be);return ja(e)&&fh(ae,be),ae.placeholder=u,ph(ae,e,i)}function Ta(e){var i=Ft[e];return function(a,u){if(a=Pr(a),u=u==null?0:Vt(_e(u),292),u&&pu(a)){var f=(je(a)+"e").split("e"),g=i(f[0]+"e"+(+f[1]+u));return f=(je(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return i(a)}}var lg=rn&&1/Rs(new rn([,-0]))[1]==ce?function(e){return new rn(e)}:Xa;function th(e){return function(i){var a=Kt(i);return a==we?oa(i):a==Fe?Rp(i):wp(i,e(i))}}function Yr(e,i,a,u,f,g,w,b){var P=i&Ee;if(!P&&typeof e!="function")throw new br(l);var j=u?u.length:0;if(j||(i&=~(le|N),u=f=t),w=w===t?w:jt(_e(w),0),b=b===t?b:_e(b),j-=f?f.length:0,i&N){var q=u,B=f;u=f=t}var J=P?t:Na(e),te=[e,i,a,u,f,q,B,g,w,b];if(J&&Pg(te,J),e=te[0],i=te[1],a=te[2],u=te[3],f=te[4],b=te[9]=te[9]===t?P?0:e.length:jt(te[9]-j,0),!b&&i&(pe|he)&&(i&=~(pe|he)),!i||i==ie)var oe=cg(e,i,a);else i==pe||i==he?oe=ug(e,i,b):(i==le||i==(ie|le))&&!f.length?oe=hg(e,i,a,u):oe=Qs.apply(t,te);var be=J?Du:fh;return ph(be(oe,te),e,i)}function rh(e,i,a,u){return e===t||$r(e,tn[a])&&!Me.call(u,a)?i:e}function ih(e,i,a,u,f,g){return ht(e)&&ht(i)&&(g.set(i,e),Ks(e,i,t,ih,g),g.delete(i)),e}function fg(e){return jn(e)?t:e}function nh(e,i,a,u,f,g){var w=a&D,b=e.length,P=i.length;if(b!=P&&!(w&&P>b))return!1;var j=g.get(e),q=g.get(i);if(j&&q)return j==i&&q==e;var B=-1,J=!0,te=a&K?new Li:t;for(g.set(e,i),g.set(i,e);++B<b;){var oe=e[B],be=i[B];if(u)var ae=w?u(be,oe,B,i,e,g):u(oe,be,B,e,i,g);if(ae!==t){if(ae)continue;J=!1;break}if(te){if(!ea(i,function(Se,Ae){if(!xn(te,Ae)&&(oe===Se||f(oe,Se,a,u,g)))return te.push(Ae)})){J=!1;break}}else if(!(oe===be||f(oe,be,a,u,g))){J=!1;break}}return g.delete(e),g.delete(i),J}function pg(e,i,a,u,f,g,w){switch(a){case Ve:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Ne:return!(e.byteLength!=i.byteLength||!g(new Ls(e),new Ls(i)));case C:case R:case $e:return $r(+e,+i);case E:return e.name==i.name&&e.message==i.message;case at:case Xe:return e==i+"";case we:var b=oa;case Fe:var P=u&D;if(b||(b=Rs),e.size!=i.size&&!P)return!1;var j=w.get(e);if(j)return j==i;u|=K,w.set(e,i);var q=nh(b(e),b(i),u,f,g,w);return w.delete(e),q;case Ze:if(Rn)return Rn.call(e)==Rn.call(i)}return!1}function dg(e,i,a,u,f,g){var w=a&D,b=Ca(e),P=b.length,j=Ca(i),q=j.length;if(P!=q&&!w)return!1;for(var B=P;B--;){var J=b[B];if(!(w?J in i:Me.call(i,J)))return!1}var te=g.get(e),oe=g.get(i);if(te&&oe)return te==i&&oe==e;var be=!0;g.set(e,i),g.set(i,e);for(var ae=w;++B<P;){J=b[B];var Se=e[J],Ae=i[J];if(u)var gr=w?u(Ae,Se,J,i,e,g):u(Se,Ae,J,e,i,g);if(!(gr===t?Se===Ae||f(Se,Ae,a,u,g):gr)){be=!1;break}ae||(ae=J=="constructor")}if(be&&!ae){var Zt=e.constructor,yr=i.constructor;Zt!=yr&&"constructor"in e&&"constructor"in i&&!(typeof Zt=="function"&&Zt instanceof Zt&&typeof yr=="function"&&yr instanceof yr)&&(be=!1)}return g.delete(e),g.delete(i),be}function Xr(e){return Ma(hh(e,t,_h),e+"")}function Ca(e){return Iu(e,zt,Da)}function $a(e){return Iu(e,or,sh)}var Na=zs?function(e){return zs.get(e)}:Xa;function eo(e){for(var i=e.name+"",a=nn[i],u=Me.call(nn,i)?a.length:0;u--;){var f=a[u],g=f.func;if(g==null||g==e)return f.name}return i}function cn(e){var i=Me.call(d,"placeholder")?d:e;return i.placeholder}function se(){var e=d.iteratee||Qa;return e=e===Qa?Ou:e,arguments.length?e(arguments[0],arguments[1]):e}function to(e,i){var a=e.__data__;return Eg(i)?a[typeof i=="string"?"string":"hash"]:a.map}function La(e){for(var i=zt(e),a=i.length;a--;){var u=i[a],f=e[u];i[a]=[u,f,ch(f)]}return i}function ji(e,i){var a=Sp(e,i);return Pu(a)?a:t}function gg(e){var i=Me.call(e,$i),a=e[$i];try{e[$i]=t;var u=!0}catch{}var f=$s.call(e);return u&&(i?e[$i]=a:delete e[$i]),f}var Da=ca?function(e){return e==null?[]:(e=Je(e),fi(ca(e),function(i){return lu.call(e,i)}))}:Za,sh=ca?function(e){for(var i=[];e;)pi(i,Da(e)),e=Ds(e);return i}:Za,Kt=Yt;(ua&&Kt(new ua(new ArrayBuffer(1)))!=Ve||Sn&&Kt(new Sn)!=we||ha&&Kt(ha.resolve())!=St||rn&&Kt(new rn)!=Fe||Pn&&Kt(new Pn)!=Ue)&&(Kt=function(e){var i=Yt(e),a=i==Pe?e.constructor:t,u=a?qi(a):"";if(u)switch(u){case Yp:return Ve;case Xp:return we;case Zp:return St;case ed:return Fe;case td:return Ue}return i});function yg(e,i,a){for(var u=-1,f=a.length;++u<f;){var g=a[u],w=g.size;switch(g.type){case"drop":e+=w;break;case"dropRight":i-=w;break;case"take":i=Vt(i,e+w);break;case"takeRight":e=jt(e,i-w);break}}return{start:e,end:i}}function vg(e){var i=e.match(Ye);return i?i[1].split(Tt):[]}function oh(e,i,a){i=mi(i,e);for(var u=-1,f=i.length,g=!1;++u<f;){var w=Br(i[u]);if(!(g=e!=null&&a(e,w)))break;e=e[w]}return g||++u!=f?g:(f=e==null?0:e.length,!!f&&co(f)&&Zr(w,f)&&(me(e)||Mi(e)))}function mg(e){var i=e.length,a=new e.constructor(i);return i&&typeof e[0]=="string"&&Me.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function ah(e){return typeof e.constructor=="function"&&!Dn(e)?sn(Ds(e)):{}}function _g(e,i,a){var u=e.constructor;switch(i){case Ne:return Ra(e);case C:case R:return new u(+e);case Ve:return rg(e,a);case lt:case qe:case Pt:case Dt:case Ut:case Ht:case qt:case Wt:case rr:return Bu(e,a);case we:return new u;case $e:case Xe:return new u(e);case at:return ig(e);case Fe:return new u;case Ze:return ng(e)}}function wg(e,i){var a=i.length;if(!a)return e;var u=a-1;return i[u]=(a>1?"& ":"")+i[u],i=i.join(a>2?", ":" "),e.replace(vt,`{
/* [wrapped with `+i+`] */
`)}function bg(e){return me(e)||Mi(e)||!!(fu&&e&&e[fu])}function Zr(e,i){var a=typeof e;return i=i??V,!!i&&(a=="number"||a!="symbol"&&qo.test(e))&&e>-1&&e%1==0&&e<i}function Xt(e,i,a){if(!ht(a))return!1;var u=typeof i;return(u=="number"?sr(a)&&Zr(i,a.length):u=="string"&&i in a)?$r(a[i],e):!1}function Fa(e,i){if(me(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||dr(e)?!0:Ot.test(e)||!nt.test(e)||i!=null&&e in Je(i)}function Eg(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function ja(e){var i=eo(e),a=d[i];if(typeof a!="function"||!(i in Oe.prototype))return!1;if(e===a)return!0;var u=Na(a);return!!u&&e===u[0]}function xg(e){return!!cu&&cu in e}var Ig=Ts?ei:ec;function Dn(e){var i=e&&e.constructor,a=typeof i=="function"&&i.prototype||tn;return e===a}function ch(e){return e===e&&!ht(e)}function uh(e,i){return function(a){return a==null?!1:a[e]===i&&(i!==t||e in Je(a))}}function Sg(e){var i=oo(e,function(u){return a.size===y&&a.clear(),u}),a=i.cache;return i}function Pg(e,i){var a=e[1],u=i[1],f=a|u,g=f<(ie|Ee|U),w=u==U&&a==pe||u==U&&a==W&&e[7].length<=i[8]||u==(U|W)&&i[7].length<=i[8]&&a==pe;if(!(g||w))return e;u&ie&&(e[2]=i[2],f|=a&ie?0:ge);var b=i[3];if(b){var P=e[3];e[3]=P?Vu(P,b,i[4]):b,e[4]=P?di(e[3],O):i[4]}return b=i[5],b&&(P=e[5],e[5]=P?Ku(P,b,i[6]):b,e[6]=P?di(e[5],O):i[6]),b=i[7],b&&(e[7]=b),u&U&&(e[8]=e[8]==null?i[8]:Vt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=f,e}function Og(e){var i=[];if(e!=null)for(var a in Je(e))i.push(a);return i}function Rg(e){return $s.call(e)}function hh(e,i,a){return i=jt(i===t?e.length-1:i,0),function(){for(var u=arguments,f=-1,g=jt(u.length-i,0),w=T(g);++f<g;)w[f]=u[i+f];f=-1;for(var b=T(i+1);++f<i;)b[f]=u[f];return b[i]=a(w),Mt(e,this,b)}}function lh(e,i){return i.length<2?e:Fi(e,Ir(i,0,-1))}function Ag(e,i){for(var a=e.length,u=Vt(i.length,a),f=nr(e);u--;){var g=i[u];e[u]=Zr(g,a)?f[g]:t}return e}function qa(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var fh=dh(Du),Fn=kp||function(e,i){return Re.setTimeout(e,i)},Ma=dh(Xd);function ph(e,i,a){var u=i+"";return Ma(e,wg(u,Tg(vg(u),a)))}function dh(e){var i=0,a=0;return function(){var u=Wp(),f=ze-(u-a);if(a=u,f>0){if(++i>=Ce)return arguments[0]}else i=0;return e.apply(t,arguments)}}function ro(e,i){var a=-1,u=e.length,f=u-1;for(i=i===t?u:i;++a<i;){var g=ba(a,f),w=e[g];e[g]=e[a],e[a]=w}return e.length=i,e}var gh=Sg(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Rt,function(a,u,f,g){i.push(f?g.replace($o,"$1"):u||a)}),i});function Br(e){if(typeof e=="string"||dr(e))return e;var i=e+"";return i=="0"&&1/e==-ce?"-0":i}function qi(e){if(e!=null){try{return Cs.call(e)}catch{}try{return e+""}catch{}}return""}function Tg(e,i){return wr(jr,function(a){var u="_."+a[0];i&a[1]&&!Ps(e,u)&&e.push(u)}),e.sort()}function yh(e){if(e instanceof Oe)return e.clone();var i=new Er(e.__wrapped__,e.__chain__);return i.__actions__=nr(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function Cg(e,i,a){(a?Xt(e,i,a):i===t)?i=1:i=jt(_e(i),0);var u=e==null?0:e.length;if(!u||i<1)return[];for(var f=0,g=0,w=T(qs(u/i));f<u;)w[g++]=Ir(e,f,f+=i);return w}function $g(e){for(var i=-1,a=e==null?0:e.length,u=0,f=[];++i<a;){var g=e[i];g&&(f[u++]=g)}return f}function Ng(){var e=arguments.length;if(!e)return[];for(var i=T(e-1),a=arguments[0],u=e;u--;)i[u-1]=arguments[u];return pi(me(a)?nr(a):[a],Bt(i,1))}var Lg=Ie(function(e,i){return Et(e)?Tn(e,Bt(i,1,Et,!0)):[]}),Dg=Ie(function(e,i){var a=Sr(i);return Et(a)&&(a=t),Et(e)?Tn(e,Bt(i,1,Et,!0),se(a,2)):[]}),Fg=Ie(function(e,i){var a=Sr(i);return Et(a)&&(a=t),Et(e)?Tn(e,Bt(i,1,Et,!0),t,a):[]});function jg(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===t?1:_e(i),Ir(e,i<0?0:i,u)):[]}function qg(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===t?1:_e(i),i=u-i,Ir(e,0,i<0?0:i)):[]}function Mg(e,i){return e&&e.length?Ws(e,se(i,3),!0,!0):[]}function zg(e,i){return e&&e.length?Ws(e,se(i,3),!0):[]}function Ug(e,i,a,u){var f=e==null?0:e.length;return f?(a&&typeof a!="number"&&Xt(e,i,a)&&(a=0,u=f),Nd(e,i,a,u)):[]}function vh(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var f=a==null?0:_e(a);return f<0&&(f=jt(u+f,0)),Os(e,se(i,3),f)}function mh(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var f=u-1;return a!==t&&(f=_e(a),f=a<0?jt(u+f,0):Vt(f,u-1)),Os(e,se(i,3),f,!0)}function _h(e){var i=e==null?0:e.length;return i?Bt(e,1):[]}function Hg(e){var i=e==null?0:e.length;return i?Bt(e,ce):[]}function Bg(e,i){var a=e==null?0:e.length;return a?(i=i===t?1:_e(i),Bt(e,i)):[]}function kg(e){for(var i=-1,a=e==null?0:e.length,u={};++i<a;){var f=e[i];u[f[0]]=f[1]}return u}function wh(e){return e&&e.length?e[0]:t}function Vg(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var f=a==null?0:_e(a);return f<0&&(f=jt(u+f,0)),Yi(e,i,f)}function Kg(e){var i=e==null?0:e.length;return i?Ir(e,0,-1):[]}var Gg=Ie(function(e){var i=st(e,Pa);return i.length&&i[0]===e[0]?ya(i):[]}),Wg=Ie(function(e){var i=Sr(e),a=st(e,Pa);return i===Sr(a)?i=t:a.pop(),a.length&&a[0]===e[0]?ya(a,se(i,2)):[]}),Jg=Ie(function(e){var i=Sr(e),a=st(e,Pa);return i=typeof i=="function"?i:t,i&&a.pop(),a.length&&a[0]===e[0]?ya(a,t,i):[]});function Qg(e,i){return e==null?"":Kp.call(e,i)}function Sr(e){var i=e==null?0:e.length;return i?e[i-1]:t}function Yg(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var f=u;return a!==t&&(f=_e(a),f=f<0?jt(u+f,0):Vt(f,u-1)),i===i?Tp(e,i,f):Os(e,eu,f,!0)}function Xg(e,i){return e&&e.length?Cu(e,_e(i)):t}var Zg=Ie(bh);function bh(e,i){return e&&e.length&&i&&i.length?wa(e,i):e}function ey(e,i,a){return e&&e.length&&i&&i.length?wa(e,i,se(a,2)):e}function ty(e,i,a){return e&&e.length&&i&&i.length?wa(e,i,t,a):e}var ry=Xr(function(e,i){var a=e==null?0:e.length,u=fa(e,i);return Lu(e,st(i,function(f){return Zr(f,a)?+f:f}).sort(ku)),u});function iy(e,i){var a=[];if(!(e&&e.length))return a;var u=-1,f=[],g=e.length;for(i=se(i,3);++u<g;){var w=e[u];i(w,u,e)&&(a.push(w),f.push(u))}return Lu(e,f),a}function za(e){return e==null?e:Qp.call(e)}function ny(e,i,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&Xt(e,i,a)?(i=0,a=u):(i=i==null?0:_e(i),a=a===t?u:_e(a)),Ir(e,i,a)):[]}function sy(e,i){return Gs(e,i)}function oy(e,i,a){return xa(e,i,se(a,2))}function ay(e,i){var a=e==null?0:e.length;if(a){var u=Gs(e,i);if(u<a&&$r(e[u],i))return u}return-1}function cy(e,i){return Gs(e,i,!0)}function uy(e,i,a){return xa(e,i,se(a,2),!0)}function hy(e,i){var a=e==null?0:e.length;if(a){var u=Gs(e,i,!0)-1;if($r(e[u],i))return u}return-1}function ly(e){return e&&e.length?Fu(e):[]}function fy(e,i){return e&&e.length?Fu(e,se(i,2)):[]}function py(e){var i=e==null?0:e.length;return i?Ir(e,1,i):[]}function dy(e,i,a){return e&&e.length?(i=a||i===t?1:_e(i),Ir(e,0,i<0?0:i)):[]}function gy(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===t?1:_e(i),i=u-i,Ir(e,i<0?0:i,u)):[]}function yy(e,i){return e&&e.length?Ws(e,se(i,3),!1,!0):[]}function vy(e,i){return e&&e.length?Ws(e,se(i,3)):[]}var my=Ie(function(e){return vi(Bt(e,1,Et,!0))}),_y=Ie(function(e){var i=Sr(e);return Et(i)&&(i=t),vi(Bt(e,1,Et,!0),se(i,2))}),wy=Ie(function(e){var i=Sr(e);return i=typeof i=="function"?i:t,vi(Bt(e,1,Et,!0),t,i)});function by(e){return e&&e.length?vi(e):[]}function Ey(e,i){return e&&e.length?vi(e,se(i,2)):[]}function xy(e,i){return i=typeof i=="function"?i:t,e&&e.length?vi(e,t,i):[]}function Ua(e){if(!(e&&e.length))return[];var i=0;return e=fi(e,function(a){if(Et(a))return i=jt(a.length,i),!0}),na(i,function(a){return st(e,ta(a))})}function Eh(e,i){if(!(e&&e.length))return[];var a=Ua(e);return i==null?a:st(a,function(u){return Mt(i,t,u)})}var Iy=Ie(function(e,i){return Et(e)?Tn(e,i):[]}),Sy=Ie(function(e){return Sa(fi(e,Et))}),Py=Ie(function(e){var i=Sr(e);return Et(i)&&(i=t),Sa(fi(e,Et),se(i,2))}),Oy=Ie(function(e){var i=Sr(e);return i=typeof i=="function"?i:t,Sa(fi(e,Et),t,i)}),Ry=Ie(Ua);function Ay(e,i){return zu(e||[],i||[],An)}function Ty(e,i){return zu(e||[],i||[],Nn)}var Cy=Ie(function(e){var i=e.length,a=i>1?e[i-1]:t;return a=typeof a=="function"?(e.pop(),a):t,Eh(e,a)});function xh(e){var i=d(e);return i.__chain__=!0,i}function $y(e,i){return i(e),e}function io(e,i){return i(e)}var Ny=Xr(function(e){var i=e.length,a=i?e[0]:0,u=this.__wrapped__,f=function(g){return fa(g,e)};return i>1||this.__actions__.length||!(u instanceof Oe)||!Zr(a)?this.thru(f):(u=u.slice(a,+a+(i?1:0)),u.__actions__.push({func:io,args:[f],thisArg:t}),new Er(u,this.__chain__).thru(function(g){return i&&!g.length&&g.push(t),g}))});function Ly(){return xh(this)}function Dy(){return new Er(this.value(),this.__chain__)}function Fy(){this.__values__===t&&(this.__values__=jh(this.value()));var e=this.__index__>=this.__values__.length,i=e?t:this.__values__[this.__index__++];return{done:e,value:i}}function jy(){return this}function qy(e){for(var i,a=this;a instanceof Hs;){var u=yh(a);u.__index__=0,u.__values__=t,i?f.__wrapped__=u:i=u;var f=u;a=a.__wrapped__}return f.__wrapped__=e,i}function My(){var e=this.__wrapped__;if(e instanceof Oe){var i=e;return this.__actions__.length&&(i=new Oe(this)),i=i.reverse(),i.__actions__.push({func:io,args:[za],thisArg:t}),new Er(i,this.__chain__)}return this.thru(za)}function zy(){return Mu(this.__wrapped__,this.__actions__)}var Uy=Js(function(e,i,a){Me.call(e,a)?++e[a]:Qr(e,a,1)});function Hy(e,i,a){var u=me(e)?Xc:$d;return a&&Xt(e,i,a)&&(i=t),u(e,se(i,3))}function By(e,i){var a=me(e)?fi:Eu;return a(e,se(i,3))}var ky=Qu(vh),Vy=Qu(mh);function Ky(e,i){return Bt(no(e,i),1)}function Gy(e,i){return Bt(no(e,i),ce)}function Wy(e,i,a){return a=a===t?1:_e(a),Bt(no(e,i),a)}function Ih(e,i){var a=me(e)?wr:yi;return a(e,se(i,3))}function Sh(e,i){var a=me(e)?pp:bu;return a(e,se(i,3))}var Jy=Js(function(e,i,a){Me.call(e,a)?e[a].push(i):Qr(e,a,[i])});function Qy(e,i,a,u){e=sr(e)?e:hn(e),a=a&&!u?_e(a):0;var f=e.length;return a<0&&(a=jt(f+a,0)),uo(e)?a<=f&&e.indexOf(i,a)>-1:!!f&&Yi(e,i,a)>-1}var Yy=Ie(function(e,i,a){var u=-1,f=typeof i=="function",g=sr(e)?T(e.length):[];return yi(e,function(w){g[++u]=f?Mt(i,w,a):Cn(w,i,a)}),g}),Xy=Js(function(e,i,a){Qr(e,a,i)});function no(e,i){var a=me(e)?st:Ru;return a(e,se(i,3))}function Zy(e,i,a,u){return e==null?[]:(me(i)||(i=i==null?[]:[i]),a=u?t:a,me(a)||(a=a==null?[]:[a]),$u(e,i,a))}var ev=Js(function(e,i,a){e[a?0:1].push(i)},function(){return[[],[]]});function tv(e,i,a){var u=me(e)?Zo:ru,f=arguments.length<3;return u(e,se(i,4),a,f,yi)}function rv(e,i,a){var u=me(e)?dp:ru,f=arguments.length<3;return u(e,se(i,4),a,f,bu)}function iv(e,i){var a=me(e)?fi:Eu;return a(e,ao(se(i,3)))}function nv(e){var i=me(e)?vu:Qd;return i(e)}function sv(e,i,a){(a?Xt(e,i,a):i===t)?i=1:i=_e(i);var u=me(e)?Od:Yd;return u(e,i)}function ov(e){var i=me(e)?Rd:Zd;return i(e)}function av(e){if(e==null)return 0;if(sr(e))return uo(e)?Zi(e):e.length;var i=Kt(e);return i==we||i==Fe?e.size:ma(e).length}function cv(e,i,a){var u=me(e)?ea:eg;return a&&Xt(e,i,a)&&(i=t),u(e,se(i,3))}var uv=Ie(function(e,i){if(e==null)return[];var a=i.length;return a>1&&Xt(e,i[0],i[1])?i=[]:a>2&&Xt(i[0],i[1],i[2])&&(i=[i[0]]),$u(e,Bt(i,1),[])}),so=Bp||function(){return Re.Date.now()};function hv(e,i){if(typeof i!="function")throw new br(l);return e=_e(e),function(){if(--e<1)return i.apply(this,arguments)}}function Ph(e,i,a){return i=a?t:i,i=e&&i==null?e.length:i,Yr(e,U,t,t,t,t,i)}function Oh(e,i){var a;if(typeof i!="function")throw new br(l);return e=_e(e),function(){return--e>0&&(a=i.apply(this,arguments)),e<=1&&(i=t),a}}var Ha=Ie(function(e,i,a){var u=ie;if(a.length){var f=di(a,cn(Ha));u|=le}return Yr(e,u,i,a,f)}),Rh=Ie(function(e,i,a){var u=ie|Ee;if(a.length){var f=di(a,cn(Rh));u|=le}return Yr(i,u,e,a,f)});function Ah(e,i,a){i=a?t:i;var u=Yr(e,pe,t,t,t,t,t,i);return u.placeholder=Ah.placeholder,u}function Th(e,i,a){i=a?t:i;var u=Yr(e,he,t,t,t,t,t,i);return u.placeholder=Th.placeholder,u}function Ch(e,i,a){var u,f,g,w,b,P,j=0,q=!1,B=!1,J=!0;if(typeof e!="function")throw new br(l);i=Pr(i)||0,ht(a)&&(q=!!a.leading,B="maxWait"in a,g=B?jt(Pr(a.maxWait)||0,i):g,J="trailing"in a?!!a.trailing:J);function te(xt){var Nr=u,ri=f;return u=f=t,j=xt,w=e.apply(ri,Nr),w}function oe(xt){return j=xt,b=Fn(Se,i),q?te(xt):w}function be(xt){var Nr=xt-P,ri=xt-j,Qh=i-Nr;return B?Vt(Qh,g-ri):Qh}function ae(xt){var Nr=xt-P,ri=xt-j;return P===t||Nr>=i||Nr<0||B&&ri>=g}function Se(){var xt=so();if(ae(xt))return Ae(xt);b=Fn(Se,be(xt))}function Ae(xt){return b=t,J&&u?te(xt):(u=f=t,w)}function gr(){b!==t&&Uu(b),j=0,u=P=f=b=t}function Zt(){return b===t?w:Ae(so())}function yr(){var xt=so(),Nr=ae(xt);if(u=arguments,f=this,P=xt,Nr){if(b===t)return oe(P);if(B)return Uu(b),b=Fn(Se,i),te(P)}return b===t&&(b=Fn(Se,i)),w}return yr.cancel=gr,yr.flush=Zt,yr}var lv=Ie(function(e,i){return wu(e,1,i)}),fv=Ie(function(e,i,a){return wu(e,Pr(i)||0,a)});function pv(e){return Yr(e,ye)}function oo(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new br(l);var a=function(){var u=arguments,f=i?i.apply(this,u):u[0],g=a.cache;if(g.has(f))return g.get(f);var w=e.apply(this,u);return a.cache=g.set(f,w)||g,w};return a.cache=new(oo.Cache||Jr),a}oo.Cache=Jr;function ao(e){if(typeof e!="function")throw new br(l);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function dv(e){return Oh(2,e)}var gv=tg(function(e,i){i=i.length==1&&me(i[0])?st(i[0],fr(se())):st(Bt(i,1),fr(se()));var a=i.length;return Ie(function(u){for(var f=-1,g=Vt(u.length,a);++f<g;)u[f]=i[f].call(this,u[f]);return Mt(e,this,u)})}),Ba=Ie(function(e,i){var a=di(i,cn(Ba));return Yr(e,le,t,i,a)}),$h=Ie(function(e,i){var a=di(i,cn($h));return Yr(e,N,t,i,a)}),yv=Xr(function(e,i){return Yr(e,W,t,t,t,i)});function vv(e,i){if(typeof e!="function")throw new br(l);return i=i===t?i:_e(i),Ie(e,i)}function mv(e,i){if(typeof e!="function")throw new br(l);return i=i==null?0:jt(_e(i),0),Ie(function(a){var u=a[i],f=_i(a,0,i);return u&&pi(f,u),Mt(e,this,f)})}function _v(e,i,a){var u=!0,f=!0;if(typeof e!="function")throw new br(l);return ht(a)&&(u="leading"in a?!!a.leading:u,f="trailing"in a?!!a.trailing:f),Ch(e,i,{leading:u,maxWait:i,trailing:f})}function wv(e){return Ph(e,1)}function bv(e,i){return Ba(Oa(i),e)}function Ev(){if(!arguments.length)return[];var e=arguments[0];return me(e)?e:[e]}function xv(e){return xr(e,M)}function Iv(e,i){return i=typeof i=="function"?i:t,xr(e,M,i)}function Sv(e){return xr(e,F|M)}function Pv(e,i){return i=typeof i=="function"?i:t,xr(e,F|M,i)}function Ov(e,i){return i==null||_u(e,i,zt(i))}function $r(e,i){return e===i||e!==e&&i!==i}var Rv=Zs(ga),Av=Zs(function(e,i){return e>=i}),Mi=Su(function(){return arguments}())?Su:function(e){return mt(e)&&Me.call(e,"callee")&&!lu.call(e,"callee")},me=T.isArray,Tv=Qt?fr(Qt):qd;function sr(e){return e!=null&&co(e.length)&&!ei(e)}function Et(e){return mt(e)&&sr(e)}function Cv(e){return e===!0||e===!1||mt(e)&&Yt(e)==C}var wi=Vp||ec,$v=Ar?fr(Ar):Md;function Nv(e){return mt(e)&&e.nodeType===1&&!jn(e)}function Lv(e){if(e==null)return!0;if(sr(e)&&(me(e)||typeof e=="string"||typeof e.splice=="function"||wi(e)||un(e)||Mi(e)))return!e.length;var i=Kt(e);if(i==we||i==Fe)return!e.size;if(Dn(e))return!ma(e).length;for(var a in e)if(Me.call(e,a))return!1;return!0}function Dv(e,i){return $n(e,i)}function Fv(e,i,a){a=typeof a=="function"?a:t;var u=a?a(e,i):t;return u===t?$n(e,i,t,a):!!u}function ka(e){if(!mt(e))return!1;var i=Yt(e);return i==E||i==h||typeof e.message=="string"&&typeof e.name=="string"&&!jn(e)}function jv(e){return typeof e=="number"&&pu(e)}function ei(e){if(!ht(e))return!1;var i=Yt(e);return i==ee||i==fe||i==$||i==_t}function Nh(e){return typeof e=="number"&&e==_e(e)}function co(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=V}function ht(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function mt(e){return e!=null&&typeof e=="object"}var Lh=_r?fr(_r):Ud;function qv(e,i){return e===i||va(e,i,La(i))}function Mv(e,i,a){return a=typeof a=="function"?a:t,va(e,i,La(i),a)}function zv(e){return Dh(e)&&e!=+e}function Uv(e){if(Ig(e))throw new de(c);return Pu(e)}function Hv(e){return e===null}function Bv(e){return e==null}function Dh(e){return typeof e=="number"||mt(e)&&Yt(e)==$e}function jn(e){if(!mt(e)||Yt(e)!=Pe)return!1;var i=Ds(e);if(i===null)return!0;var a=Me.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&Cs.call(a)==Mp}var Va=zr?fr(zr):Hd;function kv(e){return Nh(e)&&e>=-V&&e<=V}var Fh=En?fr(En):Bd;function uo(e){return typeof e=="string"||!me(e)&&mt(e)&&Yt(e)==Xe}function dr(e){return typeof e=="symbol"||mt(e)&&Yt(e)==Ze}var un=Ci?fr(Ci):kd;function Vv(e){return e===t}function Kv(e){return mt(e)&&Kt(e)==Ue}function Gv(e){return mt(e)&&Yt(e)==et}var Wv=Zs(_a),Jv=Zs(function(e,i){return e<=i});function jh(e){if(!e)return[];if(sr(e))return uo(e)?Tr(e):nr(e);if(In&&e[In])return Op(e[In]());var i=Kt(e),a=i==we?oa:i==Fe?Rs:hn;return a(e)}function ti(e){if(!e)return e===0?e:0;if(e=Pr(e),e===ce||e===-ce){var i=e<0?-1:1;return i*H}return e===e?e:0}function _e(e){var i=ti(e),a=i%1;return i===i?a?i-a:i:0}function qh(e){return e?Di(_e(e),0,G):0}function Pr(e){if(typeof e=="number")return e;if(dr(e))return k;if(ht(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=ht(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=iu(e);var a=Do.test(e);return a||jo.test(e)?ve(e.slice(2),a?2:8):Lo.test(e)?k:+e}function Mh(e){return Hr(e,or(e))}function Qv(e){return e?Di(_e(e),-V,V):e===0?e:0}function je(e){return e==null?"":pr(e)}var Yv=on(function(e,i){if(Dn(i)||sr(i)){Hr(i,zt(i),e);return}for(var a in i)Me.call(i,a)&&An(e,a,i[a])}),zh=on(function(e,i){Hr(i,or(i),e)}),ho=on(function(e,i,a,u){Hr(i,or(i),e,u)}),Xv=on(function(e,i,a,u){Hr(i,zt(i),e,u)}),Zv=Xr(fa);function e0(e,i){var a=sn(e);return i==null?a:mu(a,i)}var t0=Ie(function(e,i){e=Je(e);var a=-1,u=i.length,f=u>2?i[2]:t;for(f&&Xt(i[0],i[1],f)&&(u=1);++a<u;)for(var g=i[a],w=or(g),b=-1,P=w.length;++b<P;){var j=w[b],q=e[j];(q===t||$r(q,tn[j])&&!Me.call(e,j))&&(e[j]=g[j])}return e}),r0=Ie(function(e){return e.push(t,ih),Mt(Uh,t,e)});function i0(e,i){return Zc(e,se(i,3),Ur)}function n0(e,i){return Zc(e,se(i,3),da)}function s0(e,i){return e==null?e:pa(e,se(i,3),or)}function o0(e,i){return e==null?e:xu(e,se(i,3),or)}function a0(e,i){return e&&Ur(e,se(i,3))}function c0(e,i){return e&&da(e,se(i,3))}function u0(e){return e==null?[]:Vs(e,zt(e))}function h0(e){return e==null?[]:Vs(e,or(e))}function Ka(e,i,a){var u=e==null?t:Fi(e,i);return u===t?a:u}function l0(e,i){return e!=null&&oh(e,i,Ld)}function Ga(e,i){return e!=null&&oh(e,i,Dd)}var f0=Xu(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=$s.call(i)),e[i]=a},Ja(ar)),p0=Xu(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=$s.call(i)),Me.call(e,i)?e[i].push(a):e[i]=[a]},se),d0=Ie(Cn);function zt(e){return sr(e)?yu(e):ma(e)}function or(e){return sr(e)?yu(e,!0):Vd(e)}function g0(e,i){var a={};return i=se(i,3),Ur(e,function(u,f,g){Qr(a,i(u,f,g),u)}),a}function y0(e,i){var a={};return i=se(i,3),Ur(e,function(u,f,g){Qr(a,f,i(u,f,g))}),a}var v0=on(function(e,i,a){Ks(e,i,a)}),Uh=on(function(e,i,a,u){Ks(e,i,a,u)}),m0=Xr(function(e,i){var a={};if(e==null)return a;var u=!1;i=st(i,function(g){return g=mi(g,e),u||(u=g.length>1),g}),Hr(e,$a(e),a),u&&(a=xr(a,F|A|M,fg));for(var f=i.length;f--;)Ia(a,i[f]);return a});function _0(e,i){return Hh(e,ao(se(i)))}var w0=Xr(function(e,i){return e==null?{}:Gd(e,i)});function Hh(e,i){if(e==null)return{};var a=st($a(e),function(u){return[u]});return i=se(i),Nu(e,a,function(u,f){return i(u,f[0])})}function b0(e,i,a){i=mi(i,e);var u=-1,f=i.length;for(f||(f=1,e=t);++u<f;){var g=e==null?t:e[Br(i[u])];g===t&&(u=f,g=a),e=ei(g)?g.call(e):g}return e}function E0(e,i,a){return e==null?e:Nn(e,i,a)}function x0(e,i,a,u){return u=typeof u=="function"?u:t,e==null?e:Nn(e,i,a,u)}var Bh=th(zt),kh=th(or);function I0(e,i,a){var u=me(e),f=u||wi(e)||un(e);if(i=se(i,4),a==null){var g=e&&e.constructor;f?a=u?new g:[]:ht(e)?a=ei(g)?sn(Ds(e)):{}:a={}}return(f?wr:Ur)(e,function(w,b,P){return i(a,w,b,P)}),a}function S0(e,i){return e==null?!0:Ia(e,i)}function P0(e,i,a){return e==null?e:qu(e,i,Oa(a))}function O0(e,i,a,u){return u=typeof u=="function"?u:t,e==null?e:qu(e,i,Oa(a),u)}function hn(e){return e==null?[]:sa(e,zt(e))}function R0(e){return e==null?[]:sa(e,or(e))}function A0(e,i,a){return a===t&&(a=i,i=t),a!==t&&(a=Pr(a),a=a===a?a:0),i!==t&&(i=Pr(i),i=i===i?i:0),Di(Pr(e),i,a)}function T0(e,i,a){return i=ti(i),a===t?(a=i,i=0):a=ti(a),e=Pr(e),Fd(e,i,a)}function C0(e,i,a){if(a&&typeof a!="boolean"&&Xt(e,i,a)&&(i=a=t),a===t&&(typeof i=="boolean"?(a=i,i=t):typeof e=="boolean"&&(a=e,e=t)),e===t&&i===t?(e=0,i=1):(e=ti(e),i===t?(i=e,e=0):i=ti(i)),e>i){var u=e;e=i,i=u}if(a||e%1||i%1){var f=du();return Vt(e+f*(i-e+Ge("1e-"+((f+"").length-1))),i)}return ba(e,i)}var $0=an(function(e,i,a){return i=i.toLowerCase(),e+(a?Vh(i):i)});function Vh(e){return Wa(je(e).toLowerCase())}function Kh(e){return e=je(e),e&&e.replace(Kr,Ep).replace(Qo,"")}function N0(e,i,a){e=je(e),i=pr(i);var u=e.length;a=a===t?u:Di(_e(a),0,u);var f=a;return a-=i.length,a>=0&&e.slice(a,f)==i}function L0(e){return e=je(e),e&&it.test(e)?e.replace(Pi,xp):e}function D0(e){return e=je(e),e&&At.test(e)?e.replace(gt,"\\$&"):e}var F0=an(function(e,i,a){return e+(a?"-":"")+i.toLowerCase()}),j0=an(function(e,i,a){return e+(a?" ":"")+i.toLowerCase()}),q0=Ju("toLowerCase");function M0(e,i,a){e=je(e),i=_e(i);var u=i?Zi(e):0;if(!i||u>=i)return e;var f=(i-u)/2;return Xs(Ms(f),a)+e+Xs(qs(f),a)}function z0(e,i,a){e=je(e),i=_e(i);var u=i?Zi(e):0;return i&&u<i?e+Xs(i-u,a):e}function U0(e,i,a){e=je(e),i=_e(i);var u=i?Zi(e):0;return i&&u<i?Xs(i-u,a)+e:e}function H0(e,i,a){return a||i==null?i=0:i&&(i=+i),Jp(je(e).replace(yt,""),i||0)}function B0(e,i,a){return(a?Xt(e,i,a):i===t)?i=1:i=_e(i),Ea(je(e),i)}function k0(){var e=arguments,i=je(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var V0=an(function(e,i,a){return e+(a?"_":"")+i.toLowerCase()});function K0(e,i,a){return a&&typeof a!="number"&&Xt(e,i,a)&&(i=a=t),a=a===t?G:a>>>0,a?(e=je(e),e&&(typeof i=="string"||i!=null&&!Va(i))&&(i=pr(i),!i&&Xi(e))?_i(Tr(e),0,a):e.split(i,a)):[]}var G0=an(function(e,i,a){return e+(a?" ":"")+Wa(i)});function W0(e,i,a){return e=je(e),a=a==null?0:Di(_e(a),0,e.length),i=pr(i),e.slice(a,a+i.length)==i}function J0(e,i,a){var u=d.templateSettings;a&&Xt(e,i,a)&&(i=t),e=je(e),i=ho({},i,u,rh);var f=ho({},i.imports,u.imports,rh),g=zt(f),w=sa(f,g),b,P,j=0,q=i.interpolate||ki,B="__p += '",J=aa((i.escape||ki).source+"|"+q.source+"|"+(q===ut?No:ki).source+"|"+(i.evaluate||ki).source+"|$","g"),te="//# sourceURL="+(Me.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yo+"]")+`
`;e.replace(J,function(ae,Se,Ae,gr,Zt,yr){return Ae||(Ae=gr),B+=e.slice(j,yr).replace(Mo,Ip),Se&&(b=!0,B+=`' +
__e(`+Se+`) +
'`),Zt&&(P=!0,B+=`';
`+Zt+`;
__p += '`),Ae&&(B+=`' +
((__t = (`+Ae+`)) == null ? '' : __t) +
'`),j=yr+ae.length,ae}),B+=`';
`;var oe=Me.call(i,"variable")&&i.variable;if(!oe)B=`with (obj) {
`+B+`
}
`;else if(Co.test(oe))throw new de(p);B=(P?B.replace(qr,""):B).replace(Jt,"$1").replace(Vr,"$1;"),B="function("+(oe||"obj")+`) {
`+(oe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(P?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+B+`return __p
}`;var be=Wh(function(){return De(g,te+"return "+B).apply(t,w)});if(be.source=B,ka(be))throw be;return be}function Q0(e){return je(e).toLowerCase()}function Y0(e){return je(e).toUpperCase()}function X0(e,i,a){if(e=je(e),e&&(a||i===t))return iu(e);if(!e||!(i=pr(i)))return e;var u=Tr(e),f=Tr(i),g=nu(u,f),w=su(u,f)+1;return _i(u,g,w).join("")}function Z0(e,i,a){if(e=je(e),e&&(a||i===t))return e.slice(0,au(e)+1);if(!e||!(i=pr(i)))return e;var u=Tr(e),f=su(u,Tr(i))+1;return _i(u,0,f).join("")}function em(e,i,a){if(e=je(e),e&&(a||i===t))return e.replace(yt,"");if(!e||!(i=pr(i)))return e;var u=Tr(e),f=nu(u,Tr(i));return _i(u,f).join("")}function tm(e,i){var a=re,u=ue;if(ht(i)){var f="separator"in i?i.separator:f;a="length"in i?_e(i.length):a,u="omission"in i?pr(i.omission):u}e=je(e);var g=e.length;if(Xi(e)){var w=Tr(e);g=w.length}if(a>=g)return e;var b=a-Zi(u);if(b<1)return u;var P=w?_i(w,0,b).join(""):e.slice(0,b);if(f===t)return P+u;if(w&&(b+=P.length-b),Va(f)){if(e.slice(b).search(f)){var j,q=P;for(f.global||(f=aa(f.source,je(mr.exec(f))+"g")),f.lastIndex=0;j=f.exec(q);)var B=j.index;P=P.slice(0,B===t?b:B)}}else if(e.indexOf(pr(f),b)!=b){var J=P.lastIndexOf(f);J>-1&&(P=P.slice(0,J))}return P+u}function rm(e){return e=je(e),e&&ft.test(e)?e.replace(hi,Cp):e}var im=an(function(e,i,a){return e+(a?" ":"")+i.toUpperCase()}),Wa=Ju("toUpperCase");function Gh(e,i,a){return e=je(e),i=a?t:i,i===t?Pp(e)?Lp(e):vp(e):e.match(i)||[]}var Wh=Ie(function(e,i){try{return Mt(e,t,i)}catch(a){return ka(a)?a:new de(a)}}),nm=Xr(function(e,i){return wr(i,function(a){a=Br(a),Qr(e,a,Ha(e[a],e))}),e});function sm(e){var i=e==null?0:e.length,a=se();return e=i?st(e,function(u){if(typeof u[1]!="function")throw new br(l);return[a(u[0]),u[1]]}):[],Ie(function(u){for(var f=-1;++f<i;){var g=e[f];if(Mt(g[0],this,u))return Mt(g[1],this,u)}})}function om(e){return Cd(xr(e,F))}function Ja(e){return function(){return e}}function am(e,i){return e==null||e!==e?i:e}var cm=Yu(),um=Yu(!0);function ar(e){return e}function Qa(e){return Ou(typeof e=="function"?e:xr(e,F))}function hm(e){return Au(xr(e,F))}function lm(e,i){return Tu(e,xr(i,F))}var fm=Ie(function(e,i){return function(a){return Cn(a,e,i)}}),pm=Ie(function(e,i){return function(a){return Cn(e,a,i)}});function Ya(e,i,a){var u=zt(i),f=Vs(i,u);a==null&&!(ht(i)&&(f.length||!u.length))&&(a=i,i=e,e=this,f=Vs(i,zt(i)));var g=!(ht(a)&&"chain"in a)||!!a.chain,w=ei(e);return wr(f,function(b){var P=i[b];e[b]=P,w&&(e.prototype[b]=function(){var j=this.__chain__;if(g||j){var q=e(this.__wrapped__),B=q.__actions__=nr(this.__actions__);return B.push({func:P,args:arguments,thisArg:e}),q.__chain__=j,q}return P.apply(e,pi([this.value()],arguments))})}),e}function dm(){return Re._===this&&(Re._=zp),this}function Xa(){}function gm(e){return e=_e(e),Ie(function(i){return Cu(i,e)})}var ym=Aa(st),vm=Aa(Xc),mm=Aa(ea);function Jh(e){return Fa(e)?ta(Br(e)):Wd(e)}function _m(e){return function(i){return e==null?t:Fi(e,i)}}var wm=Zu(),bm=Zu(!0);function Za(){return[]}function ec(){return!1}function Em(){return{}}function xm(){return""}function Im(){return!0}function Sm(e,i){if(e=_e(e),e<1||e>V)return[];var a=G,u=Vt(e,G);i=se(i),e-=G;for(var f=na(u,i);++a<e;)i(a);return f}function Pm(e){return me(e)?st(e,Br):dr(e)?[e]:nr(gh(je(e)))}function Om(e){var i=++qp;return je(e)+i}var Rm=Ys(function(e,i){return e+i},0),Am=Ta("ceil"),Tm=Ys(function(e,i){return e/i},1),Cm=Ta("floor");function $m(e){return e&&e.length?ks(e,ar,ga):t}function Nm(e,i){return e&&e.length?ks(e,se(i,2),ga):t}function Lm(e){return tu(e,ar)}function Dm(e,i){return tu(e,se(i,2))}function Fm(e){return e&&e.length?ks(e,ar,_a):t}function jm(e,i){return e&&e.length?ks(e,se(i,2),_a):t}var qm=Ys(function(e,i){return e*i},1),Mm=Ta("round"),zm=Ys(function(e,i){return e-i},0);function Um(e){return e&&e.length?ia(e,ar):0}function Hm(e,i){return e&&e.length?ia(e,se(i,2)):0}return d.after=hv,d.ary=Ph,d.assign=Yv,d.assignIn=zh,d.assignInWith=ho,d.assignWith=Xv,d.at=Zv,d.before=Oh,d.bind=Ha,d.bindAll=nm,d.bindKey=Rh,d.castArray=Ev,d.chain=xh,d.chunk=Cg,d.compact=$g,d.concat=Ng,d.cond=sm,d.conforms=om,d.constant=Ja,d.countBy=Uy,d.create=e0,d.curry=Ah,d.curryRight=Th,d.debounce=Ch,d.defaults=t0,d.defaultsDeep=r0,d.defer=lv,d.delay=fv,d.difference=Lg,d.differenceBy=Dg,d.differenceWith=Fg,d.drop=jg,d.dropRight=qg,d.dropRightWhile=Mg,d.dropWhile=zg,d.fill=Ug,d.filter=By,d.flatMap=Ky,d.flatMapDeep=Gy,d.flatMapDepth=Wy,d.flatten=_h,d.flattenDeep=Hg,d.flattenDepth=Bg,d.flip=pv,d.flow=cm,d.flowRight=um,d.fromPairs=kg,d.functions=u0,d.functionsIn=h0,d.groupBy=Jy,d.initial=Kg,d.intersection=Gg,d.intersectionBy=Wg,d.intersectionWith=Jg,d.invert=f0,d.invertBy=p0,d.invokeMap=Yy,d.iteratee=Qa,d.keyBy=Xy,d.keys=zt,d.keysIn=or,d.map=no,d.mapKeys=g0,d.mapValues=y0,d.matches=hm,d.matchesProperty=lm,d.memoize=oo,d.merge=v0,d.mergeWith=Uh,d.method=fm,d.methodOf=pm,d.mixin=Ya,d.negate=ao,d.nthArg=gm,d.omit=m0,d.omitBy=_0,d.once=dv,d.orderBy=Zy,d.over=ym,d.overArgs=gv,d.overEvery=vm,d.overSome=mm,d.partial=Ba,d.partialRight=$h,d.partition=ev,d.pick=w0,d.pickBy=Hh,d.property=Jh,d.propertyOf=_m,d.pull=Zg,d.pullAll=bh,d.pullAllBy=ey,d.pullAllWith=ty,d.pullAt=ry,d.range=wm,d.rangeRight=bm,d.rearg=yv,d.reject=iv,d.remove=iy,d.rest=vv,d.reverse=za,d.sampleSize=sv,d.set=E0,d.setWith=x0,d.shuffle=ov,d.slice=ny,d.sortBy=uv,d.sortedUniq=ly,d.sortedUniqBy=fy,d.split=K0,d.spread=mv,d.tail=py,d.take=dy,d.takeRight=gy,d.takeRightWhile=yy,d.takeWhile=vy,d.tap=$y,d.throttle=_v,d.thru=io,d.toArray=jh,d.toPairs=Bh,d.toPairsIn=kh,d.toPath=Pm,d.toPlainObject=Mh,d.transform=I0,d.unary=wv,d.union=my,d.unionBy=_y,d.unionWith=wy,d.uniq=by,d.uniqBy=Ey,d.uniqWith=xy,d.unset=S0,d.unzip=Ua,d.unzipWith=Eh,d.update=P0,d.updateWith=O0,d.values=hn,d.valuesIn=R0,d.without=Iy,d.words=Gh,d.wrap=bv,d.xor=Sy,d.xorBy=Py,d.xorWith=Oy,d.zip=Ry,d.zipObject=Ay,d.zipObjectDeep=Ty,d.zipWith=Cy,d.entries=Bh,d.entriesIn=kh,d.extend=zh,d.extendWith=ho,Ya(d,d),d.add=Rm,d.attempt=Wh,d.camelCase=$0,d.capitalize=Vh,d.ceil=Am,d.clamp=A0,d.clone=xv,d.cloneDeep=Sv,d.cloneDeepWith=Pv,d.cloneWith=Iv,d.conformsTo=Ov,d.deburr=Kh,d.defaultTo=am,d.divide=Tm,d.endsWith=N0,d.eq=$r,d.escape=L0,d.escapeRegExp=D0,d.every=Hy,d.find=ky,d.findIndex=vh,d.findKey=i0,d.findLast=Vy,d.findLastIndex=mh,d.findLastKey=n0,d.floor=Cm,d.forEach=Ih,d.forEachRight=Sh,d.forIn=s0,d.forInRight=o0,d.forOwn=a0,d.forOwnRight=c0,d.get=Ka,d.gt=Rv,d.gte=Av,d.has=l0,d.hasIn=Ga,d.head=wh,d.identity=ar,d.includes=Qy,d.indexOf=Vg,d.inRange=T0,d.invoke=d0,d.isArguments=Mi,d.isArray=me,d.isArrayBuffer=Tv,d.isArrayLike=sr,d.isArrayLikeObject=Et,d.isBoolean=Cv,d.isBuffer=wi,d.isDate=$v,d.isElement=Nv,d.isEmpty=Lv,d.isEqual=Dv,d.isEqualWith=Fv,d.isError=ka,d.isFinite=jv,d.isFunction=ei,d.isInteger=Nh,d.isLength=co,d.isMap=Lh,d.isMatch=qv,d.isMatchWith=Mv,d.isNaN=zv,d.isNative=Uv,d.isNil=Bv,d.isNull=Hv,d.isNumber=Dh,d.isObject=ht,d.isObjectLike=mt,d.isPlainObject=jn,d.isRegExp=Va,d.isSafeInteger=kv,d.isSet=Fh,d.isString=uo,d.isSymbol=dr,d.isTypedArray=un,d.isUndefined=Vv,d.isWeakMap=Kv,d.isWeakSet=Gv,d.join=Qg,d.kebabCase=F0,d.last=Sr,d.lastIndexOf=Yg,d.lowerCase=j0,d.lowerFirst=q0,d.lt=Wv,d.lte=Jv,d.max=$m,d.maxBy=Nm,d.mean=Lm,d.meanBy=Dm,d.min=Fm,d.minBy=jm,d.stubArray=Za,d.stubFalse=ec,d.stubObject=Em,d.stubString=xm,d.stubTrue=Im,d.multiply=qm,d.nth=Xg,d.noConflict=dm,d.noop=Xa,d.now=so,d.pad=M0,d.padEnd=z0,d.padStart=U0,d.parseInt=H0,d.random=C0,d.reduce=tv,d.reduceRight=rv,d.repeat=B0,d.replace=k0,d.result=b0,d.round=Mm,d.runInContext=S,d.sample=nv,d.size=av,d.snakeCase=V0,d.some=cv,d.sortedIndex=sy,d.sortedIndexBy=oy,d.sortedIndexOf=ay,d.sortedLastIndex=cy,d.sortedLastIndexBy=uy,d.sortedLastIndexOf=hy,d.startCase=G0,d.startsWith=W0,d.subtract=zm,d.sum=Um,d.sumBy=Hm,d.template=J0,d.times=Sm,d.toFinite=ti,d.toInteger=_e,d.toLength=qh,d.toLower=Q0,d.toNumber=Pr,d.toSafeInteger=Qv,d.toString=je,d.toUpper=Y0,d.trim=X0,d.trimEnd=Z0,d.trimStart=em,d.truncate=tm,d.unescape=rm,d.uniqueId=Om,d.upperCase=im,d.upperFirst=Wa,d.each=Ih,d.eachRight=Sh,d.first=wh,Ya(d,function(){var e={};return Ur(d,function(i,a){Me.call(d.prototype,a)||(e[a]=i)}),e}(),{chain:!1}),d.VERSION=n,wr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),wr(["drop","take"],function(e,i){Oe.prototype[e]=function(a){a=a===t?1:jt(_e(a),0);var u=this.__filtered__&&!i?new Oe(this):this.clone();return u.__filtered__?u.__takeCount__=Vt(a,u.__takeCount__):u.__views__.push({size:Vt(a,G),type:e+(u.__dir__<0?"Right":"")}),u},Oe.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),wr(["filter","map","takeWhile"],function(e,i){var a=i+1,u=a==m||a==Y;Oe.prototype[e]=function(f){var g=this.clone();return g.__iteratees__.push({iteratee:se(f,3),type:a}),g.__filtered__=g.__filtered__||u,g}}),wr(["head","last"],function(e,i){var a="take"+(i?"Right":"");Oe.prototype[e]=function(){return this[a](1).value()[0]}}),wr(["initial","tail"],function(e,i){var a="drop"+(i?"":"Right");Oe.prototype[e]=function(){return this.__filtered__?new Oe(this):this[a](1)}}),Oe.prototype.compact=function(){return this.filter(ar)},Oe.prototype.find=function(e){return this.filter(e).head()},Oe.prototype.findLast=function(e){return this.reverse().find(e)},Oe.prototype.invokeMap=Ie(function(e,i){return typeof e=="function"?new Oe(this):this.map(function(a){return Cn(a,e,i)})}),Oe.prototype.reject=function(e){return this.filter(ao(se(e)))},Oe.prototype.slice=function(e,i){e=_e(e);var a=this;return a.__filtered__&&(e>0||i<0)?new Oe(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),i!==t&&(i=_e(i),a=i<0?a.dropRight(-i):a.take(i-e)),a)},Oe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Oe.prototype.toArray=function(){return this.take(G)},Ur(Oe.prototype,function(e,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),f=d[u?"take"+(i=="last"?"Right":""):i],g=u||/^find/.test(i);f&&(d.prototype[i]=function(){var w=this.__wrapped__,b=u?[1]:arguments,P=w instanceof Oe,j=b[0],q=P||me(w),B=function(Se){var Ae=f.apply(d,pi([Se],b));return u&&J?Ae[0]:Ae};q&&a&&typeof j=="function"&&j.length!=1&&(P=q=!1);var J=this.__chain__,te=!!this.__actions__.length,oe=g&&!J,be=P&&!te;if(!g&&q){w=be?w:new Oe(this);var ae=e.apply(w,b);return ae.__actions__.push({func:io,args:[B],thisArg:t}),new Er(ae,J)}return oe&&be?e.apply(this,b):(ae=this.thru(B),oe?u?ae.value()[0]:ae.value():ae)})}),wr(["pop","push","shift","sort","splice","unshift"],function(e){var i=As[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var f=arguments;if(u&&!this.__chain__){var g=this.value();return i.apply(me(g)?g:[],f)}return this[a](function(w){return i.apply(me(w)?w:[],f)})}}),Ur(Oe.prototype,function(e,i){var a=d[i];if(a){var u=a.name+"";Me.call(nn,u)||(nn[u]=[]),nn[u].push({name:i,func:a})}}),nn[Qs(t,Ee).name]=[{name:"wrapper",func:t}],Oe.prototype.clone=rd,Oe.prototype.reverse=id,Oe.prototype.value=nd,d.prototype.at=Ny,d.prototype.chain=Ly,d.prototype.commit=Dy,d.prototype.next=Fy,d.prototype.plant=qy,d.prototype.reverse=My,d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=zy,d.prototype.first=d.prototype.head,In&&(d.prototype[In]=jy),d},en=Dp();bt?((bt.exports=en)._=en,We._=en):Re._=en}).call(Gn)})(Lc,Lc.exports);var yI=Object.defineProperty,vI=Object.defineProperties,mI=Object.getOwnPropertyDescriptors,ef=Object.getOwnPropertySymbols,_I=Object.prototype.hasOwnProperty,wI=Object.prototype.propertyIsEnumerable,tf=(o,r,t)=>r in o?yI(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,po=(o,r)=>{for(var t in r||(r={}))_I.call(r,t)&&tf(o,t,r[t]);if(ef)for(var t of ef(r))wI.call(r,t)&&tf(o,t,r[t]);return o},bI=(o,r)=>vI(o,mI(r));function Ii(o,r,t){var n;const s=R_(o);return((n=r.rpcMap)==null?void 0:n[s.reference])||`${gI}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function Bi(o){return o.includes(":")?o.split(":")[1]:o}function hp(o){return o.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)}function EI(o,r){const t=Object.keys(r.namespaces).filter(s=>s.includes(o));if(!t.length)return[];const n=[];return t.forEach(s=>{const c=r.namespaces[s].accounts;n.push(...c)}),n}function xI(o={},r={}){const t=rf(o),n=rf(r);return Lc.exports.merge(t,n)}function rf(o){var r,t,n,s;const c={};if(!vo(o))return c;for(const[l,p]of Object.entries(o)){const _=yf(l)?[l]:p.chains,y=p.methods||[],O=p.events||[],F=p.rpcMap||{},A=Wn(l);c[A]=bI(po(po({},c[A]),p),{chains:rc(_,(r=c[A])==null?void 0:r.chains),methods:rc(y,(t=c[A])==null?void 0:t.methods),events:rc(O,(n=c[A])==null?void 0:n.events),rpcMap:po(po({},F),(s=c[A])==null?void 0:s.rpcMap)})}return c}function II(o){return o.includes(":")?o.split(":")[2]:o}function SI(o){const r={};for(const[t,n]of Object.entries(o)){const s=n.methods||[],c=n.events||[],l=n.accounts||[],p=yf(t)?[t]:n.chains?n.chains:hp(n.accounts);r[t]={chains:p,methods:s,events:c,accounts:l}}return r}function pc(o){return typeof o=="number"?o:o.includes("0x")?parseInt(o,16):o.includes(":")?Number(o.split(":")[1]):Number(o)}const lp={},ot=o=>lp[o],dc=(o,r)=>{lp[o]=r};class PI{constructor(r){this.name="polkadot",this.namespace=r.namespace,this.events=ot("events"),this.client=ot("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Bi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||Ii(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new ci(new Si(n,ot("disableProviderPing")))}}class OI{constructor(r){this.name="eip155",this.namespace=r.namespace,this.events=ot("events"),this.client=ot("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(r){switch(r.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(r);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(r.request.method)?await this.client.request(r):this.getHttpProvider().request(r.request)}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(parseInt(r),t),this.chainId=parseInt(r),this.events.emit(ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}createHttpProvider(r,t){const n=t||Ii(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new ci(new Si(n,ot("disableProviderPing")))}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=parseInt(Bi(t));r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const r=this.chainId,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}async handleSwitchChain(r){var t,n;let s=r.request.params?(t=r.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const c=parseInt(s,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:r.topic,request:{method:r.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(r){return this.namespace.chains.includes(`${this.name}:${r}`)}}class RI{constructor(r){this.name="solana",this.namespace=r.namespace,this.events=ot("events"),this.client=ot("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Bi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||Ii(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new ci(new Si(n,ot("disableProviderPing")))}}class AI{constructor(r){this.name="cosmos",this.namespace=r.namespace,this.events=ot("events"),this.client=ot("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Bi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||Ii(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new ci(new Si(n,ot("disableProviderPing")))}}class TI{constructor(r){this.name="cip34",this.namespace=r.namespace,this.events=ot("events"),this.client=ot("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{const n=this.getCardanoRPCUrl(t),s=Bi(t);r[s]=this.createHttpProvider(s,n)}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}getCardanoRPCUrl(r){const t=this.namespace.rpcMap;if(t)return t[r]}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||this.getCardanoRPCUrl(r);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new ci(new Si(n,ot("disableProviderPing")))}}class CI{constructor(r){this.name="elrond",this.namespace=r.namespace,this.events=ot("events"),this.client=ot("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Bi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||Ii(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new ci(new Si(n,ot("disableProviderPing")))}}class $I{constructor(r){this.name="multiversx",this.namespace=r.namespace,this.events=ot("events"),this.client=ot("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Bi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||Ii(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new ci(new Si(n,ot("disableProviderPing")))}}class NI{constructor(r){this.name="near",this.namespace=r.namespace,this.events=ot("events"),this.client=ot("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){if(this.chainId=r,!this.httpProviders[r]){const n=t||Ii(`${this.name}:${r}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,n)}this.events.emit(ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;r[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||Ii(r,this.namespace);return typeof n>"u"?void 0:new ci(new Si(n,ot("disableProviderPing")))}}var LI=Object.defineProperty,DI=Object.defineProperties,FI=Object.getOwnPropertyDescriptors,nf=Object.getOwnPropertySymbols,jI=Object.prototype.hasOwnProperty,qI=Object.prototype.propertyIsEnumerable,sf=(o,r,t)=>r in o?LI(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,go=(o,r)=>{for(var t in r||(r={}))jI.call(r,t)&&sf(o,t,r[t]);if(nf)for(var t of nf(r))qI.call(r,t)&&sf(o,t,r[t]);return o},gc=(o,r)=>DI(o,FI(r));class Qc{constructor(r){this.events=new zc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=r,this.logger=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Te.pino(Te.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||Xl})),this.disableProviderPing=(r==null?void 0:r.disableProviderPing)||!1}static async init(r){const t=new Qc(r);return await t.initialize(),t}async request(r,t){const[n,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:go({},r),chainId:`${n}:${s}`,topic:this.session.topic})}sendAsync(r,t,n){this.request(r,n).then(s=>t(null,s)).catch(s=>t(s,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var r;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(r=this.session)==null?void 0:r.topic,reason:tr("USER_DISCONNECTED")}),await this.cleanup()}async connect(r){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(r),await this.cleanupPendingPairings(),!r.skipPairing)return await this.pair(r.pairingTopic)}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}removeListener(r,t){this.events.removeListener(r,t)}off(r,t){this.events.off(r,t)}get isWalletConnect(){return!0}async pair(r){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:s}=await this.client.connect({pairingTopic:r,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await s().then(c=>{this.session=c,this.namespaces||(this.namespaces=SI(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==cp)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(r,t){try{if(!this.session)return;const[n,s]=this.validateChain(r);this.getProvider(n).setDefaultChain(s,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(r={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(vn(t)){for(const n of t)r.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const r=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[r]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await cI.init({logger:this.providerOpts.logger||Xl,relayUrl:this.providerOpts.relayUrl||fI,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const r=[...new Set(Object.keys(this.session.namespaces).map(t=>Wn(t)))];dc("client",this.client),dc("events",this.events),dc("disableProviderPing",this.disableProviderPing),r.forEach(t=>{if(!this.session)return;const n=EI(t,this.session),s=hp(n),c=xI(this.namespaces,this.optionalNamespaces),l=gc(go({},c[t]),{accounts:n,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new OI({namespace:l});break;case"solana":this.rpcProviders[t]=new RI({namespace:l});break;case"cosmos":this.rpcProviders[t]=new AI({namespace:l});break;case"polkadot":this.rpcProviders[t]=new PI({namespace:l});break;case"cip34":this.rpcProviders[t]=new TI({namespace:l});break;case"elrond":this.rpcProviders[t]=new CI({namespace:l});break;case"multiversx":this.rpcProviders[t]=new $I({namespace:l});break;case"near":this.rpcProviders[t]=new NI({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{const{params:t}=r,{event:n}=t;if(n.name==="accountsChanged"){const s=n.data;s&&vn(s)&&this.events.emit("accountsChanged",s.map(II))}else if(n.name==="chainChanged"){const s=t.chainId,c=t.event.data,l=Wn(s),p=pc(s)!==pc(c)?`${l}:${pc(c)}`:s;this.onChainChanged(p)}else this.events.emit(n.name,n.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:t})=>{var n;const{namespaces:s}=t,c=(n=this.client)==null?void 0:n.session.get(r);this.session=gc(go({},c),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:t})}),this.client.on("session_delete",async r=>{await this.cleanup(),this.events.emit("session_delete",r),this.events.emit("disconnect",gc(go({},tr("USER_DISCONNECTED")),{data:r.topic}))}),this.on(ui.DEFAULT_CHAIN_CHANGED,r=>{this.onChainChanged(r,!0)})}getProvider(r){if(!this.rpcProviders[r])throw new Error(`Provider not found: ${r}`);return this.rpcProviders[r]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(r=>{var t;this.getProvider(r).updateNamespace((t=this.session)==null?void 0:t.namespaces[r])})}setNamespaces(r){const{namespaces:t,optionalNamespaces:n,sessionProperties:s}=r;t&&Object.keys(t).length&&(this.namespaces=t),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",n)}validateChain(r){const[t,n]=(r==null?void 0:r.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,n];if(t&&!Object.keys(this.namespaces||{}).map(l=>Wn(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];const s=Wn(Object.keys(this.namespaces)[0]),c=this.rpcProviders[s].getDefaultChain();return[s,c]}async requestAccounts(){const[r]=this.validateChain();return await this.getProvider(r).requestAccounts()}onChainChanged(r,t=!1){var n;if(!this.namespaces)return;const[s,c]=this.validateChain(r);t||this.getProvider(s).setDefaultChain(c),((n=this.namespaces[s])!=null?n:this.namespaces[`${s}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(r,t){this.client.core.storage.setItem(`${Zl}/${r}`,t)}async getFromStore(r){return await this.client.core.storage.getItem(`${Zl}/${r}`)}}const MI=Qc,zI="wc",UI="ethereum_provider",HI=`${zI}@2:${UI}:`,BI="https://rpc.walletconnect.com/v1/",Dc=["eth_sendTransaction","personal_sign"],kI=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Fc=["chainChanged","accountsChanged"],VI=["chainChanged","accountsChanged","message","disconnect","connect"];var KI=Object.defineProperty,GI=Object.defineProperties,WI=Object.getOwnPropertyDescriptors,of=Object.getOwnPropertySymbols,JI=Object.prototype.hasOwnProperty,QI=Object.prototype.propertyIsEnumerable,af=(o,r,t)=>r in o?KI(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,Qn=(o,r)=>{for(var t in r||(r={}))JI.call(r,t)&&af(o,t,r[t]);if(of)for(var t of of(r))QI.call(r,t)&&af(o,t,r[t]);return o},cf=(o,r)=>GI(o,WI(r));function Eo(o){return Number(o[0].split(":")[1])}function yc(o){return`0x${o.toString(16)}`}function YI(o){const{chains:r,optionalChains:t,methods:n,optionalMethods:s,events:c,optionalEvents:l,rpcMap:p}=o;if(!vn(r))throw new Error("Invalid chains");const _={chains:r,methods:n||Dc,events:c||Fc,rpcMap:Qn({},r.length?{[Eo(r)]:p[Eo(r)]}:{})},y=c==null?void 0:c.filter(M=>!Fc.includes(M)),O=n==null?void 0:n.filter(M=>!Dc.includes(M));if(!t&&!l&&!s&&!(y!=null&&y.length)&&!(O!=null&&O.length))return{required:r.length?_:void 0};const F=(y==null?void 0:y.length)&&(O==null?void 0:O.length)||!t,A={chains:[...new Set(F?_.chains.concat(t||[]):t)],methods:[...new Set(_.methods.concat(s!=null&&s.length?s:kI))],events:[...new Set(_.events.concat(l!=null&&l.length?l:VI))],rpcMap:p};return{required:r.length?_:void 0,optional:t.length?A:void 0}}class Yc{constructor(){this.events=new vr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=HI,this.on=(r,t)=>(this.events.on(r,t),this),this.once=(r,t)=>(this.events.once(r,t),this),this.removeListener=(r,t)=>(this.events.removeListener(r,t),this),this.off=(r,t)=>(this.events.off(r,t),this),this.parseAccount=r=>this.isCompatibleChainId(r)?this.parseAccountId(r).address:r,this.signer={},this.rpc={}}static async init(r){const t=new Yc;return await t.initialize(r),t}async request(r){return await this.signer.request(r,this.formatChainId(this.chainId))}sendAsync(r,t){this.signer.sendAsync(r,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(r){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(r);const{required:t,optional:n}=YI(this.rpc);try{const s=await new Promise(async(l,p)=>{var _;this.rpc.showQrModal&&((_=this.modal)==null||_.subscribeModal(y=>{!y.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),p(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(cf(Qn({namespaces:Qn({},t&&{[this.namespace]:t})},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:r==null?void 0:r.pairingTopic})).then(y=>{l(y)}).catch(y=>{p(new Error(y.message))})});if(!s)return;const c=A_(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:yc(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",r=>{const{params:t}=r,{event:n}=t;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",r)}),this.signer.on("chainChanged",r=>{const t=parseInt(r);this.chainId=t,this.events.emit("chainChanged",yc(this.chainId)),this.persist()}),this.signer.on("session_update",r=>{this.events.emit("session_update",r)}),this.signer.on("session_delete",r=>{this.reset(),this.events.emit("session_delete",r),this.events.emit("disconnect",cf(Qn({},tr("USER_DISCONNECTED")),{data:r.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",r=>{var t,n;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(n=this.modal)==null||n.openModal({uri:r})),this.events.emit("display_uri",r)})}switchEthereumChain(r){this.request({method:"wallet_switchEthereumChain",params:[{chainId:r.toString(16)}]})}isCompatibleChainId(r){return typeof r=="string"?r.startsWith(`${this.namespace}:`):!1}formatChainId(r){return`${this.namespace}:${r}`}parseChainId(r){return Number(r.split(":")[1])}setChainIds(r){const t=r.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",yc(this.chainId)),this.persist())}setChainId(r){if(this.isCompatibleChainId(r)){const t=this.parseChainId(r);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(r){const[t,n,s]=r.split(":");return{chainId:`${t}:${n}`,address:s}}setAccounts(r){this.accounts=r.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(r){var t,n;const s=(t=r==null?void 0:r.chains)!=null?t:[],c=(n=r==null?void 0:r.optionalChains)!=null?n:[],l=s.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const p=s.length?(r==null?void 0:r.methods)||Dc:[],_=s.length?(r==null?void 0:r.events)||Fc:[],y=(r==null?void 0:r.optionalMethods)||[],O=(r==null?void 0:r.optionalEvents)||[],F=(r==null?void 0:r.rpcMap)||this.buildRpcMap(l,r.projectId),A=(r==null?void 0:r.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(M=>this.formatChainId(M)),optionalChains:c.map(M=>this.formatChainId(M)),methods:p,events:_,optionalMethods:y,optionalEvents:O,rpcMap:F,showQrModal:!!(r!=null&&r.showQrModal),qrModalOptions:A,projectId:r.projectId,metadata:r.metadata}}buildRpcMap(r,t){const n={};return r.forEach(s=>{n[s]=this.getRpcUrl(s,t)}),n}async initialize(r){if(this.rpc=this.getRpcConfig(r),this.chainId=this.rpc.chains.length?Eo(this.rpc.chains):Eo(this.rpc.optionalChains),this.signer=await MI.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:r.disableProviderPing,relayUrl:r.relayUrl,storageOptions:r.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:n}=await Bm(()=>import("./index-19ecc27f.js").then(s=>s.i),["assets/index-19ecc27f.js","assets/index-adeb8ac4.js","assets/index-c80b5ac1.css","assets/Home-ee1aa0fb.js","assets/Logo-686844d8.js","assets/tag-cca851a4.js","assets/Logo-5cd63582.css","assets/_commonjsHelpers-de833af9.js","assets/resizeObserver-c48824a6.js","assets/Home-0b37cf5d.css"]);t=n}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Qn({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(n){throw this.signer.logger.error(n),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(r){if(!r)return;const{chains:t,optionalChains:n,rpcMap:s}=r;t&&vn(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(s==null?void 0:s[c])||this.getRpcUrl(c)})),n&&vn(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n==null?void 0:n.map(c=>this.formatChainId(c)),n.forEach(c=>{this.rpc.rpcMap[c]=(s==null?void 0:s[c])||this.getRpcUrl(c)}))}getRpcUrl(r,t){var n;return((n=this.rpc.rpcMap)==null?void 0:n[r])||`${BI}?chainId=eip155:${r}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const r=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${r}`]?this.session.namespaces[`${this.namespace}:${r}`]:this.session.namespaces[this.namespace];this.setChainIds(r?[this.formatChainId(r)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(r){return typeof r=="string"||r instanceof String?[this.parseAccount(r)]:r.map(t=>this.parseAccount(t))}}const fS=Yc;export{fS as EthereumProvider,VI as OPTIONAL_EVENTS,kI as OPTIONAL_METHODS,Fc as REQUIRED_EVENTS,Dc as REQUIRED_METHODS,Yc as default};
